<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Paparazzi UAS: sw/airborne/arch/chibios/mcu_periph/adc_arch.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="penguin_icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Paparazzi UAS
   &#160;<span id="projectnumber">v6.2.0_stable</span>
   </div>
   <div id="projectbrief">Paparazzi is a free software Unmanned Aircraft System.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('chibios_2mcu__periph_2adc__arch_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">adc_arch.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>ADC driver.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="adc_8h_source.html">mcu_periph/adc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="gpio_8h_source.html">mcu_periph/gpio.h</a>&quot;</code><br />
<code>#include &quot;hal.h&quot;</code><br />
<code>#include &quot;std.h&quot;</code><br />
<code>#include &quot;<a class="el" href="ram__arch_8h_source.html">mcu_periph/ram_arch.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for adc_arch.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="chibios_2mcu__periph_2adc__arch_8c__incl.png" border="0" usemap="#asw_2airborne_2arch_2chibios_2mcu__periph_2adc__arch_8c" alt=""/></div>
<map name="asw_2airborne_2arch_2chibios_2mcu__periph_2adc__arch_8c" id="asw_2airborne_2arch_2chibios_2mcu__periph_2adc__arch_8c">
<area shape="rect" title="ADC driver." alt="" coords="343,5,523,47"/>
<area shape="rect" href="adc_8h.html" title="arch independent ADC (Analog to Digital Converter) API" alt="" coords="133,95,271,121"/>
<area shape="rect" href="gpio_8h.html" title="Some architecture independent helper functions for GPIOs." alt="" coords="361,95,504,121"/>
<area shape="rect" title=" " alt="" coords="312,169,367,196"/>
<area shape="rect" title=" " alt="" coords="528,95,583,121"/>
<area shape="rect" href="ram__arch_8h.html" title="Specific RAM section for DMA usage on F7." alt="" coords="607,95,781,121"/>
<area shape="rect" title=" " alt="" coords="5,169,92,196"/>
<area shape="rect" title=" " alt="" coords="116,169,288,196"/>
<area shape="rect" title=" " alt="" coords="391,169,568,196"/>
</map>
</div>
</div>
<p><a href="chibios_2mcu__periph_2adc__arch_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a2934d6c02a6319444fb3e892c72cb8f6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#a2934d6c02a6319444fb3e892c72cb8f6">USE_AD1</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a2934d6c02a6319444fb3e892c72cb8f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a795571e675fa978442745d27f0ba2b2a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#a795571e675fa978442745d27f0ba2b2a">ADC_SAMPLE_RATE</a>&#160;&#160;&#160;ADC_SAMPLE_480</td></tr>
<tr class="memdesc:a795571e675fa978442745d27f0ba2b2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">#endif  <a href="chibios_2mcu__periph_2adc__arch_8c.html#a795571e675fa978442745d27f0ba2b2a">More...</a><br /></td></tr>
<tr class="separator:a795571e675fa978442745d27f0ba2b2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e829897b1929e18c1413dd484408d4a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#a6e829897b1929e18c1413dd484408d4a">ADC_BUF_DEPTH</a>&#160;&#160;&#160;(<a class="el" href="adc_8h.html#a66ebc63de71cc36b02ef080d9e990bac">MAX_AV_NB_SAMPLE</a>/2)</td></tr>
<tr class="separator:a6e829897b1929e18c1413dd484408d4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a297953e2cc58d9c8fef10e6587f47d24"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#a297953e2cc58d9c8fef10e6587f47d24">IN_DMA_SECTION</a> (adcsample_t adc_samples[<a class="el" href="chibios_2mcu__periph_2adc__arch_8h.html#ada9f09bbee2e15c2069f4c25ec74bed8">ADC_NUM_CHANNELS</a> *<a class="el" href="adc_8h.html#a66ebc63de71cc36b02ef080d9e990bac">MAX_AV_NB_SAMPLE</a>])</td></tr>
<tr class="separator:a297953e2cc58d9c8fef10e6587f47d24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba229c19557de0c492527630ad132f6d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#aba229c19557de0c492527630ad132f6d">adc_configure</a> (ADCConversionGroup *cfg, <a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> num_channels, const <a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> channels[], <a class="el" href="vl53l1__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> sample_rate, adccallback_t end_cb, adcerrorcallback_t <a class="el" href="tlsf__malloc__arch_8c.html#a3213f8d0f2a0abc2a6fb5cf54139be33">error_cb</a>)</td></tr>
<tr class="memdesc:aba229c19557de0c492527630ad132f6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the ADC conversion group depending on the architecture.  <a href="chibios_2mcu__periph_2adc__arch_8c.html#aba229c19557de0c492527630ad132f6d">More...</a><br /></td></tr>
<tr class="separator:aba229c19557de0c492527630ad132f6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26596acde147dd47078caaeefd0b502d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#a26596acde147dd47078caaeefd0b502d">adc1callback</a> (ADCDriver *adcp)</td></tr>
<tr class="memdesc:a26596acde147dd47078caaeefd0b502d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adc1 callback.  <a href="chibios_2mcu__periph_2adc__arch_8c.html#a26596acde147dd47078caaeefd0b502d">More...</a><br /></td></tr>
<tr class="separator:a26596acde147dd47078caaeefd0b502d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab33213b168f1b881ddc092b70d45e130"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#ab33213b168f1b881ddc092b70d45e130">adcerrorcallback</a> (ADCDriver *adcp, adcerror_t err)</td></tr>
<tr class="memdesc:ab33213b168f1b881ddc092b70d45e130"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adc error callback.  <a href="chibios_2mcu__periph_2adc__arch_8c.html#ab33213b168f1b881ddc092b70d45e130">More...</a><br /></td></tr>
<tr class="separator:ab33213b168f1b881ddc092b70d45e130"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a289883844d6749adab1cee5aabe41824"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#a289883844d6749adab1cee5aabe41824">adc_buf_channel</a> (<a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> adc_channel, struct <a class="el" href="adc_8h.html#structadc__buf">adc_buf</a> *<a class="el" href="light__scheduler_8c.html#a2dee666f0c1fe072c549ff86b1d0a8ab">s</a>, <a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> av_nb_sample)</td></tr>
<tr class="memdesc:a289883844d6749adab1cee5aabe41824"><td class="mdescLeft">&#160;</td><td class="mdescRight">Link between ChibiOS ADC drivers and Paparazzi adc_buffers.  <a href="chibios_2mcu__periph_2adc__arch_8c.html#a289883844d6749adab1cee5aabe41824">More...</a><br /></td></tr>
<tr class="separator:a289883844d6749adab1cee5aabe41824"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b815e6730e8723a6d1d06d9ef8f31c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#a2b815e6730e8723a6d1d06d9ef8f31c0">adc_init</a> (void)</td></tr>
<tr class="memdesc:a2b815e6730e8723a6d1d06d9ef8f31c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adc init.  <a href="chibios_2mcu__periph_2adc__arch_8c.html#a2b815e6730e8723a6d1d06d9ef8f31c0">More...</a><br /></td></tr>
<tr class="separator:a2b815e6730e8723a6d1d06d9ef8f31c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:acee546d2b3b7908820ea25216782402b"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#acee546d2b3b7908820ea25216782402b">adc_channel_map</a> [<a class="el" href="chibios_2mcu__periph_2adc__arch_8h.html#ada9f09bbee2e15c2069f4c25ec74bed8">ADC_NUM_CHANNELS</a>]</td></tr>
<tr class="separator:acee546d2b3b7908820ea25216782402b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd39363b0bc5b73c6cb4b0d0cc484d90"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#afd39363b0bc5b73c6cb4b0d0cc484d90">adc_error_flag</a> = 0</td></tr>
<tr class="separator:afd39363b0bc5b73c6cb4b0d0cc484d90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae518ea232632d8202116d5981e6c7be8"><td class="memItemLeft" align="right" valign="top">ADCDriver *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#ae518ea232632d8202116d5981e6c7be8">adcp_err</a> = NULL</td></tr>
<tr class="separator:ae518ea232632d8202116d5981e6c7be8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd4c780c10c34ab0f6a309123cc0bcff"><td class="memItemLeft" align="right" valign="top">static ADCConversionGroup&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#abd4c780c10c34ab0f6a309123cc0bcff">adc1_group</a></td></tr>
<tr class="separator:abd4c780c10c34ab0f6a309123cc0bcff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a235d7be89fd1bddc533d5cb64bf0a839"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="adc_8h.html#structadc__buf">adc_buf</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#a235d7be89fd1bddc533d5cb64bf0a839">adc1_buffers</a> [<a class="el" href="chibios_2mcu__periph_2adc__arch_8h.html#ada9f09bbee2e15c2069f4c25ec74bed8">ADC_NUM_CHANNELS</a>]</td></tr>
<tr class="separator:a235d7be89fd1bddc533d5cb64bf0a839"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48348066f5ca0fe6ddf05e233559e513"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="vl53l1__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#a48348066f5ca0fe6ddf05e233559e513">adc1_sum_tmp</a> [<a class="el" href="chibios_2mcu__periph_2adc__arch_8h.html#ada9f09bbee2e15c2069f4c25ec74bed8">ADC_NUM_CHANNELS</a>]</td></tr>
<tr class="separator:a48348066f5ca0fe6ddf05e233559e513"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99a4c90a514730666d9bdd5c36832756"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#a99a4c90a514730666d9bdd5c36832756">adc1_samples_tmp</a> [<a class="el" href="chibios_2mcu__periph_2adc__arch_8h.html#ada9f09bbee2e15c2069f4c25ec74bed8">ADC_NUM_CHANNELS</a>]</td></tr>
<tr class="separator:a99a4c90a514730666d9bdd5c36832756"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>ADC driver. </p>
<p>ADC defines for Lia board (STM32F105) 5 Channels: 1 - ADC1, Channel 13 2 - ADC2, Channel 10 3 - ADC3, Channel 11 4 - ADC4, Channel 14 5 - Temperature sensor, Channel 16</p>
<p>Default buffer depth is equal to MAX_AV_NB_SAMPLE This allows us to always have more or equal samples than the user requires</p>
<dl class="section note"><dt>Note</dt><dd>: With ChibiOS/RT 2.6.2 and STM32F105 chip the channels have to be interleaved, otherwise the current measurement is affected by the previous channel measured. Most likely bug on ChibiOS ADC driver for this particular chip.</dd></dl>
<p>For 5 actual channels we have to define (DUMMY stants for 1 dummy channel): CH1 + DUMMY + CH2 + DUMMY + CH3 + DUMMY + CH4 + DUMMY + CH_TEMP = 9 channels Then only every second channel is really read. Might be fixed in next version of ChibiOS</p>
<p>V_ref is 3.3V, ADC has 12bit or 16bit resolution. </p>

<p class="definition">Definition in file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a6e829897b1929e18c1413dd484408d4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e829897b1929e18c1413dd484408d4a">&#9670;&nbsp;</a></span>ADC_BUF_DEPTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADC_BUF_DEPTH&#160;&#160;&#160;(<a class="el" href="adc_8h.html#a66ebc63de71cc36b02ef080d9e990bac">MAX_AV_NB_SAMPLE</a>/2)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00138">138</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

</div>
</div>
<a id="a795571e675fa978442745d27f0ba2b2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a795571e675fa978442745d27f0ba2b2a">&#9670;&nbsp;</a></span>ADC_SAMPLE_RATE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADC_SAMPLE_RATE&#160;&#160;&#160;ADC_SAMPLE_480</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>#endif </p>

<p class="definition">Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00076">76</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

</div>
</div>
<a id="a2934d6c02a6319444fb3e892c72cb8f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2934d6c02a6319444fb3e892c72cb8f6">&#9670;&nbsp;</a></span>USE_AD1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USE_AD1&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00064">64</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a26596acde147dd47078caaeefd0b502d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26596acde147dd47078caaeefd0b502d">&#9670;&nbsp;</a></span>adc1callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adc1callback </td>
          <td>(</td>
          <td class="paramtype">ADCDriver *&#160;</td>
          <td class="paramname"><em>adcp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adc1 callback. </p>
<p>Callback, fired after half of the buffer is filled (i.e. half of the samples is collected). Since we are assuming continuous ADC conversion, the ADC state is never equal to ADC_COMPLETE.</p>
<dl class="section note"><dt>Note</dt><dd>Averaging is done when the modules ask for ADC values </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">adcp</td><td>pointer to a <code>ADCDriver</code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer</td><td>pointer to a <code>buffer</code> with samples </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>number of samples </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00243">243</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p class="reference">References <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00144">adc1_buffers</a>, <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00146">adc1_samples_tmp</a>, <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00145">adc1_sum_tmp</a>, <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00138">ADC_BUF_DEPTH</a>, <a class="el" href="chibios_2mcu__periph_2adc__arch_8h_source.html#l00093">ADC_NUM_CHANNELS</a>, <a class="el" href="adc_8h_source.html#l00057">adc_buf::av_nb_sample</a>, and <a class="el" href="adc_8h_source.html#l00054">adc_buf::sum</a>.</p>

<p class="reference">Referenced by <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00332">adc_init()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="chibios_2mcu__periph_2adc__arch_8c_a26596acde147dd47078caaeefd0b502d_icgraph.png" border="0" usemap="#achibios_2mcu__periph_2adc__arch_8c_a26596acde147dd47078caaeefd0b502d_icgraph" alt=""/></div>
<map name="achibios_2mcu__periph_2adc__arch_8c_a26596acde147dd47078caaeefd0b502d_icgraph" id="achibios_2mcu__periph_2adc__arch_8c_a26596acde147dd47078caaeefd0b502d_icgraph">
<area shape="rect" title="Adc1 callback." alt="" coords="487,31,593,57"/>
<area shape="rect" href="chibios_2mcu__periph_2adc__arch_8c.html#a2b815e6730e8723a6d1d06d9ef8f31c0" title="Adc init." alt="" coords="365,31,439,57"/>
<area shape="rect" href="group__mcu__periph.html#ga9af744358ff4b1e3e33d7dd170862f9b" title="Microcontroller peripherals initialization." alt="" coords="239,31,317,57"/>
<area shape="rect" href="uart__tunnel_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="122,5,177,32"/>
<area shape="rect" href="demo__ahrs__actuators_8c.html#afaa8374e20b79aaf7cfcea5ad9467ab1" title=" " alt="" coords="108,56,191,83"/>
<area shape="rect" href="demo__ahrs__actuators_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,56,60,83"/>
</map>
</div>

</div>
</div>
<a id="a289883844d6749adab1cee5aabe41824"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a289883844d6749adab1cee5aabe41824">&#9670;&nbsp;</a></span>adc_buf_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adc_buf_channel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>adc_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="adc_8h.html#structadc__buf">adc_buf</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>av_nb_sample</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Link between ChibiOS ADC drivers and Paparazzi adc_buffers. </p>
<pre class="fragment">Registers a buffer to be used to store the specified converted channel
Usage:
</pre> <div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code" href="adc_8h.html#structadc__buf">adc_buf</a> channel_buf;</div>
<div class="line"><a class="code" href="chibios_2mcu__periph_2adc__arch_8c.html#a289883844d6749adab1cee5aabe41824">adc_buf_channel</a>(1, &amp;channel_buf, 12);</div>
<div class="ttc" id="aadc_8h_html_structadc__buf"><div class="ttname"><a href="adc_8h.html#structadc__buf">adc_buf</a></div><div class="ttdoc">Generic interface for all ADC hardware drivers, independent from microcontroller architecture.</div><div class="ttdef"><b>Definition:</b> <a href="adc_8h_source.html#l00053">adc.h:53</a></div></div>
<div class="ttc" id="achibios_2mcu__periph_2adc__arch_8c_html_a289883844d6749adab1cee5aabe41824"><div class="ttname"><a href="chibios_2mcu__periph_2adc__arch_8c.html#a289883844d6749adab1cee5aabe41824">adc_buf_channel</a></div><div class="ttdeci">void adc_buf_channel(uint8_t adc_channel, struct adc_buf *s, uint8_t av_nb_sample)</div><div class="ttdoc">Link between ChibiOS ADC drivers and Paparazzi adc_buffers.</div><div class="ttdef"><b>Definition:</b> <a href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00312">adc_arch.c:312</a></div></div>
</div><!-- fragment --><p> Registers channel_buf as buffer for ADC channel 1, with max index 12 (12 samples). </p>

<p class="definition">Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00312">312</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p class="reference">References <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00144">adc1_buffers</a>, <a class="el" href="chibios_2mcu__periph_2adc__arch_8h_source.html#l00093">ADC_NUM_CHANNELS</a>, <a class="el" href="adc_8h_source.html#l00040">MAX_AV_NB_SAMPLE</a>, and <a class="el" href="light__scheduler_8c_source.html#l00033">s</a>.</p>

<p class="reference">Referenced by <a class="el" href="adc__generic_8c_source.html#l00077">adc_generic_init()</a>, <a class="el" href="airspeed__adc_8c_source.html#l00058">airspeed_adc_init()</a>, <a class="el" href="aoa__adc_8c_source.html#l00067">aoa_adc_init()</a>, <a class="el" href="electrical_8c_source.html#l00100">electrical_init()</a>, <a class="el" href="glide__wing__lock_8c_source.html#l00058">glide_wing_lock_init()</a>, <a class="el" href="humid__hih_8c_source.html#l00053">humid_hih_init()</a>, <a class="el" href="light__solar_8c_source.html#l00054">light_solar_init()</a>, <a class="el" href="light__temt_8c_source.html#l00049">light_temt_init()</a>, <a class="el" href="mf__ptu_8c_source.html#l00076">mf_ptu_init()</a>, <a class="el" href="sonar__adc_8c_source.html#l00056">sonar_adc_init()</a>, <a class="el" href="temp__adc_8c_source.html#l00129">temp_adc_init()</a>, and <a class="el" href="temp__tcouple__adc_8c_source.html#l00056">temp_tcouple_adc_init()</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="chibios_2mcu__periph_2adc__arch_8c_a289883844d6749adab1cee5aabe41824_icgraph.png" border="0" usemap="#achibios_2mcu__periph_2adc__arch_8c_a289883844d6749adab1cee5aabe41824_icgraph" alt=""/></div>
<map name="achibios_2mcu__periph_2adc__arch_8c_a289883844d6749adab1cee5aabe41824_icgraph" id="achibios_2mcu__periph_2adc__arch_8c_a289883844d6749adab1cee5aabe41824_icgraph">
<area shape="rect" title="Link between ChibiOS ADC drivers and Paparazzi adc_buffers." alt="" coords="520,284,651,311"/>
<area shape="rect" href="adc__generic_8c.html#a5d3cd37fdd77f995b25ed0837831e829" title=" " alt="" coords="323,5,451,32"/>
<area shape="rect" href="airspeed__adc_8c.html#afa4a95f4df116ecb7c849a98d941d24d" title=" " alt="" coords="319,56,455,83"/>
<area shape="rect" href="aoa__adc_8c.html#a32183c1b867389ea1b510c6a9bb6bb52" title=" " alt="" coords="335,107,439,133"/>
<area shape="rect" href="electrical_8c.html#ac5e9a56281268bdf6ddec2143b25f16a" title=" " alt="" coords="332,157,443,184"/>
<area shape="rect" href="glide__wing__lock_8c.html#a4bc143fe844932b1a873e9d6b9ed5009" title=" " alt="" coords="310,208,465,235"/>
<area shape="rect" href="humid__hih_8c.html#acb068afb2e3c2f0e3c6c1a7c3abeaddf" title=" " alt="" coords="328,259,447,285"/>
<area shape="rect" href="light__solar_8c.html#ac0e039b9f8ad2272b10b4129733d1114" title=" " alt="" coords="328,309,447,336"/>
<area shape="rect" href="light__temt_8c.html#a0cdfdd43940fde9fe395ea50cbacd148" title=" " alt="" coords="329,360,446,387"/>
<area shape="rect" href="mf__ptu_8c.html#a0f4e02c4cf993d86c38de1bebc67fcd5" title="Data acquisition module for Meteo France PTU board." alt="" coords="339,411,435,437"/>
<area shape="rect" href="sonar__adc_8c.html#a466b5be82e90d99245cf4be834f64c98" title=" " alt="" coords="329,461,445,488"/>
<area shape="rect" href="temp__adc_8c.html#a266db1bf5ea82dcb94e97eb562c18473" title="Temperature ADC initialize channels." alt="" coords="330,512,445,539"/>
<area shape="rect" href="temp__tcouple__adc_8c.html#ad9927446cc531cf79cbd60506e2b715c" title=" " alt="" coords="303,563,472,589"/>
<area shape="rect" href="main__recovery_8c.html#ad041c0b7f5e48f092f923c5e0580577b" title=" " alt="" coords="108,157,255,184"/>
<area shape="rect" href="main__chibios_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function." alt="" coords="5,157,60,184"/>
</map>
</div>

</div>
</div>
<a id="aba229c19557de0c492527630ad132f6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba229c19557de0c492527630ad132f6d">&#9670;&nbsp;</a></span>adc_configure()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void adc_configure </td>
          <td>(</td>
          <td class="paramtype">ADCConversionGroup *&#160;</td>
          <td class="paramname"><em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>num_channels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>channels</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vl53l1__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>sample_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">adccallback_t&#160;</td>
          <td class="paramname"><em>end_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">adcerrorcallback_t&#160;</td>
          <td class="paramname"><em>error_cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Configure the ADC conversion group depending on the architecture. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cfg</td><td>The configuration to be set </td></tr>
    <tr><td class="paramname">num_channels</td><td>The number of channels in the ADC </td></tr>
    <tr><td class="paramname">channels</td><td>The channel mapping to real channels </td></tr>
    <tr><td class="paramname">sample_rate</td><td>The sample rate for all channels </td></tr>
    <tr><td class="paramname">end_cb</td><td>The callback function at the end of conversion </td></tr>
    <tr><td class="paramname">error_cb</td><td>The callback function whenever an error occurs </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00175">175</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p class="reference">References <a class="el" href="tlsf__malloc__arch_8c_source.html#l00071">error_cb</a>.</p>

<p class="reference">Referenced by <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00332">adc_init()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="chibios_2mcu__periph_2adc__arch_8c_aba229c19557de0c492527630ad132f6d_icgraph.png" border="0" usemap="#achibios_2mcu__periph_2adc__arch_8c_aba229c19557de0c492527630ad132f6d_icgraph" alt=""/></div>
<map name="achibios_2mcu__periph_2adc__arch_8c_aba229c19557de0c492527630ad132f6d_icgraph" id="achibios_2mcu__periph_2adc__arch_8c_aba229c19557de0c492527630ad132f6d_icgraph">
<area shape="rect" title="Configure the ADC conversion group depending on the architecture." alt="" coords="487,31,599,57"/>
<area shape="rect" href="chibios_2mcu__periph_2adc__arch_8c.html#a2b815e6730e8723a6d1d06d9ef8f31c0" title="Adc init." alt="" coords="365,31,439,57"/>
<area shape="rect" href="group__mcu__periph.html#ga9af744358ff4b1e3e33d7dd170862f9b" title="Microcontroller peripherals initialization." alt="" coords="239,31,317,57"/>
<area shape="rect" href="uart__tunnel_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="122,5,177,32"/>
<area shape="rect" href="demo__ahrs__actuators_8c.html#afaa8374e20b79aaf7cfcea5ad9467ab1" title=" " alt="" coords="108,56,191,83"/>
<area shape="rect" href="demo__ahrs__actuators_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,56,60,83"/>
</map>
</div>

</div>
</div>
<a id="a2b815e6730e8723a6d1d06d9ef8f31c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b815e6730e8723a6d1d06d9ef8f31c0">&#9670;&nbsp;</a></span>adc_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adc_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adc init. </p>
<p>Starts conversions.</p>
<p>Initialize ADC drivers, buffers and start conversion in the background </p>

<p class="definition">Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00332">332</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p class="reference">References <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00143">adc1_group</a>, <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00243">adc1callback()</a>, <a class="el" href="cjmcu_8h_source.html#l00065">ADC_1_GPIO_PIN</a>, <a class="el" href="cjmcu_8h_source.html#l00064">ADC_1_GPIO_PORT</a>, <a class="el" href="crazybee__f4__1_80_8h_source.html#l00216">ADC_2_GPIO_PIN</a>, <a class="el" href="crazybee__f4__1_80_8h_source.html#l00215">ADC_2_GPIO_PORT</a>, <a class="el" href="lisa__l__1_80_8h_source.html#l00151">ADC_3_GPIO_PIN</a>, <a class="el" href="lisa__l__1_80_8h_source.html#l00150">ADC_3_GPIO_PORT</a>, <a class="el" href="apogee_2chibios_2v1_80_2board_8h_source.html#l00192">ADC_4_GPIO_PIN</a>, <a class="el" href="apogee_2chibios_2v1_80_2board_8h_source.html#l00191">ADC_4_GPIO_PORT</a>, <a class="el" href="lia_2chibios_2v1_81_2board_8h_source.html#l00288">ADC_5_GPIO_PIN</a>, <a class="el" href="lia_2chibios_2v1_81_2board_8h_source.html#l00287">ADC_5_GPIO_PORT</a>, <a class="el" href="chimera_8h_source.html#l00191">ADC_7_GPIO_PIN</a>, <a class="el" href="chimera_8h_source.html#l00190">ADC_7_GPIO_PORT</a>, <a class="el" href="nucleo144__f767zi_8h_source.html#l00135">ADC_9_GPIO_PIN</a>, <a class="el" href="nucleo144__f767zi_8h_source.html#l00134">ADC_9_GPIO_PORT</a>, <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00138">ADC_BUF_DEPTH</a>, <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00081">adc_channel_map</a>, <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00175">adc_configure()</a>, <a class="el" href="chibios_2mcu__periph_2adc__arch_8h_source.html#l00093">ADC_NUM_CHANNELS</a>, <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00076">ADC_SAMPLE_RATE</a>, <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00301">adcerrorcallback()</a>, <a class="el" href="chibios_2mcu__periph_2gpio__arch_8c_source.html#l00086">gpio_setup_pin_analog()</a>, and <a class="el" href="ins__vectornav_8c.html#aa01d3425df2eb0f33ced38c9d8fa8f05">PRINT_CONFIG_MSG()</a>.</p>

<p class="reference">Referenced by <a class="el" href="mcu_8c_source.html#l00097">mcu_init()</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="chibios_2mcu__periph_2adc__arch_8c_a2b815e6730e8723a6d1d06d9ef8f31c0_cgraph.png" border="0" usemap="#achibios_2mcu__periph_2adc__arch_8c_a2b815e6730e8723a6d1d06d9ef8f31c0_cgraph" alt=""/></div>
<map name="achibios_2mcu__periph_2adc__arch_8c_a2b815e6730e8723a6d1d06d9ef8f31c0_cgraph" id="achibios_2mcu__periph_2adc__arch_8c_a2b815e6730e8723a6d1d06d9ef8f31c0_cgraph">
<area shape="rect" title="Adc init." alt="" coords="5,107,79,133"/>
<area shape="rect" href="chibios_2mcu__periph_2adc__arch_8c.html#a26596acde147dd47078caaeefd0b502d" title="Adc1 callback." alt="" coords="159,5,265,32"/>
<area shape="rect" href="chibios_2mcu__periph_2adc__arch_8c.html#aba229c19557de0c492527630ad132f6d" title="Configure the ADC conversion group depending on the architecture." alt="" coords="156,56,268,83"/>
<area shape="rect" href="chibios_2mcu__periph_2adc__arch_8c.html#ab33213b168f1b881ddc092b70d45e130" title="Adc error callback." alt="" coords="147,107,277,133"/>
<area shape="rect" href="chibios_2mcu__periph_2gpio__arch_8c.html#ae9cae0077ed50d293b5288fe4c15bbb6" title="Setup a gpio for analog use." alt="" coords="127,157,297,184"/>
<area shape="rect" href="ins__vectornav_8c.html#aa01d3425df2eb0f33ced38c9d8fa8f05" title=" " alt="" coords="134,208,290,235"/>
</map>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="chibios_2mcu__periph_2adc__arch_8c_a2b815e6730e8723a6d1d06d9ef8f31c0_icgraph.png" border="0" usemap="#achibios_2mcu__periph_2adc__arch_8c_a2b815e6730e8723a6d1d06d9ef8f31c0_icgraph" alt=""/></div>
<map name="achibios_2mcu__periph_2adc__arch_8c_a2b815e6730e8723a6d1d06d9ef8f31c0_icgraph" id="achibios_2mcu__periph_2adc__arch_8c_a2b815e6730e8723a6d1d06d9ef8f31c0_icgraph">
<area shape="rect" title="Adc init." alt="" coords="365,31,439,57"/>
<area shape="rect" href="group__mcu__periph.html#ga9af744358ff4b1e3e33d7dd170862f9b" title="Microcontroller peripherals initialization." alt="" coords="239,31,317,57"/>
<area shape="rect" href="uart__tunnel_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="122,5,177,32"/>
<area shape="rect" href="demo__ahrs__actuators_8c.html#afaa8374e20b79aaf7cfcea5ad9467ab1" title=" " alt="" coords="108,56,191,83"/>
<area shape="rect" href="demo__ahrs__actuators_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,56,60,83"/>
</map>
</div>

</div>
</div>
<a id="ab33213b168f1b881ddc092b70d45e130"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab33213b168f1b881ddc092b70d45e130">&#9670;&nbsp;</a></span>adcerrorcallback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void adcerrorcallback </td>
          <td>(</td>
          <td class="paramtype">ADCDriver *&#160;</td>
          <td class="paramname"><em>adcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">adcerror_t&#160;</td>
          <td class="paramname"><em>err</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adc error callback. </p>
<p>Fired if DMA error happens or ADC overflows </p>

<p class="definition">Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00301">301</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p class="reference">References <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00132">adc_error_flag</a>, and <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00133">adcp_err</a>.</p>

<p class="reference">Referenced by <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00332">adc_init()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="chibios_2mcu__periph_2adc__arch_8c_ab33213b168f1b881ddc092b70d45e130_icgraph.png" border="0" usemap="#achibios_2mcu__periph_2adc__arch_8c_ab33213b168f1b881ddc092b70d45e130_icgraph" alt=""/></div>
<map name="achibios_2mcu__periph_2adc__arch_8c_ab33213b168f1b881ddc092b70d45e130_icgraph" id="achibios_2mcu__periph_2adc__arch_8c_ab33213b168f1b881ddc092b70d45e130_icgraph">
<area shape="rect" title="Adc error callback." alt="" coords="487,31,617,57"/>
<area shape="rect" href="chibios_2mcu__periph_2adc__arch_8c.html#a2b815e6730e8723a6d1d06d9ef8f31c0" title="Adc init." alt="" coords="365,31,439,57"/>
<area shape="rect" href="group__mcu__periph.html#ga9af744358ff4b1e3e33d7dd170862f9b" title="Microcontroller peripherals initialization." alt="" coords="239,31,317,57"/>
<area shape="rect" href="uart__tunnel_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="122,5,177,32"/>
<area shape="rect" href="demo__ahrs__actuators_8c.html#afaa8374e20b79aaf7cfcea5ad9467ab1" title=" " alt="" coords="108,56,191,83"/>
<area shape="rect" href="demo__ahrs__actuators_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,56,60,83"/>
</map>
</div>

</div>
</div>
<a id="a297953e2cc58d9c8fef10e6587f47d24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a297953e2cc58d9c8fef10e6587f47d24">&#9670;&nbsp;</a></span>IN_DMA_SECTION()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static IN_DMA_SECTION </td>
          <td>(</td>
          <td class="paramtype">adcsample_t&#160;</td>
          <td class="paramname"><em>adc_samples</em>[ADC_NUM_CHANNELS *MAX_AV_NB_SAMPLE]</td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a235d7be89fd1bddc533d5cb64bf0a839"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a235d7be89fd1bddc533d5cb64bf0a839">&#9670;&nbsp;</a></span>adc1_buffers</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="adc_8h.html#structadc__buf">adc_buf</a>* adc1_buffers[<a class="el" href="chibios_2mcu__periph_2adc__arch_8h.html#ada9f09bbee2e15c2069f4c25ec74bed8">ADC_NUM_CHANNELS</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00144">144</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00243">adc1callback()</a>, <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00312">adc_buf_channel()</a>, and <a class="el" href="stm32_2mcu__periph_2adc__arch_8c_source.html#l00231">adc_init()</a>.</p>

</div>
</div>
<a id="abd4c780c10c34ab0f6a309123cc0bcff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd4c780c10c34ab0f6a309123cc0bcff">&#9670;&nbsp;</a></span>adc1_group</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ADCConversionGroup adc1_group</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00143">143</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00332">adc_init()</a>.</p>

</div>
</div>
<a id="a99a4c90a514730666d9bdd5c36832756"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99a4c90a514730666d9bdd5c36832756">&#9670;&nbsp;</a></span>adc1_samples_tmp</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> adc1_samples_tmp[<a class="el" href="chibios_2mcu__periph_2adc__arch_8h.html#ada9f09bbee2e15c2069f4c25ec74bed8">ADC_NUM_CHANNELS</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00146">146</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00243">adc1callback()</a>.</p>

</div>
</div>
<a id="a48348066f5ca0fe6ddf05e233559e513"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48348066f5ca0fe6ddf05e233559e513">&#9670;&nbsp;</a></span>adc1_sum_tmp</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vl53l1__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> adc1_sum_tmp[<a class="el" href="chibios_2mcu__periph_2adc__arch_8h.html#ada9f09bbee2e15c2069f4c25ec74bed8">ADC_NUM_CHANNELS</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00145">145</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00243">adc1callback()</a>.</p>

</div>
</div>
<a id="acee546d2b3b7908820ea25216782402b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acee546d2b3b7908820ea25216782402b">&#9670;&nbsp;</a></span>adc_channel_map</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> adc_channel_map[<a class="el" href="chibios_2mcu__periph_2adc__arch_8h.html#ada9f09bbee2e15c2069f4c25ec74bed8">ADC_NUM_CHANNELS</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00081">81</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00332">adc_init()</a>.</p>

</div>
</div>
<a id="afd39363b0bc5b73c6cb4b0d0cc484d90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd39363b0bc5b73c6cb4b0d0cc484d90">&#9670;&nbsp;</a></span>adc_error_flag</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> adc_error_flag = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00132">132</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00301">adcerrorcallback()</a>.</p>

</div>
</div>
<a id="ae518ea232632d8202116d5981e6c7be8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae518ea232632d8202116d5981e6c7be8">&#9670;&nbsp;</a></span>adcp_err</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ADCDriver* adcp_err = NULL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00133">133</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00301">adcerrorcallback()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_01fcd3835fb4e7d9331b722d86291b65.html">sw</a></li><li class="navelem"><a class="el" href="dir_5e9153041680afc3c016fd52fa730b56.html">airborne</a></li><li class="navelem"><a class="el" href="dir_fc6475eb39ea0144fb6697b809fd11a9.html">arch</a></li><li class="navelem"><a class="el" href="dir_975986b9e0eb299e77243bf822f828ce.html">chibios</a></li><li class="navelem"><a class="el" href="dir_b82140776176b28f52d7ab660bc0e8ab.html">mcu_periph</a></li><li class="navelem"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html">adc_arch.c</a></li>
    <li class="footer">Generated on Mon Feb 6 2023 21:00:26 for Paparazzi UAS by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
