<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Paparazzi UAS: sw/airborne/modules/ctrl/optical_flow_landing.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="penguin_icon.png"/></td>
  <td id="projectalign">
   <div id="projectname">Paparazzi UAS<span id="projectnumber">&#160;v7.0_unstable</span>
   </div>
   <div id="projectbrief">Paparazzi is a free software Unmanned Aircraft System.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('optical__flow__landing_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">optical_flow_landing.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This module implements optical flow landings in which the divergence is kept constant.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;std.h&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for optical_flow_landing.h:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="optical__flow__landing_8h__incl.png" border="0" usemap="#asw_2airborne_2modules_2ctrl_2optical__flow__landing_8h" alt=""/></div>
<map name="asw_2airborne_2modules_2ctrl_2optical__flow__landing_8h" id="asw_2airborne_2modules_2ctrl_2optical__flow__landing_8h">
<area shape="rect" title="This module implements optical flow landings in which the divergence is kept constant." alt="" coords="5,5,201,45"/>
<area shape="rect" title=" " alt="" coords="76,93,131,119"/>
<area shape="poly" title=" " alt="" coords="106,46,106,79,101,79,101,46"/>
</map>
</div>
</div><div class="textblock"><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> This graph shows which files directly or indirectly include this file:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="optical__flow__landing_8h__dep__incl.png" border="0" usemap="#asw_2airborne_2modules_2ctrl_2optical__flow__landing_8hdep" alt=""/></div>
<map name="asw_2airborne_2modules_2ctrl_2optical__flow__landing_8hdep" id="asw_2airborne_2modules_2ctrl_2optical__flow__landing_8hdep">
<area shape="rect" title="This module implements optical flow landings in which the divergence is kept constant." alt="" coords="5,5,201,45"/>
<area shape="rect" href="optical__flow__landing_8c.html" title="This module implements optical flow landings in which the divergence is kept constant." alt="" coords="6,93,201,133"/>
<area shape="poly" title=" " alt="" coords="106,59,106,93,101,93,101,59"/>
</map>
</div>
</div>
<p><a href="optical__flow__landing_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structOpticalFlowLanding" id="r_structOpticalFlowLanding"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#structOpticalFlowLanding">OpticalFlowLanding</a></td></tr>
<tr class="separator:structOpticalFlowLanding"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a02c023807d5769b9c33f47d91f858661" id="r_a02c023807d5769b9c33f47d91f858661"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#a02c023807d5769b9c33f47d91f858661">MAX_SAMPLES_LEARNING</a>&#160;&#160;&#160;25000</td></tr>
<tr class="separator:a02c023807d5769b9c33f47d91f858661"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7a0b06dc3e95e1ebf35b3da222aa6d44" id="r_a7a0b06dc3e95e1ebf35b3da222aa6d44"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#a7a0b06dc3e95e1ebf35b3da222aa6d44">optical_flow_landing_init</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>)</td></tr>
<tr class="memdesc:a7a0b06dc3e95e1ebf35b3da222aa6d44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the optical flow landing module.  <br /></td></tr>
<tr class="separator:a7a0b06dc3e95e1ebf35b3da222aa6d44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b360bd61a56cd0c066db71cfbdc37a4" id="r_a8b360bd61a56cd0c066db71cfbdc37a4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#a8b360bd61a56cd0c066db71cfbdc37a4">guidance_module_enter</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>)</td></tr>
<tr class="memdesc:a8b360bd61a56cd0c066db71cfbdc37a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Entering the module (user switched to module)  <br /></td></tr>
<tr class="separator:a8b360bd61a56cd0c066db71cfbdc37a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a930fc2d7668ebfeaf878439804b73478" id="r_a930fc2d7668ebfeaf878439804b73478"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#a930fc2d7668ebfeaf878439804b73478">guidance_module_run</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a> in_flight)</td></tr>
<tr class="memdesc:a930fc2d7668ebfeaf878439804b73478"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main guidance loop.  <br /></td></tr>
<tr class="separator:a930fc2d7668ebfeaf878439804b73478"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d19fc9e54c7d49a0f9a46df5b3fffe0" id="r_a8d19fc9e54c7d49a0f9a46df5b3fffe0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#a8d19fc9e54c7d49a0f9a46df5b3fffe0">save_texton_distribution</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>)</td></tr>
<tr class="separator:a8d19fc9e54c7d49a0f9a46df5b3fffe0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad78826a6d984bdbd53254b61cf891aa9" id="r_ad78826a6d984bdbd53254b61cf891aa9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#ad78826a6d984bdbd53254b61cf891aa9">load_texton_distribution</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>)</td></tr>
<tr class="separator:ad78826a6d984bdbd53254b61cf891aa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa43d0e532ee6dcbd294983a47ff32daa" id="r_aa43d0e532ee6dcbd294983a47ff32daa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#aa43d0e532ee6dcbd294983a47ff32daa">fit_linear_model_OF</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">targets</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> **<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">samples</a>, <a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="el" href="trilateration_8c.html#aa6702f5ca985a5b97e1534be9d374bba">D</a>, <a class="el" href="vl53l1__types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> count, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *<a class="el" href="ins__flow_8c.html#aedd55e224683fb6ea23069c1519bca19">parameters</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *fit_error)</td></tr>
<tr class="memdesc:aa43d0e532ee6dcbd294983a47ff32daa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fit a linear model from samples to target values.  <br /></td></tr>
<tr class="separator:aa43d0e532ee6dcbd294983a47ff32daa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00d1461d54c90184f1e13db823860fd7" id="r_a00d1461d54c90184f1e13db823860fd7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#a00d1461d54c90184f1e13db823860fd7">learn_from_file</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>)</td></tr>
<tr class="separator:a00d1461d54c90184f1e13db823860fd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acad5bb8fa3647d3d2cd1b9a5c4a10257" id="r_acad5bb8fa3647d3d2cd1b9a5c4a10257"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#acad5bb8fa3647d3d2cd1b9a5c4a10257">predict_gain</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">distribution</a>)</td></tr>
<tr class="separator:acad5bb8fa3647d3d2cd1b9a5c4a10257"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0649ece855c0b0565eb24637f5dc958" id="r_ae0649ece855c0b0565eb24637f5dc958"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#ae0649ece855c0b0565eb24637f5dc958">save_weights</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>)</td></tr>
<tr class="separator:ae0649ece855c0b0565eb24637f5dc958"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7888da1664e91a579dbde5a896c9293" id="r_ad7888da1664e91a579dbde5a896c9293"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#ad7888da1664e91a579dbde5a896c9293">load_weights</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>)</td></tr>
<tr class="separator:ad7888da1664e91a579dbde5a896c9293"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00b62a35714831cf9fd5f6c04d3ec7e6" id="r_a00b62a35714831cf9fd5f6c04d3ec7e6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#a00b62a35714831cf9fd5f6c04d3ec7e6">recursive_least_squares_batch</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">targets</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> **<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">samples</a>, <a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="el" href="trilateration_8c.html#aa6702f5ca985a5b97e1534be9d374bba">D</a>, <a class="el" href="vl53l1__types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> count, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *params, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *fit_error)</td></tr>
<tr class="memdesc:a00b62a35714831cf9fd5f6c04d3ec7e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recursively fit a linear model from samples to target values - batch mode, possibly for initialization.  <br /></td></tr>
<tr class="separator:a00b62a35714831cf9fd5f6c04d3ec7e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4969951a8ac413507f16c576a7610cd6" id="r_a4969951a8ac413507f16c576a7610cd6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#a4969951a8ac413507f16c576a7610cd6">recursive_least_squares</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> <a class="el" href="target__pos_8c.html#a27620a005ca7d59f333e7c9e6a322a8b">target</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">sample</a>, <a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">length_sample</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *params)</td></tr>
<tr class="separator:a4969951a8ac413507f16c576a7610cd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad4982b2ef527a9bb63dad1833b51849b" id="r_ad4982b2ef527a9bb63dad1833b51849b"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="optical__flow__landing_8h.html#structOpticalFlowLanding">OpticalFlowLanding</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#ad4982b2ef527a9bb63dad1833b51849b">of_landing_ctrl</a></td></tr>
<tr class="separator:ad4982b2ef527a9bb63dad1833b51849b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This module implements optical flow landings in which the divergence is kept constant. </p>
<p>When using a fixed gain for control, the covariance between thrust and divergence is tracked, so that the drone knows when it has arrived close to the landing surface. Then, a final landing procedure is triggered. It can also be set to adaptive gain control, where the goal is to continuously gauge the distance to the landing surface. In this mode, the drone will oscillate all the way down to the surface.</p>
<p>de Croon, G.C.H.E. (2016). Monocular distance estimation with optical flow maneuvers and efference copies: a stability-based strategy. Bioinspiration &amp; biomimetics, 11(1), 016004. <a href="http://iopscience.iop.org/article/10.1088/1748-3190/11/1/016004">http://iopscience.iop.org/article/10.1088/1748-3190/11/1/016004</a></p>
<p>Based on the above theory, we have also developed a new strategy for landing that consists of two phases: (1) while hovering, the drone determines the optimal gain by increasing the gain until oscillation (2) the drone starts landing while exponentially decreasing the gain over time</p>
<p>This strategy leads to smooth, high-performance constant divergence landings, as explained in the article: H.W. Ho, G.C.H.E. de Croon, E. van Kampen, Q.P. Chu, and M. Mulder (submitted) Adaptive Control Strategy for Constant Optical Flow Divergence Landing, <a href="https://arxiv.org/abs/1609.06767">https://arxiv.org/abs/1609.06767</a></p>
<p>The module also contains code for learning to map the visual appearance of the landing surface with self-supervised learning (SSL) to the corresponding control gains. This leads to smooth optical flow landings where the "height" expressed in the control gain is known and can be used to shut down the motors. This has been published in the following paper:</p>
<p>de Croon, Guido CHE, Christophe De Wagter, and Tobias Seidl. "Enhancing optical-flow-based control
by learning visual appearance cues for flying robots." Nature Machine Intelligence 3.1 (2021): 33-41.</p>
<p>Finally, horizontal flow control has been added, so that the drone can hover without optitrack. In fact, this module also formed the basis for the experiments in which the attitude is estimated with only optical flow and gyro measurements (without accelerometers), published in Nature:</p>
<p>De Croon, G.C.H.E., Dupeyroux, J.J., De Wagter, C., Chatterjee, A., Olejnik, D. A., &amp; Ruffier, F. (2022). Accommodating unobservability to control flight attitude with optic flow. Nature, 610(7932), 485-490. </p>

<p class="definition">Definition in file <a class="el" href="optical__flow__landing_8h_source.html">optical_flow_landing.h</a>.</p>
</div><hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structOpticalFlowLanding" id="structOpticalFlowLanding"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structOpticalFlowLanding">&#9670;&#160;</a></span>OpticalFlowLanding</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct OpticalFlowLanding</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="optical__flow__landing_8h_source.html#l00052">52</a> of file <a class="el" href="optical__flow__landing_8h_source.html">optical_flow_landing.h</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="ab0ad1614dd323308e15bc8acc2c838d0" name="ab0ad1614dd323308e15bc8acc2c838d0"></a><a class="el" href="vl53l1__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></td>
<td class="fieldname">
active_motion</td>
<td class="fielddoc">
Method for actively inducing motion. </td></tr>
<tr><td class="fieldtype">
<a id="adf12a6652830210bcc598c69f4364d1c" name="adf12a6652830210bcc598c69f4364d1c"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
agl</td>
<td class="fielddoc">
agl = height from sonar (only used when using "fake" divergence) </td></tr>
<tr><td class="fieldtype">
<a id="aca9b6b6640bfc11e274a0416332de2ca" name="aca9b6b6640bfc11e274a0416332de2ca"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
agl_lp</td>
<td class="fielddoc">
low-pass version of agl </td></tr>
<tr><td class="fieldtype">
<a id="afe0c50435ac8df40f945d06f9d53fa19" name="afe0c50435ac8df40f945d06f9d53fa19"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
close_to_edge</td>
<td class="fielddoc">
if abs(cov_div - reference cov_div) &lt; close_to_edge, then texton distributions and gains are stored for learning </td></tr>
<tr><td class="fieldtype">
<a id="ad7b0a44e2f0e60c1acd343675fda81d0" name="ad7b0a44e2f0e60c1acd343675fda81d0"></a><a class="el" href="vl53l1__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></td>
<td class="fieldname">
CONTROL_METHOD</td>
<td class="fielddoc">
type of divergence control: 0 = fixed gain, 1 = adaptive gain, 2 = exponential time landing control. 3 = learning control </td></tr>
<tr><td class="fieldtype">
<a id="a319e0db7767c18d86e098709b3f1a26e" name="a319e0db7767c18d86e098709b3f1a26e"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
cov_limit</td>
<td class="fielddoc">
for fixed gain control, what is the cov limit triggering the landing </td></tr>
<tr><td class="fieldtype">
<a id="add38475761383ba13bd9d1216cb9c878" name="add38475761383ba13bd9d1216cb9c878"></a><a class="el" href="vl53l1__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></td>
<td class="fieldname">
COV_METHOD</td>
<td class="fielddoc">
method to calculate the covariance: between thrust and div (0) or div and div past (1) </td></tr>
<tr><td class="fieldtype">
<a id="a2fcfe83147a3d61d26d8ebdd1b638360" name="a2fcfe83147a3d61d26d8ebdd1b638360"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
cov_set_point</td>
<td class="fielddoc">
for adaptive gain control, setpoint of the covariance (oscillations) </td></tr>
<tr><td class="fieldtype">
<a id="aa374b55e9ee19912957b6104f2cc3606" name="aa374b55e9ee19912957b6104f2cc3606"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
d_err</td>
<td class="fielddoc">
difference of error for the D-gain </td></tr>
<tr><td class="fieldtype">
<a id="adeda0af8f5b871d4a7c215e864e80df8" name="adeda0af8f5b871d4a7c215e864e80df8"></a><a class="el" href="vl53l1__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></td>
<td class="fieldname">
delay_steps</td>
<td class="fielddoc">
number of delay steps for div past </td></tr>
<tr><td class="fieldtype">
<a id="a30f4ee1bc41fd2b10efdae515b6404c0" name="a30f4ee1bc41fd2b10efdae515b6404c0"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
dgain</td>
<td class="fielddoc">
D-gain for constant divergence control. </td></tr>
<tr><td class="fieldtype">
<a id="a05f97bef53de779bbecbe98d5b33762f" name="a05f97bef53de779bbecbe98d5b33762f"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
dgain_adaptive</td>
<td class="fielddoc">
D-gain for adaptive gain control. </td></tr>
<tr><td class="fieldtype">
<a id="aa687bc83e2cb282b099fa59f6589c11f" name="aa687bc83e2cb282b099fa59f6589c11f"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
divergence</td>
<td class="fielddoc">
Divergence estimate. </td></tr>
<tr><td class="fieldtype">
<a id="a74a182d3b575454ab7b7b3aa4c854044" name="a74a182d3b575454ab7b7b3aa4c854044"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
divergence_setpoint</td>
<td class="fielddoc">
setpoint for constant divergence approach </td></tr>
<tr><td class="fieldtype">
<a id="a82fa8cf603952d328b8238c966c8cb00" name="a82fa8cf603952d328b8238c966c8cb00"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a></td>
<td class="fieldname">
elc_oscillate</td>
<td class="fielddoc">
Whether or not to oscillate at beginning of elc to find optimum gain. </td></tr>
<tr><td class="fieldtype">
<a id="a3f06c4c9892deedab0591018289df4db" name="a3f06c4c9892deedab0591018289df4db"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
front_div_threshold</td>
<td class="fielddoc">
Threshold when the front div gets above this value, it will command a horizontal stop. </td></tr>
<tr><td class="fieldtype">
<a id="a0aa113a5ef979045542fe39aeb226e2c" name="a0aa113a5ef979045542fe39aeb226e2c"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
igain</td>
<td class="fielddoc">
I-gain for constant divergence control. </td></tr>
<tr><td class="fieldtype">
<a id="a1ef5923b467e6b890a11c8f1e4b6f803" name="a1ef5923b467e6b890a11c8f1e4b6f803"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
igain_adaptive</td>
<td class="fielddoc">
I-gain for adaptive gain control. </td></tr>
<tr><td class="fieldtype">
<a id="ac081fa7e437c990d0fcb9fb558fd995b" name="ac081fa7e437c990d0fcb9fb558fd995b"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
igain_horizontal_factor</td>
<td class="fielddoc">
factor multiplied with the vertical I-gain for horizontal ventral-flow-based control </td></tr>
<tr><td class="fieldtype">
<a id="aab9dd479a7c936a2193feded6f65c338" name="aab9dd479a7c936a2193feded6f65c338"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">volatile</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a></td>
<td class="fieldname">
learn_gains</td>
<td class="fielddoc">
set to true if the robot needs to learn a mapping from texton distributions to the p-gain </td></tr>
<tr><td class="fieldtype">
<a id="a8f3adaae6932f9dc4ab76aeaa0d7c7e5" name="a8f3adaae6932f9dc4ab76aeaa0d7c7e5"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a></td>
<td class="fieldname">
load_weights</td>
<td class="fielddoc">
load the weights that were learned before </td></tr>
<tr><td class="fieldtype">
<a id="a9e02c45f3b8d6eb3dfa0d5b9faa50d07" name="a9e02c45f3b8d6eb3dfa0d5b9faa50d07"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
lp_const</td>
<td class="fielddoc">
low-pass value for divergence </td></tr>
<tr><td class="fieldtype">
<a id="ad77f3be71cc5503bdf992e63f156c458" name="ad77f3be71cc5503bdf992e63f156c458"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
lp_cov_div_factor</td>
<td class="fielddoc">
low-pass factor for the covariance of divergence in order to trigger the second landing phase in the exponential strategy. </td></tr>
<tr><td class="fieldtype">
<a id="ab965e1d8f00820be5fd3f2d8d52dd258" name="ab965e1d8f00820be5fd3f2d8d52dd258"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
lp_factor_prediction</td>
<td class="fielddoc">
low-pass value for the predicted P-value </td></tr>
<tr><td class="fieldtype">
<a id="ad95057af54e801ec3faec34b48c28036" name="ad95057af54e801ec3faec34b48c28036"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
nominal_thrust</td>
<td class="fielddoc">
nominal thrust around which the PID-control operates </td></tr>
<tr><td class="fieldtype">
<a id="a24b546929389bd1a2602f13d245bd917" name="a24b546929389bd1a2602f13d245bd917"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
omega_FB</td>
<td class="fielddoc">
Set point for the front-back ventral flow. </td></tr>
<tr><td class="fieldtype">
<a id="a054efbe80458f7692bfd5783e5739b8a" name="a054efbe80458f7692bfd5783e5739b8a"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
omega_LR</td>
<td class="fielddoc">
Set point for the left-right ventral flow. </td></tr>
<tr><td class="fieldtype">
<a id="af871e168e4033512419dbb66a4af0cd2" name="af871e168e4033512419dbb66a4af0cd2"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
p_land_threshold</td>
<td class="fielddoc">
if during the exponential landing the gain reaches this value, the final landing procedure is triggered </td></tr>
<tr><td class="fieldtype">
<a id="a344885f8fab2000105a17983f248e13b" name="a344885f8fab2000105a17983f248e13b"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
pgain</td>
<td class="fielddoc">
P-gain for constant divergence control (from divergence error to thrust) </td></tr>
<tr><td class="fieldtype">
<a id="a7c544e7e5e10d376e2811e2467cbfcf6" name="a7c544e7e5e10d376e2811e2467cbfcf6"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
pgain_adaptive</td>
<td class="fielddoc">
P-gain for adaptive gain control. </td></tr>
<tr><td class="fieldtype">
<a id="af8a65c20c36f8b6d43afde8543986560" name="af8a65c20c36f8b6d43afde8543986560"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
pgain_horizontal_factor</td>
<td class="fielddoc">
factor multiplied with the vertical P-gain for horizontal ventral-flow-based control </td></tr>
<tr><td class="fieldtype">
<a id="a0c62c21bab132a6784e696c9520a973e" name="a0c62c21bab132a6784e696c9520a973e"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
pitch_trim</td>
<td class="fielddoc">
Pitch trim angle in degrees. </td></tr>
<tr><td class="fieldtype">
<a id="add85c489ed8122f95aa2920eceb935a8" name="add85c489ed8122f95aa2920eceb935a8"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
previous_err</td>
<td class="fielddoc">
Previous divergence tracking error. </td></tr>
<tr><td class="fieldtype">
<a id="a54bfa82cd9bed1c6769d03663e4ea96a" name="a54bfa82cd9bed1c6769d03663e4ea96a"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
ramp_duration</td>
<td class="fielddoc">
ramp duration in seconds for when the divergence setpoint changes </td></tr>
<tr><td class="fieldtype">
<a id="a4013af57ec4cfda53770c740805e37c7" name="a4013af57ec4cfda53770c740805e37c7"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
reduction_factor_elc</td>
<td class="fielddoc">
reduction factor - after oscillation, how much to reduce the gain... </td></tr>
<tr><td class="fieldtype">
<a id="a062a8d8ee6a91712669ebd6356694a3d" name="a062a8d8ee6a91712669ebd6356694a3d"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
roll_trim</td>
<td class="fielddoc">
Roll trim angle in degrees. </td></tr>
<tr><td class="fieldtype">
<a id="a8f24e37fbb81578b03269983bae8a5f5" name="a8f24e37fbb81578b03269983bae8a5f5"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a></td>
<td class="fieldname">
snapshot</td>
<td class="fielddoc">
if true, besides storing a texton distribution, an image will also be stored (when unstable) </td></tr>
<tr><td class="fieldtype">
<a id="abb577f7f1f500baea2dcbf58f35f906c" name="abb577f7f1f500baea2dcbf58f35f906c"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
sum_err</td>
<td class="fielddoc">
integration of the error for I-gain </td></tr>
<tr><td class="fieldtype">
<a id="a88a86cb49c82bbb64dff876c4ca70257" name="a88a86cb49c82bbb64dff876c4ca70257"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
t_transition</td>
<td class="fielddoc">
how many seconds the drone has to be oscillating in order to transition to the hover phase with reduced gain </td></tr>
<tr><td class="fieldtype">
<a id="af101f8fb31a03f6276077aab5143ba71" name="af101f8fb31a03f6276077aab5143ba71"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a></td>
<td class="fieldname">
use_bias</td>
<td class="fielddoc">
if true, a bias 1.0f will be added to the feature vector (texton distribution) - this typically leads to very large weights </td></tr>
<tr><td class="fieldtype">
<a id="a61d4fee4543f010e70afb17d7d9530fa" name="a61d4fee4543f010e70afb17d7d9530fa"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
vel</td>
<td class="fielddoc">
vertical velocity as determined with sonar (only used when using "fake" divergence) </td></tr>
<tr><td class="fieldtype">
<a id="a8c38d03afbc283c39cd2154a679bd4bc" name="a8c38d03afbc283c39cd2154a679bd4bc"></a><a class="el" href="vl53l1__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></td>
<td class="fieldname">
VISION_METHOD</td>
<td class="fielddoc">
whether to use vision (1) or Optitrack / sonar (0) </td></tr>
<tr><td class="fieldtype">
<a id="af7c6460e2b21557f1ceebb1d5e0c7702" name="af7c6460e2b21557f1ceebb1d5e0c7702"></a><a class="el" href="vl53l1__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></td>
<td class="fieldname">
window_size</td>
<td class="fielddoc">
number of time steps in "window" used for getting the covariance </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a02c023807d5769b9c33f47d91f858661" name="a02c023807d5769b9c33f47d91f858661"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02c023807d5769b9c33f47d91f858661">&#9670;&#160;</a></span>MAX_SAMPLES_LEARNING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a> MAX_SAMPLES_LEARNING&#160;&#160;&#160;25000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="optical__flow__landing_8h_source.html#l00050">50</a> of file <a class="el" href="optical__flow__landing_8h_source.html">optical_flow_landing.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa43d0e532ee6dcbd294983a47ff32daa" name="aa43d0e532ee6dcbd294983a47ff32daa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa43d0e532ee6dcbd294983a47ff32daa">&#9670;&#160;</a></span>fit_linear_model_OF()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> fit_linear_model_OF </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *&#160;</td>
          <td class="paramname"><em>targets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> **&#160;</td>
          <td class="paramname"><em>samples</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>D</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vl53l1__types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *&#160;</td>
          <td class="paramname"><em>fit_error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fit a linear model from samples to target values. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">targets</td><td>The target values </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">samples</td><td>The samples / feature vectors </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">D</td><td>The dimensionality of the samples </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">count</td><td>The number of samples </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">parameters*</td><td>Parameters of the linear fit </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">fit_error*</td><td>Total error of the fit </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="optical__flow__landing_8c_source.html#l01415">1415</a> of file <a class="el" href="optical__flow__landing_8c_source.html">optical_flow_landing.c</a>.</p>

<p class="reference">References <a class="el" href="trilateration_8c_source.html#l00035">D</a>, <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="pprz__algebra__float_8h_source.html#l00638">MAKE_MATRIX_PTR</a>, <a class="el" href="pprz__simple__matrix_8h_source.html#l00046">MAT_MUL</a>, <a class="el" href="pprz__simple__matrix_8h_source.html#l00073">MAT_SUB</a>, <a class="el" href="detect__gate_8c_source.html#l00085">n_samples</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00297">of_landing_ctrl</a>, <a class="el" href="ins__flow_8c_source.html#l00249">parameters</a>, <a class="el" href="pprz__matrix__decomp__float_8c_source.html#l00167">pprz_svd_float()</a>, <a class="el" href="pprz__matrix__decomp__float_8c_source.html#l00494">pprz_svd_solve_float()</a>, and <a class="el" href="optical__flow__landing_8h_source.html#l00086">OpticalFlowLanding::use_bias</a>.</p>

<p class="reference">Referenced by <a class="el" href="optical__flow__landing_8c_source.html#l01251">learn_from_file()</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="optical__flow__landing_8h_aa43d0e532ee6dcbd294983a47ff32daa_cgraph.png" border="0" usemap="#aoptical__flow__landing_8h_aa43d0e532ee6dcbd294983a47ff32daa_cgraph" alt=""/></div>
<map name="aoptical__flow__landing_8h_aa43d0e532ee6dcbd294983a47ff32daa_cgraph" id="aoptical__flow__landing_8h_aa43d0e532ee6dcbd294983a47ff32daa_cgraph">
<area shape="rect" title="Fit a linear model from samples to target values." alt="" coords="5,55,157,80"/>
<area shape="rect" href="pprz__matrix__decomp__float_8c.html#a9ef015d22c1f50265978a23b21d13e8a" title="SVD decomposition." alt="" coords="227,29,343,55"/>
<area shape="poly" title=" " alt="" coords="157,55,212,48,213,54,158,61"/>
<area shape="rect" href="pprz__matrix__decomp__float_8c.html#a232890252a145ccc1a0dd849bf13cb67" title="SVD based linear solver." alt="" coords="205,79,364,104"/>
<area shape="poly" title=" " alt="" coords="158,74,192,78,191,83,157,79"/>
<area shape="rect" href="pprz__matrix__decomp__float_8c.html#ac7066d363876a03bf650ffdb803aa9df" title=" " alt="" coords="420,5,471,31"/>
<area shape="poly" title=" " alt="" coords="343,31,406,21,407,26,343,36"/>
<area shape="rect" href="pprz__matrix__decomp__float_8c.html#ac174129986fce93a3240504458351308" title="Some SVD decomposition utility macros and functions." alt="" coords="412,55,479,80"/>
<area shape="poly" title=" " alt="" coords="343,49,399,57,398,63,343,54"/>
</map>
</div>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="optical__flow__landing_8h_aa43d0e532ee6dcbd294983a47ff32daa_icgraph.png" border="0" usemap="#aoptical__flow__landing_8h_aa43d0e532ee6dcbd294983a47ff32daa_icgraph" alt=""/></div>
<map name="aoptical__flow__landing_8h_aa43d0e532ee6dcbd294983a47ff32daa_icgraph" id="aoptical__flow__landing_8h_aa43d0e532ee6dcbd294983a47ff32daa_icgraph">
<area shape="rect" title="Fit a linear model from samples to target values." alt="" coords="404,5,556,31"/>
<area shape="rect" href="optical__flow__landing_8c.html#a00d1461d54c90184f1e13db823860fd7" title=" " alt="" coords="236,5,356,31"/>
<area shape="poly" title=" " alt="" coords="390,21,356,21,356,15,390,15"/>
<area shape="rect" href="optical__flow__landing_8c.html#a9628e4f2b9a046bb7ff80c208ab85daa" title="Run the optical flow landing module." alt="" coords="5,5,188,31"/>
<area shape="poly" title=" " alt="" coords="222,21,188,21,188,15,222,15"/>
</map>
</div>

</div>
</div>
<a id="a8b360bd61a56cd0c066db71cfbdc37a4" name="a8b360bd61a56cd0c066db71cfbdc37a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b360bd61a56cd0c066db71cfbdc37a4">&#9670;&#160;</a></span>guidance_module_enter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> guidance_module_enter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Entering the module (user switched to module) </p>
<p>Entering the module (user switched to module) </p>

<p class="definition">Definition at line <a class="el" href="ctrl__module__innerloop__demo_8c_source.html#l00077">77</a> of file <a class="el" href="ctrl__module__innerloop__demo_8c_source.html">ctrl_module_innerloop_demo.c</a>.</p>

</div>
</div>
<a id="a930fc2d7668ebfeaf878439804b73478" name="a930fc2d7668ebfeaf878439804b73478"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a930fc2d7668ebfeaf878439804b73478">&#9670;&#160;</a></span>guidance_module_run()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> guidance_module_run </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a>&#160;</td>
          <td class="paramname"><em>in_flight</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Main guidance loop. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">in_flight</td><td>Whether we are in flight or not </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ctrl__module__innerloop__demo_8c_source.html#l00082">82</a> of file <a class="el" href="ctrl__module__innerloop__demo_8c_source.html">ctrl_module_innerloop_demo.c</a>.</p>

</div>
</div>
<a id="a00d1461d54c90184f1e13db823860fd7" name="a00d1461d54c90184f1e13db823860fd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00d1461d54c90184f1e13db823860fd7">&#9670;&#160;</a></span>learn_from_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> learn_from_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="optical__flow__landing_8c_source.html#l01251">1251</a> of file <a class="el" href="optical__flow__landing_8c_source.html">optical_flow_landing.c</a>.</p>

<p class="reference">References <a class="el" href="optical__flow__landing_8c_source.html#l01415">fit_linear_model_OF()</a>, <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00069">gains</a>, <a class="el" href="optical__flow__landing_8c_source.html#l01213">load_texton_distribution()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00271">n_read_samples</a>, <a class="el" href="textons_8c_source.html#l00122">n_textons</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00257">RECURSIVE_LEARNING</a>, <a class="el" href="optical__flow__landing_8c_source.html#l01290">recursive_least_squares_batch()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l01503">save_weights()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00067">text_dists</a>, and <a class="el" href="optical__flow__landing_8c_source.html#l00071">weights</a>.</p>

<p class="reference">Referenced by <a class="el" href="optical__flow__landing_8c_source.html#l00510">vertical_ctrl_module_run()</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="optical__flow__landing_8h_a00d1461d54c90184f1e13db823860fd7_cgraph.png" border="0" usemap="#aoptical__flow__landing_8h_a00d1461d54c90184f1e13db823860fd7_cgraph" alt=""/></div>
<map name="aoptical__flow__landing_8h_a00d1461d54c90184f1e13db823860fd7_cgraph" id="aoptical__flow__landing_8h_a00d1461d54c90184f1e13db823860fd7_cgraph">
<area shape="rect" title=" " alt="" coords="5,132,125,157"/>
<area shape="rect" href="optical__flow__landing_8c.html#a0f226b4d037a67db4a4dcd15d42ae284" title="Fit a linear model from samples to target values." alt="" coords="187,53,339,79"/>
<area shape="poly" title=" " alt="" coords="87,130,126,109,172,88,194,80,196,85,174,92,128,113,89,134"/>
<area shape="rect" href="optical__flow__landing_8c.html#ad78826a6d984bdbd53254b61cf891aa9" title=" " alt="" coords="173,103,353,128"/>
<area shape="poly" title=" " alt="" coords="125,133,164,127,164,133,126,138"/>
<area shape="rect" href="optical__flow__landing_8c.html#a00b62a35714831cf9fd5f6c04d3ec7e6" title="Recursively fit a linear model from samples to target values &#45; batch mode, possibly for initializatio..." alt="" coords="174,153,353,193"/>
<area shape="poly" title=" " alt="" coords="126,151,161,155,160,161,125,156"/>
<area shape="rect" href="optical__flow__landing_8c.html#ae0649ece855c0b0565eb24637f5dc958" title=" " alt="" coords="208,217,319,243"/>
<area shape="poly" title=" " alt="" coords="87,155,127,179,174,202,197,211,196,216,172,207,124,183,85,160"/>
<area shape="rect" href="pprz__matrix__decomp__float_8c.html#a9ef015d22c1f50265978a23b21d13e8a" title="SVD decomposition." alt="" coords="433,29,549,55"/>
<area shape="poly" title=" " alt="" coords="339,55,419,47,420,52,340,61"/>
<area shape="rect" href="pprz__matrix__decomp__float_8c.html#a232890252a145ccc1a0dd849bf13cb67" title="SVD based linear solver." alt="" coords="411,79,570,104"/>
<area shape="poly" title=" " alt="" coords="340,72,397,78,397,84,339,77"/>
<area shape="rect" href="pprz__matrix__decomp__float_8c.html#ac7066d363876a03bf650ffdb803aa9df" title=" " alt="" coords="684,5,735,31"/>
<area shape="poly" title=" " alt="" coords="548,33,670,20,671,25,549,38"/>
<area shape="rect" href="pprz__matrix__decomp__float_8c.html#ac174129986fce93a3240504458351308" title="Some SVD decomposition utility macros and functions." alt="" coords="676,55,743,80"/>
<area shape="poly" title=" " alt="" coords="549,46,663,59,662,65,548,51"/>
<area shape="rect" href="optical__flow__landing_8c.html#acad5bb8fa3647d3d2cd1b9a5c4a10257" title=" " alt="" coords="658,157,761,183"/>
<area shape="poly" title=" " alt="" coords="353,169,644,168,644,173,353,175"/>
<area shape="rect" href="optical__flow__landing_8c.html#ad19b7ab9b06ca16863dcb328b6d51272" title=" " alt="" coords="401,208,580,233"/>
<area shape="poly" title=" " alt="" coords="353,189,417,203,416,208,352,194"/>
<area shape="poly" title=" " alt="" coords="546,205,644,182,645,187,547,210"/>
<area shape="rect" href="group__math__algebra__float.html#gaf832bf776f4174d501c1e17954df907e" title="Divide a matrix by a scalar." alt="" coords="631,207,788,232"/>
<area shape="poly" title=" " alt="" coords="580,217,617,217,617,223,580,223"/>
<area shape="rect" href="group__math__algebra__float.html#ga60e53f8c14ae04aa5587f84f6eabbd86" title="Multiply a matrix by a scalar." alt="" coords="628,256,791,281"/>
<area shape="poly" title=" " alt="" coords="550,231,638,250,637,256,549,236"/>
</map>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="optical__flow__landing_8h_a00d1461d54c90184f1e13db823860fd7_icgraph.png" border="0" usemap="#aoptical__flow__landing_8h_a00d1461d54c90184f1e13db823860fd7_icgraph" alt=""/></div>
<map name="aoptical__flow__landing_8h_a00d1461d54c90184f1e13db823860fd7_icgraph" id="aoptical__flow__landing_8h_a00d1461d54c90184f1e13db823860fd7_icgraph">
<area shape="rect" title=" " alt="" coords="236,5,356,31"/>
<area shape="rect" href="optical__flow__landing_8c.html#a9628e4f2b9a046bb7ff80c208ab85daa" title="Run the optical flow landing module." alt="" coords="5,5,188,31"/>
<area shape="poly" title=" " alt="" coords="222,21,188,21,188,15,222,15"/>
</map>
</div>

</div>
</div>
<a id="ad78826a6d984bdbd53254b61cf891aa9" name="ad78826a6d984bdbd53254b61cf891aa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad78826a6d984bdbd53254b61cf891aa9">&#9670;&#160;</a></span>load_texton_distribution()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> load_texton_distribution </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="optical__flow__landing_8c_source.html#l01213">1213</a> of file <a class="el" href="optical__flow__landing_8c_source.html">optical_flow_landing.c</a>.</p>

<p class="reference">References <a class="el" href="optical__flow__landing_8c_source.html#l00070">cov_divs_log</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00269">distribution_logger</a>, <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00069">gains</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00050">MAX_SAMPLES_LEARNING</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00271">n_read_samples</a>, <a class="el" href="textons_8c_source.html#l00122">n_textons</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00068">sonar_OF</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00067">text_dists</a>, and <a class="el" href="optical__flow__landing_8c_source.html#l00264">TEXTON_DISTRIBUTION_PATH</a>.</p>

<p class="reference">Referenced by <a class="el" href="optical__flow__landing_8c_source.html#l01251">learn_from_file()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="optical__flow__landing_8h_ad78826a6d984bdbd53254b61cf891aa9_icgraph.png" border="0" usemap="#aoptical__flow__landing_8h_ad78826a6d984bdbd53254b61cf891aa9_icgraph" alt=""/></div>
<map name="aoptical__flow__landing_8h_ad78826a6d984bdbd53254b61cf891aa9_icgraph" id="aoptical__flow__landing_8h_ad78826a6d984bdbd53254b61cf891aa9_icgraph">
<area shape="rect" title=" " alt="" coords="404,5,584,31"/>
<area shape="rect" href="optical__flow__landing_8c.html#a00d1461d54c90184f1e13db823860fd7" title=" " alt="" coords="236,5,356,31"/>
<area shape="poly" title=" " alt="" coords="390,21,356,21,356,15,390,15"/>
<area shape="rect" href="optical__flow__landing_8c.html#a9628e4f2b9a046bb7ff80c208ab85daa" title="Run the optical flow landing module." alt="" coords="5,5,188,31"/>
<area shape="poly" title=" " alt="" coords="222,21,188,21,188,15,222,15"/>
</map>
</div>

</div>
</div>
<a id="ad7888da1664e91a579dbde5a896c9293" name="ad7888da1664e91a579dbde5a896c9293"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7888da1664e91a579dbde5a896c9293">&#9670;&#160;</a></span>load_weights()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> load_weights </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="optical__flow__landing_8c_source.html#l01521">1521</a> of file <a class="el" href="optical__flow__landing_8c_source.html">optical_flow_landing.c</a>.</p>

<p class="reference">References <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="textons_8c_source.html#l00122">n_textons</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00264">TEXTON_DISTRIBUTION_PATH</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00071">weights</a>, and <a class="el" href="optical__flow__landing_8c_source.html#l00270">weights_file</a>.</p>

<p class="reference">Referenced by <a class="el" href="optical__flow__landing_8c_source.html#l00510">vertical_ctrl_module_run()</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="optical__flow__landing_8h_ad7888da1664e91a579dbde5a896c9293_icgraph.png" border="0" usemap="#aoptical__flow__landing_8h_ad7888da1664e91a579dbde5a896c9293_icgraph" alt=""/></div>
<map name="aoptical__flow__landing_8h_ad7888da1664e91a579dbde5a896c9293_icgraph" id="aoptical__flow__landing_8h_ad7888da1664e91a579dbde5a896c9293_icgraph">
<area shape="rect" title=" " alt="" coords="236,5,344,31"/>
<area shape="rect" href="optical__flow__landing_8c.html#a9628e4f2b9a046bb7ff80c208ab85daa" title="Run the optical flow landing module." alt="" coords="5,5,188,31"/>
<area shape="poly" title=" " alt="" coords="222,21,188,21,188,15,222,15"/>
</map>
</div>

</div>
</div>
<a id="a7a0b06dc3e95e1ebf35b3da222aa6d44" name="a7a0b06dc3e95e1ebf35b3da222aa6d44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a0b06dc3e95e1ebf35b3da222aa6d44">&#9670;&#160;</a></span>optical_flow_landing_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> optical_flow_landing_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize the optical flow landing module. </p>

<p class="definition">Definition at line <a class="el" href="optical__flow__landing_8c_source.html#l00334">334</a> of file <a class="el" href="optical__flow__landing_8c_source.html">optical_flow_landing.c</a>.</p>

<p class="reference">References <a class="el" href="optical__flow__landing_8h_source.html#l00096">OpticalFlowLanding::active_motion</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00053">OpticalFlowLanding::agl</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00293">agl_ev</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00054">OpticalFlowLanding::agl_lp</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00085">OpticalFlowLanding::close_to_edge</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00067">OpticalFlowLanding::CONTROL_METHOD</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00069">OpticalFlowLanding::cov_limit</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00073">OpticalFlowLanding::COV_METHOD</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00068">OpticalFlowLanding::cov_set_point</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00064">OpticalFlowLanding::d_err</a>, <a class="el" href="telemetry_8h_source.html#l00066">DefaultPeriodic</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00074">OpticalFlowLanding::delay_steps</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00282">delta_setpoint</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00060">OpticalFlowLanding::dgain</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00072">OpticalFlowLanding::dgain_adaptive</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00061">OpticalFlowLanding::divergence</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00252">divergence_front</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00057">OpticalFlowLanding::divergence_setpoint</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00080">OpticalFlowLanding::elc_oscillate</a>, <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00097">OpticalFlowLanding::front_div_threshold</a>, <a class="el" href="sys__time_8h_source.html#l00138">get_sys_time_float()</a>, <a class="el" href="rotorcraft_2guidance_2guidance__v_8c_source.html#l00060">guidance_v</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00059">OpticalFlowLanding::igain</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00071">OpticalFlowLanding::igain_adaptive</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00091">OpticalFlowLanding::igain_horizontal_factor</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00055">OpticalFlowLanding::lp_const</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00077">OpticalFlowLanding::lp_cov_div_factor</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00234">lp_divergence_front</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00088">OpticalFlowLanding::lp_factor_prediction</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00232">lp_flow_x</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00233">lp_flow_y</a>, <a class="el" href="paparazzi_8h_source.html#l00008">MAX_PPRZ</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00277">module_enter_time</a>, <a class="el" href="textons_8c_source.html#l00122">n_textons</a>, <a class="el" href="rotorcraft_2guidance_2guidance__v_8h_source.html#l00102">VerticalGuidance::nominal_throttle</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00065">OpticalFlowLanding::nominal_thrust</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00297">of_landing_ctrl</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00201">OFL_ACTIVE_MOTION</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00099">OFL_AGL_ID</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00176">OFL_CLOSE_TO_EDGE</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00143">OFL_CONTROL_METHOD</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00156">OFL_COV_LANDING_LIMIT</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00147">OFL_COV_METHOD</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00160">OFL_COV_SETPOINT</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00152">OFL_COV_WINDOW_SIZE</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00119">OFL_DGAIN</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00189">OFL_DGAIN_ADAPTIVE</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00172">OFL_ELC_OSCILLATE</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00205">OFL_FRONT_DIV_THRESHOLD</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00115">OFL_IGAIN</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00185">OFL_IGAIN_ADAPTIVE</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00127">OFL_IGAIN_HORIZONTAL_FACTOR</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00164">OFL_LP_CONST</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00197">OFL_OMEGA_FB</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00193">OFL_OMEGA_LR</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00105">OFL_OPTICAL_FLOW_ID</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00168">OFL_P_LAND_THRESHOLD</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00111">OFL_PGAIN</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00181">OFL_PGAIN_ADAPTIVE</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00123">OFL_PGAIN_HORIZONTAL_FACTOR</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00135">OFL_PITCH_TRIM</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00131">OFL_ROLL_TRIM</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00139">OFL_VISION_METHOD</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00227">old_flow_time</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00095">OpticalFlowLanding::omega_FB</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00094">OpticalFlowLanding::omega_LR</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00294">optical_flow_ev</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00079">OpticalFlowLanding::p_land_threshold</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00266">P_RLS</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00058">OpticalFlowLanding::pgain</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00070">OpticalFlowLanding::pgain_adaptive</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00090">OpticalFlowLanding::pgain_horizontal_factor</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00093">OpticalFlowLanding::pitch_trim</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00062">OpticalFlowLanding::previous_err</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00281">ramp</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00089">OpticalFlowLanding::ramp_duration</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00283">ramp_start_time</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00076">OpticalFlowLanding::reduction_factor_elc</a>, <a class="el" href="telemetry_8c_source.html#l00051">register_periodic_telemetry()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00448">reset_all_vars()</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00092">OpticalFlowLanding::roll_trim</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00300">send_divergence()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00284">start_setpoint_ramp</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00063">OpticalFlowLanding::sum_err</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00078">OpticalFlowLanding::t_transition</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00086">OpticalFlowLanding::use_bias</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00056">OpticalFlowLanding::vel</a>, <a class="el" href="optical__flow__landing_8c_source.html#l01121">vertical_ctrl_agl_cb()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l01126">vertical_ctrl_optical_flow_cb()</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00066">OpticalFlowLanding::VISION_METHOD</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00071">weights</a>, and <a class="el" href="optical__flow__landing_8h_source.html#l00075">OpticalFlowLanding::window_size</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="optical__flow__landing_8h_a7a0b06dc3e95e1ebf35b3da222aa6d44_cgraph.png" border="0" usemap="#aoptical__flow__landing_8h_a7a0b06dc3e95e1ebf35b3da222aa6d44_cgraph" alt=""/></div>
<map name="aoptical__flow__landing_8h_a7a0b06dc3e95e1ebf35b3da222aa6d44_cgraph" id="aoptical__flow__landing_8h_a7a0b06dc3e95e1ebf35b3da222aa6d44_cgraph">
<area shape="rect" title="Initialize the optical flow landing module." alt="" coords="5,126,188,151"/>
<area shape="rect" href="sys__time_8h.html#af486c2fb33d8d33645256a9970eb056e" title="Get the time in seconds since startup." alt="" coords="497,96,643,122"/>
<area shape="poly" title=" " alt="" coords="107,123,157,72,194,45,235,24,291,8,337,3,383,9,439,24,470,36,499,52,546,85,543,90,496,56,468,40,438,29,382,14,337,8,292,13,237,29,197,49,161,76,110,127"/>
<area shape="rect" href="telemetry_8c.html#a7caab442e31bff660862d3372fd9737c" title="Register a telemetry callback function." alt="" coords="236,39,439,64"/>
<area shape="poly" title=" " alt="" coords="122,123,174,99,235,75,265,65,267,70,237,80,176,104,125,128"/>
<area shape="rect" href="optical__flow__landing_8c.html#a46c9da8aa58fea58306c6a47b9f21c89" title="Reset all variables:" alt="" coords="281,252,394,278"/>
<area shape="poly" title=" " alt="" coords="113,149,165,193,200,218,237,239,268,250,266,255,235,243,197,222,162,197,110,153"/>
<area shape="rect" href="optical__flow__landing_8c.html#afd99ef7471eed18456a2952ad85f30c5" title=" " alt="" coords="271,154,403,179"/>
<area shape="poly" title=" " alt="" coords="189,146,258,155,257,160,188,152"/>
<area shape="rect" href="optical__flow__landing_8c.html#a464d4cb1ef2592f8bccd19df1dcec849" title="Function definitions Callback function of the ground altitude." alt="" coords="263,203,411,228"/>
<area shape="poly" title=" " alt="" coords="129,149,237,189,264,197,263,202,235,194,127,154"/>
<area shape="rect" href="optical__flow__landing_8c.html#a6aaf9d30fabda276ddf0e2e491c156a4" title=" " alt="" coords="262,89,413,129"/>
<area shape="poly" title=" " alt="" coords="188,125,248,117,249,122,189,130"/>
<area shape="poly" title=" " alt="" coords="393,255,437,239,472,215,503,186,550,131,554,135,507,190,475,219,440,243,395,260"/>
<area shape="rect" href="group__state__position.html#gada8de93d61e1bc0ed8f5e06f6bb54f6d" title="Get position in local ENU coordinates (float)." alt="" coords="487,252,653,278"/>
<area shape="poly" title=" " alt="" coords="394,262,473,262,473,268,394,268"/>
<area shape="rect" href="group__state__position.html#ga718066acd9581365ca5c2aacb29130fd" title=" " alt="" coords="701,252,872,278"/>
<area shape="poly" title=" " alt="" coords="653,262,688,262,688,268,653,268"/>
<area shape="rect" href="group__math__geodetic__int.html#ga386f7bf340618bf1454ca2a3b5086100" title="Convert a LLA to ECEF." alt="" coords="939,152,1043,178"/>
<area shape="poly" title=" " alt="" coords="807,250,857,220,919,188,937,180,939,185,921,193,859,225,809,255"/>
<area shape="rect" href="pprz__geodetic__float_8c.html#a2a82ebdce90a3e41d54f72c5e787fcd0" title=" " alt="" coords="1111,251,1264,276"/>
<area shape="poly" title=" " alt="" coords="872,262,1097,261,1097,267,872,267"/>
<area shape="rect" href="group__math__geodetic__int.html#ga710a45725431766f0a003ba93cb58a11" title="Convert a ECEF position to local ENU." alt="" coords="920,303,1063,328"/>
<area shape="poly" title=" " alt="" coords="840,275,927,297,926,302,838,280"/>
<area shape="rect" href="pprz__geodetic__float_8c.html#ab8d5cb7292ea74802e7a94e265c0703a" title=" " alt="" coords="921,202,1062,227"/>
<area shape="poly" title=" " alt="" coords="838,250,926,228,927,233,840,255"/>
<area shape="rect" href="pprz__geodetic__float_8c.html#af99d4775df518f30b741b49c26eceedd" title=" " alt="" coords="940,352,1043,378"/>
<area shape="poly" title=" " alt="" coords="809,276,859,306,921,339,937,345,935,350,919,343,856,311,806,280"/>
<area shape="rect" href="group__math__geodetic__double.html#gae6608c48696daebf3382f08e655028d9" title=" " alt="" coords="1133,152,1241,178"/>
<area shape="poly" title=" " alt="" coords="1043,162,1120,162,1120,168,1043,168"/>
<area shape="rect" href="pprz__geodetic__float_8c.html#a65bc5ba8b61d014ca659035759cc001c" title=" " alt="" coords="1135,202,1240,227"/>
<area shape="poly" title=" " alt="" coords="1043,175,1123,196,1122,201,1042,180"/>
<area shape="rect" href="group__math__geodetic__int.html#ga85bcbfc73a43b120465422ec55647573" title="Convert a point from ECEF to local ENU." alt="" coords="1111,303,1263,328"/>
<area shape="poly" title=" " alt="" coords="1063,313,1097,313,1097,318,1063,318"/>
<area shape="poly" title=" " alt="" coords="1062,212,1121,212,1121,217,1062,217"/>
<area shape="poly" title=" " alt="" coords="1043,224,1123,245,1122,250,1042,230"/>
<area shape="rect" href="pprz__geodetic__float_8c.html#a25c5bd31de0ea0d0caf14a0d217ad3ea" title=" " alt="" coords="1111,352,1263,378"/>
<area shape="poly" title=" " alt="" coords="1043,362,1098,362,1098,368,1043,368"/>
<area shape="rect" href="pprz__geodetic__float_8c.html#a21ea1b369f7d4abd984fb89c488dde24" title=" " alt="" coords="1117,402,1257,442"/>
<area shape="poly" title=" " alt="" coords="1036,375,1106,396,1105,401,1035,380"/>
<area shape="poly" title=" " alt="" coords="413,106,484,106,484,112,413,112"/>
</map>
</div>

</div>
</div>
<a id="acad5bb8fa3647d3d2cd1b9a5c4a10257" name="acad5bb8fa3647d3d2cd1b9a5c4a10257"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acad5bb8fa3647d3d2cd1b9a5c4a10257">&#9670;&#160;</a></span>predict_gain()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> predict_gain </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *&#160;</td>
          <td class="paramname"><em>distribution</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="optical__flow__landing_8c_source.html#l01486">1486</a> of file <a class="el" href="optical__flow__landing_8c_source.html">optical_flow_landing.c</a>.</p>

<p class="reference">References <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="textons_8c_source.html#l00122">n_textons</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00297">of_landing_ctrl</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00086">OpticalFlowLanding::use_bias</a>, and <a class="el" href="optical__flow__landing_8c_source.html#l00071">weights</a>.</p>

<p class="reference">Referenced by <a class="el" href="optical__flow__landing_8c_source.html#l01340">recursive_least_squares()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l01290">recursive_least_squares_batch()</a>, and <a class="el" href="optical__flow__landing_8c_source.html#l00510">vertical_ctrl_module_run()</a>.</p>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="optical__flow__landing_8h_acad5bb8fa3647d3d2cd1b9a5c4a10257_icgraph.png" border="0" usemap="#aoptical__flow__landing_8h_acad5bb8fa3647d3d2cd1b9a5c4a10257_icgraph" alt=""/></div>
<map name="aoptical__flow__landing_8h_acad5bb8fa3647d3d2cd1b9a5c4a10257_icgraph" id="aoptical__flow__landing_8h_acad5bb8fa3647d3d2cd1b9a5c4a10257_icgraph">
<area shape="rect" title=" " alt="" coords="857,56,960,81"/>
<area shape="rect" href="optical__flow__landing_8c.html#ad19b7ab9b06ca16863dcb328b6d51272" title=" " alt="" coords="631,5,809,31"/>
<area shape="poly" title=" " alt="" coords="847,55,768,33,769,28,848,50"/>
<area shape="rect" href="optical__flow__landing_8c.html#a00b62a35714831cf9fd5f6c04d3ec7e6" title="Recursively fit a linear model from samples to target values &#45; batch mode, possibly for initializatio..." alt="" coords="404,42,583,82"/>
<area shape="poly" title=" " alt="" coords="844,70,583,66,583,61,844,65"/>
<area shape="rect" href="optical__flow__landing_8c.html#a9628e4f2b9a046bb7ff80c208ab85daa" title="Run the optical flow landing module." alt="" coords="5,81,188,107"/>
<area shape="poly" title=" " alt="" coords="844,78,723,88,583,97,370,100,188,99,188,93,370,95,583,91,722,83,843,72"/>
<area shape="poly" title=" " alt="" coords="641,36,584,47,583,42,640,31"/>
<area shape="rect" href="optical__flow__landing_8c.html#a00d1461d54c90184f1e13db823860fd7" title=" " alt="" coords="236,53,356,79"/>
<area shape="poly" title=" " alt="" coords="390,67,356,67,356,62,390,61"/>
<area shape="poly" title=" " alt="" coords="223,79,188,84,187,79,222,74"/>
</map>
</div>

</div>
</div>
<a id="a4969951a8ac413507f16c576a7610cd6" name="a4969951a8ac413507f16c576a7610cd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4969951a8ac413507f16c576a7610cd6">&#9670;&#160;</a></span>recursive_least_squares()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> recursive_least_squares </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a>&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *&#160;</td>
          <td class="paramname"><em>sample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>length_sample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a00b62a35714831cf9fd5f6c04d3ec7e6" name="a00b62a35714831cf9fd5f6c04d3ec7e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00b62a35714831cf9fd5f6c04d3ec7e6">&#9670;&#160;</a></span>recursive_least_squares_batch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> recursive_least_squares_batch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *&#160;</td>
          <td class="paramname"><em>targets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> **&#160;</td>
          <td class="paramname"><em>samples</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>D</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vl53l1__types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *&#160;</td>
          <td class="paramname"><em>fit_error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Recursively fit a linear model from samples to target values - batch mode, possibly for initialization. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">targets</td><td>The target values </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">samples</td><td>The samples / feature vectors </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">D</td><td>The dimensionality of the samples </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">count</td><td>The number of samples </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">parameters*</td><td>Parameters of the linear fit </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">fit_error*</td><td>Total error of the fit // TODO: relevant for RLS? </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="optical__flow__landing_8c_source.html#l01290">1290</a> of file <a class="el" href="optical__flow__landing_8c_source.html">optical_flow_landing.c</a>.</p>

<p class="reference">References <a class="el" href="trilateration_8c_source.html#l00035">D</a>, <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="textons_8c_source.html#l00122">n_textons</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00297">of_landing_ctrl</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00266">P_RLS</a>, <a class="el" href="optical__flow__landing_8c_source.html#l01486">predict_gain()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l01340">recursive_least_squares()</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00086">OpticalFlowLanding::use_bias</a>, and <a class="el" href="optical__flow__landing_8c_source.html#l00071">weights</a>.</p>

<p class="reference">Referenced by <a class="el" href="optical__flow__landing_8c_source.html#l01251">learn_from_file()</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="optical__flow__landing_8h_a00b62a35714831cf9fd5f6c04d3ec7e6_cgraph.png" border="0" usemap="#aoptical__flow__landing_8h_a00b62a35714831cf9fd5f6c04d3ec7e6_cgraph" alt=""/></div>
<map name="aoptical__flow__landing_8h_a00b62a35714831cf9fd5f6c04d3ec7e6_cgraph" id="aoptical__flow__landing_8h_a00b62a35714831cf9fd5f6c04d3ec7e6_cgraph">
<area shape="rect" title="Recursively fit a linear model from samples to target values &#45; batch mode, possibly for initializatio..." alt="" coords="5,23,184,63"/>
<area shape="rect" href="optical__flow__landing_8c.html#acad5bb8fa3647d3d2cd1b9a5c4a10257" title=" " alt="" coords="489,5,591,31"/>
<area shape="poly" title=" " alt="" coords="184,36,474,19,475,24,185,41"/>
<area shape="rect" href="optical__flow__landing_8c.html#ad19b7ab9b06ca16863dcb328b6d51272" title=" " alt="" coords="232,56,411,81"/>
<area shape="poly" title=" " alt="" coords="185,51,218,54,218,60,184,56"/>
<area shape="poly" title=" " alt="" coords="377,53,475,30,476,35,378,58"/>
<area shape="rect" href="group__math__algebra__float.html#gaf832bf776f4174d501c1e17954df907e" title="Divide a matrix by a scalar." alt="" coords="461,55,619,80"/>
<area shape="poly" title=" " alt="" coords="411,65,448,65,448,71,411,71"/>
<area shape="rect" href="group__math__algebra__float.html#ga60e53f8c14ae04aa5587f84f6eabbd86" title="Multiply a matrix by a scalar." alt="" coords="459,104,621,129"/>
<area shape="poly" title=" " alt="" coords="381,79,469,98,468,104,379,84"/>
</map>
</div>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="optical__flow__landing_8h_a00b62a35714831cf9fd5f6c04d3ec7e6_icgraph.png" border="0" usemap="#aoptical__flow__landing_8h_a00b62a35714831cf9fd5f6c04d3ec7e6_icgraph" alt=""/></div>
<map name="aoptical__flow__landing_8h_a00b62a35714831cf9fd5f6c04d3ec7e6_icgraph" id="aoptical__flow__landing_8h_a00b62a35714831cf9fd5f6c04d3ec7e6_icgraph">
<area shape="rect" title="Recursively fit a linear model from samples to target values &#45; batch mode, possibly for initializatio..." alt="" coords="404,5,583,45"/>
<area shape="rect" href="optical__flow__landing_8c.html#a00d1461d54c90184f1e13db823860fd7" title=" " alt="" coords="236,13,356,38"/>
<area shape="poly" title=" " alt="" coords="390,28,356,28,356,23,390,23"/>
<area shape="rect" href="optical__flow__landing_8c.html#a9628e4f2b9a046bb7ff80c208ab85daa" title="Run the optical flow landing module." alt="" coords="5,13,188,38"/>
<area shape="poly" title=" " alt="" coords="222,28,188,28,188,23,222,23"/>
</map>
</div>

</div>
</div>
<a id="a8d19fc9e54c7d49a0f9a46df5b3fffe0" name="a8d19fc9e54c7d49a0f9a46df5b3fffe0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d19fc9e54c7d49a0f9a46df5b3fffe0">&#9670;&#160;</a></span>save_texton_distribution()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> save_texton_distribution </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="optical__flow__landing_8c_source.html#l01186">1186</a> of file <a class="el" href="optical__flow__landing_8c_source.html">optical_flow_landing.c</a>.</p>

<p class="reference">References <a class="el" href="optical__flow__landing_8h_source.html#l00053">OpticalFlowLanding::agl</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00074">cov_div</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00269">distribution_logger</a>, <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="textons_8c_source.html#l00122">n_textons</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00297">of_landing_ctrl</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00075">pstate</a>, <a class="el" href="textons_8c_source.html#l00042">texton_distribution</a>, and <a class="el" href="optical__flow__landing_8c_source.html#l00264">TEXTON_DISTRIBUTION_PATH</a>.</p>

<p class="reference">Referenced by <a class="el" href="optical__flow__landing_8c_source.html#l00510">vertical_ctrl_module_run()</a>.</p>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="optical__flow__landing_8h_a8d19fc9e54c7d49a0f9a46df5b3fffe0_icgraph.png" border="0" usemap="#aoptical__flow__landing_8h_a8d19fc9e54c7d49a0f9a46df5b3fffe0_icgraph" alt=""/></div>
<map name="aoptical__flow__landing_8h_a8d19fc9e54c7d49a0f9a46df5b3fffe0_icgraph" id="aoptical__flow__landing_8h_a8d19fc9e54c7d49a0f9a46df5b3fffe0_icgraph">
<area shape="rect" title=" " alt="" coords="236,5,419,31"/>
<area shape="rect" href="optical__flow__landing_8c.html#a9628e4f2b9a046bb7ff80c208ab85daa" title="Run the optical flow landing module." alt="" coords="5,5,188,31"/>
<area shape="poly" title=" " alt="" coords="223,21,188,21,188,15,223,15"/>
</map>
</div>

</div>
</div>
<a id="ae0649ece855c0b0565eb24637f5dc958" name="ae0649ece855c0b0565eb24637f5dc958"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0649ece855c0b0565eb24637f5dc958">&#9670;&#160;</a></span>save_weights()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> save_weights </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="optical__flow__landing_8c_source.html#l01503">1503</a> of file <a class="el" href="optical__flow__landing_8c_source.html">optical_flow_landing.c</a>.</p>

<p class="reference">References <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="textons_8c_source.html#l00122">n_textons</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00264">TEXTON_DISTRIBUTION_PATH</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00071">weights</a>, and <a class="el" href="optical__flow__landing_8c_source.html#l00270">weights_file</a>.</p>

<p class="reference">Referenced by <a class="el" href="optical__flow__landing_8c_source.html#l01251">learn_from_file()</a>.</p>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="optical__flow__landing_8h_ae0649ece855c0b0565eb24637f5dc958_icgraph.png" border="0" usemap="#aoptical__flow__landing_8h_ae0649ece855c0b0565eb24637f5dc958_icgraph" alt=""/></div>
<map name="aoptical__flow__landing_8h_ae0649ece855c0b0565eb24637f5dc958_icgraph" id="aoptical__flow__landing_8h_ae0649ece855c0b0565eb24637f5dc958_icgraph">
<area shape="rect" title=" " alt="" coords="404,5,515,31"/>
<area shape="rect" href="optical__flow__landing_8c.html#a00d1461d54c90184f1e13db823860fd7" title=" " alt="" coords="236,5,356,31"/>
<area shape="poly" title=" " alt="" coords="390,21,356,21,356,15,390,15"/>
<area shape="rect" href="optical__flow__landing_8c.html#a9628e4f2b9a046bb7ff80c208ab85daa" title="Run the optical flow landing module." alt="" coords="5,5,188,31"/>
<area shape="poly" title=" " alt="" coords="222,21,188,21,188,15,222,15"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ad4982b2ef527a9bb63dad1833b51849b" name="ad4982b2ef527a9bb63dad1833b51849b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4982b2ef527a9bb63dad1833b51849b">&#9670;&#160;</a></span>of_landing_ctrl</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="optical__flow__landing_8h.html#structOpticalFlowLanding">OpticalFlowLanding</a> of_landing_ctrl</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="optical__flow__landing_8c_source.html#l00297">297</a> of file <a class="el" href="optical__flow__landing_8c_source.html">optical_flow_landing.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="optical__flow__landing_8c_source.html#l00998">final_landing_procedure()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l01415">fit_linear_model_OF()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l01169">guidance_module_enter()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00334">optical_flow_landing_init()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l01051">PID_divergence_control()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l01486">predict_gain()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l01290">recursive_least_squares_batch()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00448">reset_all_vars()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l01186">save_texton_distribution()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00300">send_divergence()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l01014">set_cov_div()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l01109">update_errors()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l01121">vertical_ctrl_agl_cb()</a>, and <a class="el" href="optical__flow__landing_8c_source.html#l00510">vertical_ctrl_module_run()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_01fcd3835fb4e7d9331b722d86291b65.html">sw</a></li><li class="navelem"><a class="el" href="dir_5e9153041680afc3c016fd52fa730b56.html">airborne</a></li><li class="navelem"><a class="el" href="dir_c2abcdd6ccb39c3582929c0e3f5651c2.html">modules</a></li><li class="navelem"><a class="el" href="dir_94757629c544be2d6d24b01569be56e6.html">ctrl</a></li><li class="navelem"><a class="el" href="optical__flow__landing_8h.html">optical_flow_landing.h</a></li>
    <li class="footer">Generated on Wed Jul 2 2025 14:27:47 for Paparazzi UAS by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
