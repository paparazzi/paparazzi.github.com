<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Paparazzi UAS: sw/airborne/modules/loggers/sdlog_chibios/msg_queue.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="penguin_icon.png"/></td>
  <td id="projectalign">
   <div id="projectname">Paparazzi UAS<span id="projectnumber">&#160;v7.0_unstable</span>
   </div>
   <div id="projectbrief">Paparazzi is a free software Unmanned Aircraft System.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('msg__queue_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">msg_queue.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;ch.h&gt;</code><br />
<code>#include &lt;hal.h&gt;</code><br />
<code>#include &quot;<a class="el" href="tlsf__malloc_8h_source.html">modules/tlsf/tlsf_malloc.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for msg_queue.h:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8h__incl.png" border="0" usemap="#asw_2airborne_2modules_2loggers_2sdlog__chibios_2msg__queue_8h" alt=""/></div>
<map name="asw_2airborne_2modules_2loggers_2sdlog__chibios_2msg__queue_8h" id="asw_2airborne_2modules_2loggers_2sdlog__chibios_2msg__queue_8h">
<area shape="rect" title=" " alt="" coords="83,5,249,60"/>
<area shape="rect" title=" " alt="" coords="5,269,55,295"/>
<area shape="poly" title=" " alt="" coords="112,62,83,83,60,109,43,146,34,186,31,256,25,255,29,185,38,144,56,107,80,79,109,58"/>
<area shape="rect" title=" " alt="" coords="277,269,332,295"/>
<area shape="poly" title=" " alt="" coords="222,58,251,79,275,107,293,144,303,185,308,255,303,256,298,186,288,146,270,109,247,83,219,62"/>
<area shape="rect" href="tlsf__malloc_8h.html" title="Dynamic memory allocation based on TLSF library." alt="" coords="71,108,261,133"/>
<area shape="poly" title=" " alt="" coords="169,60,169,94,163,94,163,60"/>
<area shape="rect" href="tlsf__malloc__arch_8h.html" title="Dynamic memory allocation based on TLSF library." alt="" coords="77,181,255,221"/>
<area shape="poly" title=" " alt="" coords="169,134,169,168,163,168,163,134"/>
<area shape="poly" title=" " alt="" coords="135,224,63,265,61,260,132,219"/>
<area shape="poly" title=" " alt="" coords="201,219,273,260,271,265,198,224"/>
<area shape="rect" href="ram__arch_8h.html" title="Specific RAM section for DMA usage on F7." alt="" coords="79,269,253,295"/>
<area shape="poly" title=" " alt="" coords="169,222,169,255,163,255,163,222"/>
</map>
</div>
</div><div class="textblock"><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> This graph shows which files directly or indirectly include this file:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8h__dep__incl.png" border="0" usemap="#asw_2airborne_2modules_2loggers_2sdlog__chibios_2msg__queue_8hdep" alt=""/></div>
<map name="asw_2airborne_2modules_2loggers_2sdlog__chibios_2msg__queue_8hdep" id="asw_2airborne_2modules_2loggers_2sdlog__chibios_2msg__queue_8hdep">
<area shape="rect" title=" " alt="" coords="5,5,172,60"/>
<area shape="rect" href="msg__queue_8c.html" title=" " alt="" coords="5,108,172,163"/>
<area shape="poly" title=" " alt="" coords="91,74,91,108,86,108,86,74"/>
</map>
</div>
</div>
<p><a href="msg__queue_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structMsgQueue" id="r_structMsgQueue"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a></td></tr>
<tr class="separator:structMsgQueue"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a53151d497644eaddb2396d4659056d74" id="r_a53151d497644eaddb2396d4659056d74"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">typedef</a> struct <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8h.html#a53151d497644eaddb2396d4659056d74">MsgQueue</a></td></tr>
<tr class="separator:a53151d497644eaddb2396d4659056d74"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:af21955713d9e8a8e5ffcb337a33dfefc" id="r_af21955713d9e8a8e5ffcb337a33dfefc"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8h.html#af21955713d9e8a8e5ffcb337a33dfefc">MsgQueueStatus</a> { <br />
&#160;&#160;<a class="el" href="msg__queue_8h.html#af21955713d9e8a8e5ffcb337a33dfefca9b77fd223eb664848c5278e169e9cec4">MsgQueue_MAILBOX_FULL</a> = -100
, <a class="el" href="msg__queue_8h.html#af21955713d9e8a8e5ffcb337a33dfefca733968b6a2941fbf84cc350143eafab1">MsgQueue_MAILBOX_FAIL</a>
, <a class="el" href="msg__queue_8h.html#af21955713d9e8a8e5ffcb337a33dfefcab7d6dd38f1b96beb04812db6b22e2051">MsgQueue_MAILBOX_TIMEOUT</a>
, <a class="el" href="msg__queue_8h.html#af21955713d9e8a8e5ffcb337a33dfefcaf50eb3860d84431ca8f37daa56b352c5">MsgQueue_MAILBOX_NOT_EMPTY</a>
, <br />
&#160;&#160;<a class="el" href="msg__queue_8h.html#af21955713d9e8a8e5ffcb337a33dfefcae598911369ed1e5b93e0d6074a9e5736">MsgQueue_INVALID_PTR</a>
, <a class="el" href="msg__queue_8h.html#af21955713d9e8a8e5ffcb337a33dfefca192f11974cae9c09c1c6f987adf81d72">MsgQueue_OK</a> = 0
<br />
 }</td></tr>
<tr class="separator:af21955713d9e8a8e5ffcb337a33dfefc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a515d85b3345a7403ee1c9f4b8b5769fc" id="r_a515d85b3345a7403ee1c9f4b8b5769fc"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8h.html#a515d85b3345a7403ee1c9f4b8b5769fc">MsgQueueUrgency</a> { <a class="el" href="msg__queue_8h.html#a515d85b3345a7403ee1c9f4b8b5769fcab738f26664be5b03e2d40eb391d707bb">MsgQueue_REGULAR</a>
, <a class="el" href="msg__queue_8h.html#a515d85b3345a7403ee1c9f4b8b5769fcacc844e0c7a5a368697a91aa4754b6923">MsgQueue_OUT_OF_BAND</a>
 }</td></tr>
<tr class="separator:a515d85b3345a7403ee1c9f4b8b5769fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8cbe13f6801caa6bd92498e5772eb3df" id="r_a8cbe13f6801caa6bd92498e5772eb3df"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8h.html#a8cbe13f6801caa6bd92498e5772eb3df">msgqueue_init</a> (<a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">que</a>, <a class="el" href="tlsf__malloc_8h.html#a44a4f63f07dd3c75f42ae32629036283">tlsf_memory_heap_t</a> *heap, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">msg_t</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">mb_buf</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">cnt_t</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">mb_size</a>)</td></tr>
<tr class="memdesc:a8cbe13f6801caa6bd92498e5772eb3df"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialise <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a>  <br /></td></tr>
<tr class="separator:a8cbe13f6801caa6bd92498e5772eb3df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ae94858e7c233420b3b35b1d6c0226e" id="r_a7ae94858e7c233420b3b35b1d6c0226e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8h.html#a7ae94858e7c233420b3b35b1d6c0226e">msgqueue_is_full</a> (<a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">que</a>)</td></tr>
<tr class="memdesc:a7ae94858e7c233420b3b35b1d6c0226e"><td class="mdescLeft">&#160;</td><td class="mdescRight">test if queue is full  <br /></td></tr>
<tr class="separator:a7ae94858e7c233420b3b35b1d6c0226e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f51e84b25a2e05a3b905dcf826c4446" id="r_a0f51e84b25a2e05a3b905dcf826c4446"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8h.html#a0f51e84b25a2e05a3b905dcf826c4446">msgqueue_is_empty</a> (<a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">que</a>)</td></tr>
<tr class="memdesc:a0f51e84b25a2e05a3b905dcf826c4446"><td class="mdescLeft">&#160;</td><td class="mdescRight">test if queue is empty  <br /></td></tr>
<tr class="separator:a0f51e84b25a2e05a3b905dcf826c4446"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b457b8a24d51625e782035fe54622a7" id="r_a6b457b8a24d51625e782035fe54622a7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8h.html#a6b457b8a24d51625e782035fe54622a7">msgqueue_send</a> (<a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">que</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> *<a class="el" href="high__speed__logger__direct__memory_8c.html#a32b52374003c5d7911e540c6a1c53488">msg</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="vl53l1__types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">msgLen</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="msg__queue_8h.html#a515d85b3345a7403ee1c9f4b8b5769fc">MsgQueueUrgency</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">urgency</a>)</td></tr>
<tr class="memdesc:a6b457b8a24d51625e782035fe54622a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">send a buffer previously allocated by msgqueue_malloc_before_send  <br /></td></tr>
<tr class="separator:a6b457b8a24d51625e782035fe54622a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9c85548b02609202975402ff7efcd64" id="r_aa9c85548b02609202975402ff7efcd64"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8h.html#aa9c85548b02609202975402ff7efcd64">msgqueue_send_timeout</a> (<a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">que</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> *<a class="el" href="high__speed__logger__direct__memory_8c.html#a32b52374003c5d7911e540c6a1c53488">msg</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="vl53l1__types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">msgLen</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="msg__queue_8h.html#a515d85b3345a7403ee1c9f4b8b5769fc">MsgQueueUrgency</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">urgency</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">systime_t</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">timout</a>)</td></tr>
<tr class="memdesc:aa9c85548b02609202975402ff7efcd64"><td class="mdescLeft">&#160;</td><td class="mdescRight">send a buffer previously allocated by msgqueue_malloc_before_send  <br /></td></tr>
<tr class="separator:aa9c85548b02609202975402ff7efcd64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8e38447d739bbdfab151c413e813070" id="r_ab8e38447d739bbdfab151c413e813070"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8h.html#ab8e38447d739bbdfab151c413e813070">msgqueue_copy_send</a> (<a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">que</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> *<a class="el" href="high__speed__logger__direct__memory_8c.html#a32b52374003c5d7911e540c6a1c53488">msg</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="vl53l1__types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">msgLen</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="msg__queue_8h.html#a515d85b3345a7403ee1c9f4b8b5769fc">MsgQueueUrgency</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">urgency</a>)</td></tr>
<tr class="memdesc:ab8e38447d739bbdfab151c413e813070"><td class="mdescLeft">&#160;</td><td class="mdescRight">send a buffer <em>NOT</em> previously allocated  <br /></td></tr>
<tr class="separator:ab8e38447d739bbdfab151c413e813070"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac728799fec55bd850be4fbc674628a9" id="r_aac728799fec55bd850be4fbc674628a9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8h.html#aac728799fec55bd850be4fbc674628a9">msgqueue_copy_send_timeout</a> (<a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">que</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> *<a class="el" href="high__speed__logger__direct__memory_8c.html#a32b52374003c5d7911e540c6a1c53488">msg</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="vl53l1__types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">msgLen</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="msg__queue_8h.html#a515d85b3345a7403ee1c9f4b8b5769fc">MsgQueueUrgency</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">urgency</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">systime_t</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">timout</a>)</td></tr>
<tr class="memdesc:aac728799fec55bd850be4fbc674628a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">send a buffer <em>NOT</em> previously allocated  <br /></td></tr>
<tr class="separator:aac728799fec55bd850be4fbc674628a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ddc872b801355fb65d98f18829419bd" id="r_a6ddc872b801355fb65d98f18829419bd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8h.html#a6ddc872b801355fb65d98f18829419bd">msgqueue_pop</a> (<a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">que</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> **<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">msgPtr</a>)</td></tr>
<tr class="memdesc:a6ddc872b801355fb65d98f18829419bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">wait then receive message  <br /></td></tr>
<tr class="separator:a6ddc872b801355fb65d98f18829419bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38dd61b3d9daa051032159c2473eb2cc" id="r_a38dd61b3d9daa051032159c2473eb2cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8h.html#a38dd61b3d9daa051032159c2473eb2cc">msgqueue_pop_timeout</a> (<a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">que</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> **<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">msgPtr</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">systime_t</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">timout</a>)</td></tr>
<tr class="memdesc:a38dd61b3d9daa051032159c2473eb2cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">receive message specifying timeout  <br /></td></tr>
<tr class="separator:a38dd61b3d9daa051032159c2473eb2cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ced6141b6f23e910e27ac508e917227" id="r_a4ced6141b6f23e910e27ac508e917227"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">char</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8h.html#a4ced6141b6f23e910e27ac508e917227">msgqueue_strerror</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="msg__queue_8h.html#af21955713d9e8a8e5ffcb337a33dfefc">MsgQueueStatus</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">errno</a>)</td></tr>
<tr class="memdesc:a4ced6141b6f23e910e27ac508e917227"><td class="mdescLeft">&#160;</td><td class="mdescRight">debug api  <br /></td></tr>
<tr class="separator:a4ced6141b6f23e910e27ac508e917227"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structMsgQueue" id="structMsgQueue"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structMsgQueue">&#9670;&#160;</a></span>MsgQueue</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct MsgQueue</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="msg__queue_8h_source.html#l00225">225</a> of file <a class="el" href="msg__queue_8h_source.html">msg_queue.h</a>.</p>
</div><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Collaboration diagram for MsgQueue:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="structMsgQueue__coll__graph.png" border="0" usemap="#aMsgQueue_coll__map" alt="Collaboration graph"/></div>
<map name="aMsgQueue_coll__map" id="aMsgQueue_coll__map">
<area shape="rect" title=" " alt="" coords="41,93,132,119"/>
<area shape="rect" href="tlsf__malloc__arch_8c.html#struct__tlsf__memory__heap__t" title=" " alt="" coords="5,5,168,31"/>
<area shape="poly" title=" " alt="" coords="89,45,89,93,84,93,84,45"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="acf821510b9c205a9ecc50e269877f91f" name="acf821510b9c205a9ecc50e269877f91f"></a><a class="el" href="tlsf__malloc_8h.html#a44a4f63f07dd3c75f42ae32629036283">tlsf_memory_heap_t</a> *</td>
<td class="fieldname">
heap</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ae17057bd2c7a165ba13f8246407b5cf9" name="ae17057bd2c7a165ba13f8246407b5cf9"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">mailbox_t</a></td>
<td class="fieldname">
mb</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a53151d497644eaddb2396d4659056d74" name="a53151d497644eaddb2396d4659056d74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53151d497644eaddb2396d4659056d74">&#9670;&#160;</a></span>MsgQueue</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">typedef</a> struct <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="msg__queue_8h_source.html#l00049">49</a> of file <a class="el" href="msg__queue_8h_source.html">msg_queue.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="af21955713d9e8a8e5ffcb337a33dfefc" name="af21955713d9e8a8e5ffcb337a33dfefc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af21955713d9e8a8e5ffcb337a33dfefc">&#9670;&#160;</a></span>MsgQueueStatus</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">enum</a> <a class="el" href="msg__queue_8h.html#af21955713d9e8a8e5ffcb337a33dfefc">MsgQueueStatus</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="af21955713d9e8a8e5ffcb337a33dfefca9b77fd223eb664848c5278e169e9cec4" name="af21955713d9e8a8e5ffcb337a33dfefca9b77fd223eb664848c5278e169e9cec4"></a>MsgQueue_MAILBOX_FULL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="af21955713d9e8a8e5ffcb337a33dfefca733968b6a2941fbf84cc350143eafab1" name="af21955713d9e8a8e5ffcb337a33dfefca733968b6a2941fbf84cc350143eafab1"></a>MsgQueue_MAILBOX_FAIL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="af21955713d9e8a8e5ffcb337a33dfefcab7d6dd38f1b96beb04812db6b22e2051" name="af21955713d9e8a8e5ffcb337a33dfefcab7d6dd38f1b96beb04812db6b22e2051"></a>MsgQueue_MAILBOX_TIMEOUT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="af21955713d9e8a8e5ffcb337a33dfefcaf50eb3860d84431ca8f37daa56b352c5" name="af21955713d9e8a8e5ffcb337a33dfefcaf50eb3860d84431ca8f37daa56b352c5"></a>MsgQueue_MAILBOX_NOT_EMPTY&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="af21955713d9e8a8e5ffcb337a33dfefcae598911369ed1e5b93e0d6074a9e5736" name="af21955713d9e8a8e5ffcb337a33dfefcae598911369ed1e5b93e0d6074a9e5736"></a>MsgQueue_INVALID_PTR&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="af21955713d9e8a8e5ffcb337a33dfefca192f11974cae9c09c1c6f987adf81d72" name="af21955713d9e8a8e5ffcb337a33dfefca192f11974cae9c09c1c6f987adf81d72"></a>MsgQueue_OK&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="msg__queue_8h_source.html#l00038">38</a> of file <a class="el" href="msg__queue_8h_source.html">msg_queue.h</a>.</p>

</div>
</div>
<a id="a515d85b3345a7403ee1c9f4b8b5769fc" name="a515d85b3345a7403ee1c9f4b8b5769fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a515d85b3345a7403ee1c9f4b8b5769fc">&#9670;&#160;</a></span>MsgQueueUrgency</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">enum</a> <a class="el" href="msg__queue_8h.html#a515d85b3345a7403ee1c9f4b8b5769fc">MsgQueueUrgency</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a515d85b3345a7403ee1c9f4b8b5769fcab738f26664be5b03e2d40eb391d707bb" name="a515d85b3345a7403ee1c9f4b8b5769fcab738f26664be5b03e2d40eb391d707bb"></a>MsgQueue_REGULAR&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a515d85b3345a7403ee1c9f4b8b5769fcacc844e0c7a5a368697a91aa4754b6923" name="a515d85b3345a7403ee1c9f4b8b5769fcacc844e0c7a5a368697a91aa4754b6923"></a>MsgQueue_OUT_OF_BAND&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="msg__queue_8h_source.html#l00047">47</a> of file <a class="el" href="msg__queue_8h_source.html">msg_queue.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab8e38447d739bbdfab151c413e813070" name="ab8e38447d739bbdfab151c413e813070"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8e38447d739bbdfab151c413e813070">&#9670;&#160;</a></span>msgqueue_copy_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> msgqueue_copy_send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *&#160;</td>
          <td class="paramname"><em>que</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="vl53l1__types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>msgLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="msg__queue_8h.html#a515d85b3345a7403ee1c9f4b8b5769fc">MsgQueueUrgency</a>&#160;</td>
          <td class="paramname"><em>urgency</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>send a buffer <em>NOT</em> previously allocated </p>
<p>buffer is copied before beeing sent, buffer is still valid after this function returns. Less effective that zero copy alternatives which has been to be preferably used Non blocking, if queue is full, report error and immediately return </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">que</td><td>pointer to opaque <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>pointer to buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msgLen</td><td>length of buffer (the same param that has been given to msgqueue_malloc_before_send) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">urgency</td><td>regular=queued at end of fifo or out_of_band queued at start of fifo </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if &gt; 0 : requested length if &lt; 0 : error status (see errors at begining of this header file) </dd></dl>

<p class="definition">Definition at line <a class="el" href="msg__queue_8c_source.html#l00127">127</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>

<p class="reference">References <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="high__speed__logger__direct__memory_8c_source.html#l00134">msg</a>, and <a class="el" href="msg__queue_8c_source.html#l00114">msgqueue_copy_send_timeout()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8h_ab8e38447d739bbdfab151c413e813070_cgraph.png" border="0" usemap="#amsg__queue_8h_ab8e38447d739bbdfab151c413e813070_cgraph" alt=""/></div>
<map name="amsg__queue_8h_ab8e38447d739bbdfab151c413e813070_cgraph" id="amsg__queue_8h_ab8e38447d739bbdfab151c413e813070_cgraph">
<area shape="rect" title="send a buffer NOT previously allocated" alt="" coords="5,55,172,80"/>
<area shape="rect" href="msg__queue_8c.html#aac728799fec55bd850be4fbc674628a9" title="send a buffer NOT previously allocated" alt="" coords="220,47,387,87"/>
<area shape="poly" title=" " alt="" coords="173,65,206,65,206,70,173,70"/>
<area shape="rect" href="msg__queue_8c.html#aa9c85548b02609202975402ff7efcd64" title="send a buffer previously allocated by msgqueue_malloc_before_send" alt="" coords="435,29,621,55"/>
<area shape="poly" title=" " alt="" coords="386,55,421,51,421,57,387,61"/>
<area shape="rect" href="tlsf__malloc__arch_8c.html#a45d41f68f7ff004835689ecb124b0e20" title=" " alt="" coords="475,79,581,104"/>
<area shape="poly" title=" " alt="" coords="387,74,462,82,461,87,386,79"/>
<area shape="rect" href="tlsf__malloc__arch_8c.html#a17c0510bfc2132940c5d57578d37fe5e" title=" " alt="" coords="699,5,787,31"/>
<area shape="poly" title=" " alt="" coords="621,29,685,22,685,27,622,34"/>
<area shape="rect" href="tlsf__malloc__arch_8c.html#a3caa5cf4cbb416825e2ef1f81ba58e87" title=" " alt="" coords="669,55,816,80"/>
<area shape="poly" title=" " alt="" coords="622,50,656,54,655,60,621,56"/>
</map>
</div>

</div>
</div>
<a id="aac728799fec55bd850be4fbc674628a9" name="aac728799fec55bd850be4fbc674628a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac728799fec55bd850be4fbc674628a9">&#9670;&#160;</a></span>msgqueue_copy_send_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> msgqueue_copy_send_timeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *&#160;</td>
          <td class="paramname"><em>que</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="vl53l1__types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>msgLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="msg__queue_8h.html#a515d85b3345a7403ee1c9f4b8b5769fc">MsgQueueUrgency</a>&#160;</td>
          <td class="paramname"><em>urgency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">systime_t</a>&#160;</td>
          <td class="paramname"><em>timout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>send a buffer <em>NOT</em> previously allocated </p>
<p>buffer is copied before beeing sent, buffer is still valid after this function returns. Less effective that zero copy alternatives which has been to be preferably used </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">que</td><td>pointer to opaque <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>pointer to buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msgLen</td><td>length of buffer (the same param that has been given to msgqueue_malloc_before_send) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">urgency</td><td>regular=queued at end of fifo or out_of_band queued at start of fifo </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timout</td><td>: time to wait for MailBox avaibility (can be TIME_INFINITE or TIME_IMMEDIATE) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if &gt; 0 : requested length if &lt; 0 : error status (see errors at begining of this header file) </dd></dl>

<p class="definition">Definition at line <a class="el" href="msg__queue_8c_source.html#l00114">114</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>

<p class="reference">References <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="high__speed__logger__direct__memory_8c_source.html#l00134">msg</a>, <a class="el" href="msg__queue_8c_source.html#l00030">MSGQ_HEAP</a>, <a class="el" href="msg__queue_8h_source.html#l00039">MsgQueue_MAILBOX_FULL</a>, <a class="el" href="msg__queue_8c_source.html#l00076">msgqueue_send_timeout()</a>, and <a class="el" href="tlsf__malloc__arch_8c_source.html#l00095">tlsf_malloc_r()</a>.</p>

<p class="reference">Referenced by <a class="el" href="msg__queue_8c_source.html#l00127">msgqueue_copy_send()</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8h_aac728799fec55bd850be4fbc674628a9_cgraph.png" border="0" usemap="#amsg__queue_8h_aac728799fec55bd850be4fbc674628a9_cgraph" alt=""/></div>
<map name="amsg__queue_8h_aac728799fec55bd850be4fbc674628a9_cgraph" id="amsg__queue_8h_aac728799fec55bd850be4fbc674628a9_cgraph">
<area shape="rect" title="send a buffer NOT previously allocated" alt="" coords="5,47,172,87"/>
<area shape="rect" href="msg__queue_8c.html#aa9c85548b02609202975402ff7efcd64" title="send a buffer previously allocated by msgqueue_malloc_before_send" alt="" coords="220,29,407,55"/>
<area shape="poly" title=" " alt="" coords="172,55,206,51,207,57,172,61"/>
<area shape="rect" href="tlsf__malloc__arch_8c.html#a45d41f68f7ff004835689ecb124b0e20" title=" " alt="" coords="260,79,367,104"/>
<area shape="poly" title=" " alt="" coords="172,74,247,82,246,87,172,79"/>
<area shape="rect" href="tlsf__malloc__arch_8c.html#a17c0510bfc2132940c5d57578d37fe5e" title=" " alt="" coords="484,5,572,31"/>
<area shape="poly" title=" " alt="" coords="407,29,470,22,471,27,407,34"/>
<area shape="rect" href="tlsf__malloc__arch_8c.html#a3caa5cf4cbb416825e2ef1f81ba58e87" title=" " alt="" coords="455,55,601,80"/>
<area shape="poly" title=" " alt="" coords="407,50,441,54,441,60,407,56"/>
</map>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8h_aac728799fec55bd850be4fbc674628a9_icgraph.png" border="0" usemap="#amsg__queue_8h_aac728799fec55bd850be4fbc674628a9_icgraph" alt=""/></div>
<map name="amsg__queue_8h_aac728799fec55bd850be4fbc674628a9_icgraph" id="amsg__queue_8h_aac728799fec55bd850be4fbc674628a9_icgraph">
<area shape="rect" title="send a buffer NOT previously allocated" alt="" coords="220,5,387,45"/>
<area shape="rect" href="msg__queue_8c.html#ab8e38447d739bbdfab151c413e813070" title="send a buffer NOT previously allocated" alt="" coords="5,13,172,38"/>
<area shape="poly" title=" " alt="" coords="206,28,172,28,172,23,206,23"/>
</map>
</div>

</div>
</div>
<a id="a8cbe13f6801caa6bd92498e5772eb3df" name="a8cbe13f6801caa6bd92498e5772eb3df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cbe13f6801caa6bd92498e5772eb3df">&#9670;&#160;</a></span>msgqueue_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> msgqueue_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *&#160;</td>
          <td class="paramname"><em>que</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tlsf__malloc_8h.html#a44a4f63f07dd3c75f42ae32629036283">tlsf_memory_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">msg_t</a> *&#160;</td>
          <td class="paramname"><em>mb_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">cnt_t</a>&#160;</td>
          <td class="paramname"><em>mb_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initialise <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> </p>
<p>init sdQueue objet, tie memory pool buffer, tie mailbox buffer initialize mailbox </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">que</td><td>opaque object to be initialized </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">heap</td><td>reference to the tlsf heap object (needed if module should free memory) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mb_buff</td><td>internal buffer used by MailBox (see Chibios Doc) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mb_size</td><td>size of previous buffer (length of MailBox queue) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="msg__queue_8c_source.html#l00042">42</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>

<p class="reference">References <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>.</p>

<p class="reference">Referenced by <a class="el" href="sdLog_8c_source.html#l00225">sdLogInit()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8h_a8cbe13f6801caa6bd92498e5772eb3df_icgraph.png" border="0" usemap="#amsg__queue_8h_a8cbe13f6801caa6bd92498e5772eb3df_icgraph" alt=""/></div>
<map name="amsg__queue_8h_a8cbe13f6801caa6bd92498e5772eb3df_icgraph" id="amsg__queue_8h_a8cbe13f6801caa6bd92498e5772eb3df_icgraph">
<area shape="rect" title="initialise MsgQueue" alt="" coords="469,5,588,31"/>
<area shape="rect" href="sdLog_8c.html#a598888320386c21f975d32d68f29bcf3" title="initialise sdLog" alt="" coords="340,5,421,31"/>
<area shape="poly" title=" " alt="" coords="455,21,422,21,422,15,455,15"/>
<area shape="rect" href="sdlog__chibios_8c.html#a7cf4c749454b496e749b47e614750109" title=" " alt="" coords="192,5,292,31"/>
<area shape="poly" title=" " alt="" coords="327,21,292,21,292,15,327,15"/>
<area shape="rect" href="sdlog__chibios_8c.html#aeeba7682db35a9becddc07935f5d256a" title=" " alt="" coords="5,5,144,31"/>
<area shape="poly" title=" " alt="" coords="178,21,145,21,145,15,178,15"/>
</map>
</div>

</div>
</div>
<a id="a0f51e84b25a2e05a3b905dcf826c4446" name="a0f51e84b25a2e05a3b905dcf826c4446"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f51e84b25a2e05a3b905dcf826c4446">&#9670;&#160;</a></span>msgqueue_is_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a> msgqueue_is_empty </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *&#160;</td>
          <td class="paramname"><em>que</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>test if queue is empty </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">que</td><td>pointer to opaque <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if empty, false otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="msg__queue_8c_source.html#l00059">59</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>

<p class="reference">References <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>.</p>

</div>
</div>
<a id="a7ae94858e7c233420b3b35b1d6c0226e" name="a7ae94858e7c233420b3b35b1d6c0226e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ae94858e7c233420b3b35b1d6c0226e">&#9670;&#160;</a></span>msgqueue_is_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a> msgqueue_is_full </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *&#160;</td>
          <td class="paramname"><em>que</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>test if queue is full </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">que</td><td>pointer to opaque <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if full, false otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="msg__queue_8c_source.html#l00050">50</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>

<p class="reference">References <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>.</p>

</div>
</div>
<a id="a6ddc872b801355fb65d98f18829419bd" name="a6ddc872b801355fb65d98f18829419bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ddc872b801355fb65d98f18829419bd">&#9670;&#160;</a></span>msgqueue_pop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> msgqueue_pop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *&#160;</td>
          <td class="paramname"><em>que</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> **&#160;</td>
          <td class="paramname"><em>msgPtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>wait then receive message </p>
<p>this is zero copy api, blocking call usage : struct MyStruct *msg msgqueue_pop (&amp;que, void (void **) &amp;msg); use msg-&gt;myField etc etc <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">tlsf_free(MSGQ_HEAP, msg)</a>; </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">que</td><td>pointer to opaque <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> object </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">msgPtr</td><td>pointer to pointer to buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if &gt; 0 : length of received msg if &lt; 0 : error status (see errors at begining of this header file) </dd></dl>

<p class="definition">Definition at line <a class="el" href="msg__queue_8c_source.html#l00134">134</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>

<p class="reference">References <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, and <a class="el" href="msg__queue_8c_source.html#l00139">msgqueue_pop_timeout()</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8h_a6ddc872b801355fb65d98f18829419bd_cgraph.png" border="0" usemap="#amsg__queue_8h_a6ddc872b801355fb65d98f18829419bd_cgraph" alt=""/></div>
<map name="amsg__queue_8h_a6ddc872b801355fb65d98f18829419bd_cgraph" id="amsg__queue_8h_a6ddc872b801355fb65d98f18829419bd_cgraph">
<area shape="rect" title="wait then receive message" alt="" coords="5,5,127,31"/>
<area shape="rect" href="msg__queue_8c.html#a38dd61b3d9daa051032159c2473eb2cc" title="receive message specifying timeout" alt="" coords="175,5,353,31"/>
<area shape="poly" title=" " alt="" coords="127,15,161,15,161,21,127,21"/>
<area shape="rect" href="tlsf__malloc__arch_8c.html#a3caa5cf4cbb416825e2ef1f81ba58e87" title=" " alt="" coords="401,5,548,31"/>
<area shape="poly" title=" " alt="" coords="354,15,387,15,387,21,354,21"/>
</map>
</div>

</div>
</div>
<a id="a38dd61b3d9daa051032159c2473eb2cc" name="a38dd61b3d9daa051032159c2473eb2cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38dd61b3d9daa051032159c2473eb2cc">&#9670;&#160;</a></span>msgqueue_pop_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> msgqueue_pop_timeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *&#160;</td>
          <td class="paramname"><em>que</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> **&#160;</td>
          <td class="paramname"><em>msgPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">systime_t</a>&#160;</td>
          <td class="paramname"><em>timout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>receive message specifying timeout </p>
<p>this is zero copy api, blocking call usage : struct MyStruct *msg msgqueue_pop (&amp;que, void (void **) &amp;msg); use msg-&gt;myField etc etc msgqueue_free_after_pop (&amp;que, msg); </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">que</td><td>pointer to opaque <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> object </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">msgPtr</td><td>pointer to pointer to buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timout</td><td>: time to wait for MailBox avaibility (can be TIME_INFINITE or TIME_IMMEDIATE) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if &gt; 0 : length of received msg if &lt; 0 : error status (see errors at begining of this header file) </dd></dl>

<p class="definition">Definition at line <a class="el" href="msg__queue_8c_source.html#l00139">139</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>

<p class="reference">References <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="msg__queue_8c_source.html#l00030">MSGQ_HEAP</a>, <a class="el" href="msg__queue_8h_source.html#l00041">MsgQueue_MAILBOX_TIMEOUT</a>, <a class="el" href="baro__MS5534A_8c_source.html#l00060">status</a>, and <a class="el" href="tlsf__malloc__arch_8c_source.html#l00090">tlsf_get_heap_addr()</a>.</p>

<p class="reference">Referenced by <a class="el" href="msg__queue_8c_source.html#l00134">msgqueue_pop()</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8h_a38dd61b3d9daa051032159c2473eb2cc_cgraph.png" border="0" usemap="#amsg__queue_8h_a38dd61b3d9daa051032159c2473eb2cc_cgraph" alt=""/></div>
<map name="amsg__queue_8h_a38dd61b3d9daa051032159c2473eb2cc_cgraph" id="amsg__queue_8h_a38dd61b3d9daa051032159c2473eb2cc_cgraph">
<area shape="rect" title="receive message specifying timeout" alt="" coords="5,5,184,31"/>
<area shape="rect" href="tlsf__malloc__arch_8c.html#a3caa5cf4cbb416825e2ef1f81ba58e87" title=" " alt="" coords="232,5,379,31"/>
<area shape="poly" title=" " alt="" coords="184,15,218,15,218,21,184,21"/>
</map>
</div>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8h_a38dd61b3d9daa051032159c2473eb2cc_icgraph.png" border="0" usemap="#amsg__queue_8h_a38dd61b3d9daa051032159c2473eb2cc_icgraph" alt=""/></div>
<map name="amsg__queue_8h_a38dd61b3d9daa051032159c2473eb2cc_icgraph" id="amsg__queue_8h_a38dd61b3d9daa051032159c2473eb2cc_icgraph">
<area shape="rect" title="receive message specifying timeout" alt="" coords="175,5,353,31"/>
<area shape="rect" href="msg__queue_8c.html#a6ddc872b801355fb65d98f18829419bd" title="wait then receive message" alt="" coords="5,5,127,31"/>
<area shape="poly" title=" " alt="" coords="161,21,127,21,127,15,161,15"/>
</map>
</div>

</div>
</div>
<a id="a6b457b8a24d51625e782035fe54622a7" name="a6b457b8a24d51625e782035fe54622a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b457b8a24d51625e782035fe54622a7">&#9670;&#160;</a></span>msgqueue_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> msgqueue_send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *&#160;</td>
          <td class="paramname"><em>que</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="vl53l1__types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>msgLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="msg__queue_8h.html#a515d85b3345a7403ee1c9f4b8b5769fc">MsgQueueUrgency</a>&#160;</td>
          <td class="paramname"><em>urgency</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>send a buffer previously allocated by msgqueue_malloc_before_send </p>
<p>deallocation is done by the caching thread which actually write data to sd card from the sender point of view, ptr should be considered invalid after beeing sent. Even if msgqueue_send fail, deallocation is done Non blocking, if queue is full, report error and immediately return usage : msg = <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">tlsf_malloc(MSGQ_HEAP, msg, msgLen)</a>; msgqueue_send (que, msg, msgLen, urgency);</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">que</td><td>pointer to opaque <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>pointer to buffer given by msgqueue_malloc_before_send </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msgLen</td><td>length of buffer (the same param that has been given to msgqueue_malloc_before_send) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">urgency</td><td>regular=queued at end of fifo or out_of_band queued at start of fifo </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if &gt; 0 : requested length if &lt; 0 : error status (see errors at begining of this header file) </dd></dl>

<p class="definition">Definition at line <a class="el" href="msg__queue_8c_source.html#l00069">69</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>

<p class="reference">References <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="high__speed__logger__direct__memory_8c_source.html#l00134">msg</a>, and <a class="el" href="msg__queue_8c_source.html#l00076">msgqueue_send_timeout()</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8h_a6b457b8a24d51625e782035fe54622a7_cgraph.png" border="0" usemap="#amsg__queue_8h_a6b457b8a24d51625e782035fe54622a7_cgraph" alt=""/></div>
<map name="amsg__queue_8h_a6b457b8a24d51625e782035fe54622a7_cgraph" id="amsg__queue_8h_a6b457b8a24d51625e782035fe54622a7_cgraph">
<area shape="rect" title="send a buffer previously allocated by msgqueue_malloc_before_send" alt="" coords="5,31,133,56"/>
<area shape="rect" href="msg__queue_8c.html#aa9c85548b02609202975402ff7efcd64" title="send a buffer previously allocated by msgqueue_malloc_before_send" alt="" coords="181,31,368,56"/>
<area shape="poly" title=" " alt="" coords="134,41,167,41,167,46,134,46"/>
<area shape="rect" href="tlsf__malloc__arch_8c.html#a17c0510bfc2132940c5d57578d37fe5e" title=" " alt="" coords="445,5,533,31"/>
<area shape="poly" title=" " alt="" coords="368,30,431,22,432,27,369,35"/>
<area shape="rect" href="tlsf__malloc__arch_8c.html#a3caa5cf4cbb416825e2ef1f81ba58e87" title=" " alt="" coords="416,55,563,80"/>
<area shape="poly" title=" " alt="" coords="369,51,403,55,402,60,368,56"/>
</map>
</div>

</div>
</div>
<a id="aa9c85548b02609202975402ff7efcd64" name="aa9c85548b02609202975402ff7efcd64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9c85548b02609202975402ff7efcd64">&#9670;&#160;</a></span>msgqueue_send_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> msgqueue_send_timeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *&#160;</td>
          <td class="paramname"><em>que</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="vl53l1__types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>msgLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="msg__queue_8h.html#a515d85b3345a7403ee1c9f4b8b5769fc">MsgQueueUrgency</a>&#160;</td>
          <td class="paramname"><em>urgency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">systime_t</a>&#160;</td>
          <td class="paramname"><em>timout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>send a buffer previously allocated by msgqueue_malloc_before_send </p>
<p>deallocation is done by the caching thread which actually write data to sd card from the sender point of view, ptr should be considered invalid after beeing sent. Even if msgqueue_send fail, deallocation is done usage : msg = <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">tlsf_malloc(MSGQ_HEAP, msg, msgLen)</a>; msgqueue_send (que, msg, msgLen, urgency);</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">que</td><td>pointer to opaque <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>pointer to buffer given by msgqueue_malloc_before_send </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msgLen</td><td>length of buffer (the same param that has been given to msgqueue_malloc_before_send) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">urgency</td><td>regular=queued at end of fifo or out_of_band queued at start of fifo </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timout</td><td>: time to wait for MailBox avaibility (can be TIME_INFINITE or TIME_IMMEDIATE) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if &gt; 0 : requested length if &lt; 0 : error status (see errors at begining of this header file) </dd></dl>

<p class="definition">Definition at line <a class="el" href="msg__queue_8c_source.html#l00076">76</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>

<p class="reference">References <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="high__speed__logger__direct__memory_8c_source.html#l00134">msg</a>, <a class="el" href="msg__queue_8c_source.html#l00030">MSGQ_HEAP</a>, <a class="el" href="msg__queue_8h_source.html#l00043">MsgQueue_INVALID_PTR</a>, <a class="el" href="msg__queue_8h_source.html#l00039">MsgQueue_MAILBOX_FULL</a>, <a class="el" href="msg__queue_8h_source.html#l00047">MsgQueue_REGULAR</a>, <a class="el" href="tlsf__malloc__arch_8c_source.html#l00119">tlsf_free_r()</a>, and <a class="el" href="tlsf__malloc__arch_8c_source.html#l00090">tlsf_get_heap_addr()</a>.</p>

<p class="reference">Referenced by <a class="el" href="msg__queue_8c_source.html#l00114">msgqueue_copy_send_timeout()</a>, and <a class="el" href="msg__queue_8c_source.html#l00069">msgqueue_send()</a>.</p>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8h_aa9c85548b02609202975402ff7efcd64_cgraph.png" border="0" usemap="#amsg__queue_8h_aa9c85548b02609202975402ff7efcd64_cgraph" alt=""/></div>
<map name="amsg__queue_8h_aa9c85548b02609202975402ff7efcd64_cgraph" id="amsg__queue_8h_aa9c85548b02609202975402ff7efcd64_cgraph">
<area shape="rect" title="send a buffer previously allocated by msgqueue_malloc_before_send" alt="" coords="5,31,192,56"/>
<area shape="rect" href="tlsf__malloc__arch_8c.html#a17c0510bfc2132940c5d57578d37fe5e" title=" " alt="" coords="269,5,357,31"/>
<area shape="poly" title=" " alt="" coords="192,30,255,22,256,27,193,35"/>
<area shape="rect" href="tlsf__malloc__arch_8c.html#a3caa5cf4cbb416825e2ef1f81ba58e87" title=" " alt="" coords="240,55,387,80"/>
<area shape="poly" title=" " alt="" coords="193,51,227,55,226,60,192,56"/>
</map>
</div>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8h_aa9c85548b02609202975402ff7efcd64_icgraph.png" border="0" usemap="#amsg__queue_8h_aa9c85548b02609202975402ff7efcd64_icgraph" alt=""/></div>
<map name="amsg__queue_8h_aa9c85548b02609202975402ff7efcd64_icgraph" id="amsg__queue_8h_aa9c85548b02609202975402ff7efcd64_icgraph">
<area shape="rect" title="send a buffer previously allocated by msgqueue_malloc_before_send" alt="" coords="435,42,621,67"/>
<area shape="rect" href="msg__queue_8c.html#aac728799fec55bd850be4fbc674628a9" title="send a buffer NOT previously allocated" alt="" coords="220,5,387,45"/>
<area shape="poly" title=" " alt="" coords="421,43,386,39,387,34,421,38"/>
<area shape="rect" href="msg__queue_8c.html#a6b457b8a24d51625e782035fe54622a7" title="send a buffer previously allocated by msgqueue_malloc_before_send" alt="" coords="239,70,367,95"/>
<area shape="poly" title=" " alt="" coords="421,71,368,77,368,72,420,65"/>
<area shape="rect" href="msg__queue_8c.html#ab8e38447d739bbdfab151c413e813070" title="send a buffer NOT previously allocated" alt="" coords="5,13,172,38"/>
<area shape="poly" title=" " alt="" coords="206,28,172,28,172,23,206,23"/>
</map>
</div>

</div>
</div>
<a id="a4ced6141b6f23e910e27ac508e917227" name="a4ced6141b6f23e910e27ac508e917227"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ced6141b6f23e910e27ac508e917227">&#9670;&#160;</a></span>msgqueue_strerror()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">char</a> * msgqueue_strerror </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="msg__queue_8h.html#af21955713d9e8a8e5ffcb337a33dfefc">MsgQueueStatus</a>&#160;</td>
          <td class="paramname"><em>errno</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>debug api </p>
<p>give ascii string corresponding to the given errno </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">errno</td><td>: staus </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to error string </dd></dl>

<p class="definition">Definition at line <a class="el" href="msg__queue_8c_source.html#l00168">168</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>

<p class="reference">References <a class="el" href="msg__queue_8c_source.html#l00159">_strerror</a>, <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, and <a class="el" href="msg__queue_8h_source.html#l00039">MsgQueue_MAILBOX_FULL</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_01fcd3835fb4e7d9331b722d86291b65.html">sw</a></li><li class="navelem"><a class="el" href="dir_5e9153041680afc3c016fd52fa730b56.html">airborne</a></li><li class="navelem"><a class="el" href="dir_c2abcdd6ccb39c3582929c0e3f5651c2.html">modules</a></li><li class="navelem"><a class="el" href="dir_cbf4be70f5fb954ea1d2a546dd70b40e.html">loggers</a></li><li class="navelem"><a class="el" href="dir_c27662836f6a804eadd3e3b5df5506a4.html">sdlog_chibios</a></li><li class="navelem"><a class="el" href="msg__queue_8h.html">msg_queue.h</a></li>
    <li class="footer">Generated on Fri Jul 11 2025 21:13:49 for Paparazzi UAS by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
