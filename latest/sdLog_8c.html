<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Paparazzi UAS: sw/airborne/modules/loggers/sdlog_chibios/sdLog.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="penguin_icon.png"/></td>
  <td id="projectalign">
   <div id="projectname">Paparazzi UAS<span id="projectnumber">&#160;v7.0_unstable</span>
   </div>
   <div id="projectbrief">Paparazzi is a free software Unmanned Aircraft System.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('sdLog_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">sdLog.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;ch.h&gt;</code><br />
<code>#include &lt;hal.h&gt;</code><br />
<code>#include &lt;ff.h&gt;</code><br />
<code>#include &quot;<a class="el" href="sdLog_8h_source.html">modules/loggers/sdlog_chibios/sdLog.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="printf_8h_source.html">printf.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sdio_8h_source.html">mcu_periph/sdio.h</a>&quot;</code><br />
<code>#include &lt;ctype.h&gt;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for sdLog.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="sdLog_8c__incl.png" border="0" usemap="#asw_2airborne_2modules_2loggers_2sdlog__chibios_2sdLog_8c" alt=""/></div>
<map name="asw_2airborne_2modules_2loggers_2sdlog__chibios_2sdLog_8c" id="asw_2airborne_2modules_2loggers_2sdlog__chibios_2sdLog_8c">
<area shape="rect" title=" " alt="" coords="248,5,415,60"/>
<area shape="rect" title=" " alt="" coords="5,115,76,141"/>
<area shape="poly" title=" " alt="" coords="249,60,88,111,82,113,80,108,86,105,247,55"/>
<area shape="rect" title=" " alt="" coords="100,115,171,141"/>
<area shape="poly" title=" " alt="" coords="277,62,173,112,170,107,275,58"/>
<area shape="rect" title=" " alt="" coords="180,196,229,221"/>
<area shape="poly" title=" " alt="" coords="313,62,276,110,222,186,218,183,272,106,308,59"/>
<area shape="rect" title=" " alt="" coords="253,196,308,221"/>
<area shape="poly" title=" " alt="" coords="312,61,298,84,287,109,281,147,281,182,275,182,275,146,282,107,293,81,308,59"/>
<area shape="rect" title=" " alt="" coords="583,115,626,141"/>
<area shape="poly" title=" " alt="" coords="416,53,493,76,572,106,575,107,573,112,570,110,491,81,414,58"/>
<area shape="rect" href="sdLog_8h.html" title=" " alt="" coords="389,108,559,148"/>
<area shape="poly" title=" " alt="" coords="373,58,435,98,432,103,370,62"/>
<area shape="rect" href="printf_8h.html" title="Mini printf&#45;like functionality." alt="" coords="297,115,365,141"/>
<area shape="poly" title=" " alt="" coords="334,60,334,101,329,101,329,60"/>
<area shape="rect" href="sdio_8h.html" title="arch independent SDIO API" alt="" coords="650,115,791,141"/>
<area shape="poly" title=" " alt="" coords="415,51,660,110,659,115,414,56"/>
<area shape="rect" title=" " alt="" coords="816,115,887,141"/>
<area shape="poly" title=" " alt="" coords="415,39,595,62,700,81,804,105,813,108,811,113,803,111,699,86,594,68,414,44"/>
<area shape="rect" title=" " alt="" coords="545,196,600,221"/>
<area shape="poly" title=" " alt="" coords="500,146,549,185,546,189,496,150"/>
<area shape="rect" href="mcuconf_8h.html" title=" " alt="" coords="432,196,521,221"/>
<area shape="poly" title=" " alt="" coords="477,148,478,182,473,182,472,148"/>
<area shape="rect" title=" " alt="" coords="333,196,407,221"/>
<area shape="poly" title=" " alt="" coords="450,150,398,190,395,185,447,146"/>
<area shape="rect" title=" " alt="" coords="377,269,448,295"/>
<area shape="poly" title=" " alt="" coords="468,223,434,261,430,257,464,220"/>
<area shape="rect" title=" " alt="" coords="472,269,607,295"/>
<area shape="poly" title=" " alt="" coords="489,220,522,257,518,261,485,223"/>
<area shape="poly" title=" " alt="" coords="314,143,237,191,234,186,311,139"/>
<area shape="poly" title=" " alt="" coords="326,142,298,186,293,183,322,139"/>
<area shape="poly" title=" " alt="" coords="339,140,361,182,356,185,335,142"/>
</map>
</div>
</div>
<p><a href="sdLog_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a74e75242132eaabbc1c512488a135926" id="r_a74e75242132eaabbc1c512488a135926"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sdLog_8c.html#a74e75242132eaabbc1c512488a135926">MIN</a>(x,  y)&#160;&#160;&#160;(((x) &lt; (y)) ? (x) : (y))</td></tr>
<tr class="separator:a74e75242132eaabbc1c512488a135926"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacc3ee1a7f283f8ef65cea31f4436a95" id="r_aacc3ee1a7f283f8ef65cea31f4436a95"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sdLog_8c.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(x,  y)&#160;&#160;&#160;(((x) &gt; (y)) ? (x) : (y))</td></tr>
<tr class="separator:aacc3ee1a7f283f8ef65cea31f4436a95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4922593f9f95a4fabc34eacf23ac4550" id="r_a4922593f9f95a4fabc34eacf23ac4550"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sdLog_8c.html#a4922593f9f95a4fabc34eacf23ac4550">IS_POWER_OF_TWO</a>(<a class="el" href="light__scheduler_8c.html#a2dee666f0c1fe072c549ff86b1d0a8ab">s</a>)&#160;&#160;&#160;((<a class="el" href="light__scheduler_8c.html#a2dee666f0c1fe072c549ff86b1d0a8ab">s</a>) &amp;&amp; !((<a class="el" href="light__scheduler_8c.html#a2dee666f0c1fe072c549ff86b1d0a8ab">s</a>) &amp; ((<a class="el" href="light__scheduler_8c.html#a2dee666f0c1fe072c549ff86b1d0a8ab">s</a>) - 1)))</td></tr>
<tr class="separator:a4922593f9f95a4fabc34eacf23ac4550"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a275a34cd0d8f3b9b04ee91df269136e3" id="r_a275a34cd0d8f3b9b04ee91df269136e3"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sdLog_8c.html#a275a34cd0d8f3b9b04ee91df269136e3">FFCONF_DEF</a>&#160;&#160;&#160;<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">_FATFS</a></td></tr>
<tr class="separator:a275a34cd0d8f3b9b04ee91df269136e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1cf68ce7e74ae0b79f57bbc3f7d2b77" id="r_af1cf68ce7e74ae0b79f57bbc3f7d2b77"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sdLog_8c.html#af1cf68ce7e74ae0b79f57bbc3f7d2b77">SDLOG_WRITE_BUFFER_SIZE</a>&#160;&#160;&#160;(<a class="el" href="mcuconf__h7_8h.html#abf3ea4f6b58f67f72d53c6f7e35d76f0">SDLOG_ALL_BUFFERS_SIZE</a>/<a class="el" href="mcuconf__h7_8h.html#abfa7a6086a22ce269b39b1a7cd3ca4a1">SDLOG_NUM_FILES</a>)</td></tr>
<tr class="separator:af1cf68ce7e74ae0b79f57bbc3f7d2b77"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acc19261a02633b7b8cd1f9168794083d" id="r_acc19261a02633b7b8cd1f9168794083d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">static</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sdLog_8c.html#acc19261a02633b7b8cd1f9168794083d">IN_SDMMC_DMA_SECTION</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">FATFS</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">fatfs</a>)</td></tr>
<tr class="separator:acc19261a02633b7b8cd1f9168794083d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fbab9a978291b87726867c0dcb05b81" id="r_a4fbab9a978291b87726867c0dcb05b81"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">static</a> <a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sdLog_8c.html#a4fbab9a978291b87726867c0dcb05b81">uiGetIndexOfLogFile</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">char</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">prefix</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">char</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">fileName</a>)</td></tr>
<tr class="separator:a4fbab9a978291b87726867c0dcb05b81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a870830d3ea4fe67badf79e52582f4fae" id="r_a870830d3ea4fe67badf79e52582f4fae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">static</a> <a class="el" href="sdLog_8h.html#ae9361ce95c5a174983481365e90d87b3">SdioError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sdLog_8c.html#a870830d3ea4fe67badf79e52582f4fae">flushWriteByteBuffer</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="sdLog_8h.html#a5af0a3873249752407b6c26c77c9a46d">FileDes</a> <a class="el" href="serial_8c.html#a6f8059414f0228f0256115e024eeed4b">fd</a>)</td></tr>
<tr class="separator:a870830d3ea4fe67badf79e52582f4fae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a598888320386c21f975d32d68f29bcf3" id="r_a598888320386c21f975d32d68f29bcf3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sdLog_8h.html#ae9361ce95c5a174983481365e90d87b3">SdioError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sdLog_8c.html#a598888320386c21f975d32d68f29bcf3">sdLogInit</a> (<a class="el" href="vl53l1__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">freeSpaceInKo</a>)</td></tr>
<tr class="memdesc:a598888320386c21f975d32d68f29bcf3"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialise sdLog  <br /></td></tr>
<tr class="separator:a598888320386c21f975d32d68f29bcf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03326adcb90b1cc07d684a6abaff2051" id="r_a03326adcb90b1cc07d684a6abaff2051"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sdLog_8h.html#ae9361ce95c5a174983481365e90d87b3">SdioError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sdLog_8c.html#a03326adcb90b1cc07d684a6abaff2051">sdLogFinish</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>)</td></tr>
<tr class="memdesc:a03326adcb90b1cc07d684a6abaff2051"><td class="mdescLeft">&#160;</td><td class="mdescRight">unmount filesystem  <br /></td></tr>
<tr class="separator:a03326adcb90b1cc07d684a6abaff2051"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a510de29d16898e7e402fe7ea2dc7b992" id="r_a510de29d16898e7e402fe7ea2dc7b992"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sdLog_8h.html#ae9361ce95c5a174983481365e90d87b3">SdioError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sdLog_8c.html#a510de29d16898e7e402fe7ea2dc7b992">getFileName</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">char</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">prefix</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">char</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">directoryName</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">char</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">nextFileName</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">size_t</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">nameLength</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">int</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">indexOffset</a>)</td></tr>
<tr class="memdesc:a510de29d16898e7e402fe7ea2dc7b992"><td class="mdescLeft">&#160;</td><td class="mdescRight">get last used name for a pattern, then add offset and return valid filename  <br /></td></tr>
<tr class="separator:a510de29d16898e7e402fe7ea2dc7b992"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0feebb43817c3a4d97e34f991012932c" id="r_a0feebb43817c3a4d97e34f991012932c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sdLog_8h.html#ae9361ce95c5a174983481365e90d87b3">SdioError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sdLog_8c.html#a0feebb43817c3a4d97e34f991012932c">removeEmptyLogs</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">char</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">directoryName</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">char</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">prefix</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">size_t</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">sizeConsideredEmpty</a>)</td></tr>
<tr class="memdesc:a0feebb43817c3a4d97e34f991012932c"><td class="mdescLeft">&#160;</td><td class="mdescRight">remove spurious log file left on sd  <br /></td></tr>
<tr class="separator:a0feebb43817c3a4d97e34f991012932c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a275a34cd0d8f3b9b04ee91df269136e3" name="a275a34cd0d8f3b9b04ee91df269136e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a275a34cd0d8f3b9b04ee91df269136e3">&#9670;&#160;</a></span>FFCONF_DEF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a> FFCONF_DEF&#160;&#160;&#160;<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">_FATFS</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sdLog_8c_source.html#l00052">52</a> of file <a class="el" href="sdLog_8c_source.html">sdLog.c</a>.</p>

</div>
</div>
<a id="a4922593f9f95a4fabc34eacf23ac4550" name="a4922593f9f95a4fabc34eacf23ac4550"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4922593f9f95a4fabc34eacf23ac4550">&#9670;&#160;</a></span>IS_POWER_OF_TWO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a> IS_POWER_OF_TWO</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="light__scheduler_8c.html#a2dee666f0c1fe072c549ff86b1d0a8ab">s</a></td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="light__scheduler_8c.html#a2dee666f0c1fe072c549ff86b1d0a8ab">s</a>) &amp;&amp; !((<a class="el" href="light__scheduler_8c.html#a2dee666f0c1fe072c549ff86b1d0a8ab">s</a>) &amp; ((<a class="el" href="light__scheduler_8c.html#a2dee666f0c1fe072c549ff86b1d0a8ab">s</a>) - 1)))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sdLog_8c_source.html#l00044">44</a> of file <a class="el" href="sdLog_8c_source.html">sdLog.c</a>.</p>

</div>
</div>
<a id="aacc3ee1a7f283f8ef65cea31f4436a95" name="aacc3ee1a7f283f8ef65cea31f4436a95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacc3ee1a7f283f8ef65cea31f4436a95">&#9670;&#160;</a></span>MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a> MAX</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">y&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(((x) &gt; (y)) ? (x) : (y))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sdLog_8c_source.html#l00042">42</a> of file <a class="el" href="sdLog_8c_source.html">sdLog.c</a>.</p>

</div>
</div>
<a id="a74e75242132eaabbc1c512488a135926" name="a74e75242132eaabbc1c512488a135926"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74e75242132eaabbc1c512488a135926">&#9670;&#160;</a></span>MIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a> MIN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">y&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(((x) &lt; (y)) ? (x) : (y))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sdLog_8c_source.html#l00039">39</a> of file <a class="el" href="sdLog_8c_source.html">sdLog.c</a>.</p>

</div>
</div>
<a id="af1cf68ce7e74ae0b79f57bbc3f7d2b77" name="af1cf68ce7e74ae0b79f57bbc3f7d2b77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1cf68ce7e74ae0b79f57bbc3f7d2b77">&#9670;&#160;</a></span>SDLOG_WRITE_BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a> SDLOG_WRITE_BUFFER_SIZE&#160;&#160;&#160;(<a class="el" href="mcuconf__h7_8h.html#abf3ea4f6b58f67f72d53c6f7e35d76f0">SDLOG_ALL_BUFFERS_SIZE</a>/<a class="el" href="mcuconf__h7_8h.html#abfa7a6086a22ce269b39b1a7cd3ca4a1">SDLOG_NUM_FILES</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sdLog_8c_source.html#l00071">71</a> of file <a class="el" href="sdLog_8c_source.html">sdLog.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a870830d3ea4fe67badf79e52582f4fae" name="a870830d3ea4fe67badf79e52582f4fae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a870830d3ea4fe67badf79e52582f4fae">&#9670;&#160;</a></span>flushWriteByteBuffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">static</a> <a class="el" href="sdLog_8h.html#ae9361ce95c5a174983481365e90d87b3">SdioError</a> flushWriteByteBuffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="sdLog_8h.html#a5af0a3873249752407b6c26c77c9a46d">FileDes</a>&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a510de29d16898e7e402fe7ea2dc7b992" name="a510de29d16898e7e402fe7ea2dc7b992"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a510de29d16898e7e402fe7ea2dc7b992">&#9670;&#160;</a></span>getFileName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sdLog_8h.html#ae9361ce95c5a174983481365e90d87b3">SdioError</a> getFileName </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">char</a> *&#160;</td>
          <td class="paramname"><em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">char</a> *&#160;</td>
          <td class="paramname"><em>directoryName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">char</a> *&#160;</td>
          <td class="paramname"><em>nextFileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">size_t</a>&#160;</td>
          <td class="paramname"><em>nameLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">int</a>&#160;</td>
          <td class="paramname"><em>indexOffset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get last used name for a pattern, then add offset and return valid filename </p>
<p>for log file, you often have a pattern and a version. To retreive last file for reading, call function with indexOffset=0. To get next available file for writing, call function with indexOffset=1 This function is available even without thread login facility : even if SDLOG_XXX macro are zeroed </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">prefix</td><td>: the pattern for the file : example LOG_ </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">directoryName</td><td>: root directory where to find file </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">nextFileName</td><td>: file with path ready to be used for f_open system call </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nameLength</td><td>: length of previous buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">indexOffset</td><td>: use 0 to retrieve last existent filename, 1 for next filename </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status (always check status) </dd></dl>

<p class="definition">Definition at line <a class="el" href="sdLog_8c_source.html#l00754">754</a> of file <a class="el" href="sdLog_8c_source.html">sdLog.c</a>.</p>

<p class="reference">References <a class="el" href="printf_8c_source.html#l00377">chsnprintf()</a>, <a class="el" href="shift__tracking_8c_source.html#l00091">dir</a>, <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="sdLog_8c_source.html#l00042">MAX</a>, <a class="el" href="sdLog_8c_source.html#l00039">MIN</a>, <a class="el" href="sdLog_8h_source.html#l00036">NUMBERFMF</a>, <a class="el" href="sdLog_8h_source.html#l00035">NUMBERMAX</a>, <a class="el" href="sdLog_8h_source.html#l00114">SDLOG_FATFS_ERROR</a>, <a class="el" href="sdLog_8h_source.html#l00123">SDLOG_LOGNUM_ERROR</a>, <a class="el" href="sdLog_8h_source.html#l00112">SDLOG_OK</a>, and <a class="el" href="sdLog_8c_source.html#l00875">uiGetIndexOfLogFile()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="sdLog_8c_a510de29d16898e7e402fe7ea2dc7b992_cgraph.png" border="0" usemap="#asdLog_8c_a510de29d16898e7e402fe7ea2dc7b992_cgraph" alt=""/></div>
<map name="asdLog_8c_a510de29d16898e7e402fe7ea2dc7b992_cgraph" id="asdLog_8c_a510de29d16898e7e402fe7ea2dc7b992_cgraph">
<area shape="rect" title="get last used name for a pattern, then add offset and return valid filename" alt="" coords="5,38,111,63"/>
<area shape="rect" href="group__chprintf.html#gabe5c0e0148763ecfd7829f6129f29e0a" title=" " alt="" coords="193,13,279,38"/>
<area shape="poly" title=" " alt="" coords="111,41,178,31,179,36,111,46"/>
<area shape="rect" href="sdLog_8c.html#a4fbab9a978291b87726867c0dcb05b81" title=" " alt="" coords="159,62,313,87"/>
<area shape="poly" title=" " alt="" coords="111,55,145,60,144,65,111,60"/>
<area shape="rect" href="group__chprintf.html#gaa4e64308af46238224f455c00a4fcf26" title="System formatted output function." alt="" coords="361,13,464,38"/>
<area shape="poly" title=" " alt="" coords="279,23,347,23,347,28,279,28"/>
<area shape="rect" href="group__chprintf.html#ga6407be3b04a9b66588944c87c5a790e9" title=" " alt="" coords="512,13,559,38"/>
<area shape="poly" title=" " alt="" coords="464,23,498,23,498,28,464,28"/>
<area shape="rect" href="group__chprintf.html#ga4fd905ab4449a9e1aa9cbb72fcf68450" title=" " alt="" coords="607,5,756,45"/>
<area shape="poly" title=" " alt="" coords="559,23,593,23,593,28,559,28"/>
</map>
</div>

</div>
</div>
<a id="acc19261a02633b7b8cd1f9168794083d" name="acc19261a02633b7b8cd1f9168794083d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc19261a02633b7b8cd1f9168794083d">&#9670;&#160;</a></span>IN_SDMMC_DMA_SECTION()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">static</a> IN_SDMMC_DMA_SECTION </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">FATFS</a>&#160;</td>
          <td class="paramname"><em>fatfs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0feebb43817c3a4d97e34f991012932c" name="a0feebb43817c3a4d97e34f991012932c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0feebb43817c3a4d97e34f991012932c">&#9670;&#160;</a></span>removeEmptyLogs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sdLog_8h.html#ae9361ce95c5a174983481365e90d87b3">SdioError</a> removeEmptyLogs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">char</a> *&#160;</td>
          <td class="paramname"><em>directoryName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">char</a> *&#160;</td>
          <td class="paramname"><em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">size_t</a>&#160;</td>
          <td class="paramname"><em>sizeConsideredEmpty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>remove spurious log file left on sd </p>
<p>when tuning firmware, log files are created at each tries, and we consider that empty or nearly empty log are of no value this function remove log file whose size is less than a given value</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">prefix</td><td>: the pattern for the file : example LOG_ </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">directoryName</td><td>: root directory where to find file </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sizeConsideredEmpty</td><td>: file whose size is less or equal to that value will be removed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status (always check status) </dd></dl>

<p class="definition">Definition at line <a class="el" href="sdLog_8c_source.html#l00815">815</a> of file <a class="el" href="sdLog_8c_source.html">sdLog.c</a>.</p>

<p class="reference">References <a class="el" href="shift__tracking_8c_source.html#l00091">dir</a>, <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="sdLog_8h_source.html#l00114">SDLOG_FATFS_ERROR</a>, <a class="el" href="sdLog_8h_source.html#l00115">SDLOG_FATFS_NOENT</a>, and <a class="el" href="sdLog_8h_source.html#l00112">SDLOG_OK</a>.</p>

<p class="reference">Referenced by <a class="el" href="sdlog__chibios_8c_source.html#l00282">thd_startlog()</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="sdLog_8c_a0feebb43817c3a4d97e34f991012932c_icgraph.png" border="0" usemap="#asdLog_8c_a0feebb43817c3a4d97e34f991012932c_icgraph" alt=""/></div>
<map name="asdLog_8c_a0feebb43817c3a4d97e34f991012932c_icgraph" id="asdLog_8c_a0feebb43817c3a4d97e34f991012932c_icgraph">
<area shape="rect" title="remove spurious log file left on sd" alt="" coords="340,5,484,31"/>
<area shape="rect" href="sdlog__chibios_8c.html#a7cf4c749454b496e749b47e614750109" title=" " alt="" coords="192,5,292,31"/>
<area shape="poly" title=" " alt="" coords="326,21,292,21,292,15,326,15"/>
<area shape="rect" href="sdlog__chibios_8c.html#aeeba7682db35a9becddc07935f5d256a" title=" " alt="" coords="5,5,144,31"/>
<area shape="poly" title=" " alt="" coords="178,21,145,21,145,15,178,15"/>
</map>
</div>

</div>
</div>
<a id="a03326adcb90b1cc07d684a6abaff2051" name="a03326adcb90b1cc07d684a6abaff2051"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03326adcb90b1cc07d684a6abaff2051">&#9670;&#160;</a></span>sdLogFinish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sdLog_8h.html#ae9361ce95c5a174983481365e90d87b3">SdioError</a> sdLogFinish </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>unmount filesystem </p>
<p>unmount filesystem, free sdio peripheral This function is available even without thread login facility : even if SDLOG_XXX macro are zeroed </p><dl class="section return"><dt>Returns</dt><dd>status (always check status) </dd></dl>

<p class="definition">Definition at line <a class="el" href="sdLog_8c_source.html#l00285">285</a> of file <a class="el" href="sdLog_8c_source.html">sdLog.c</a>.</p>

<p class="reference">References <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="sdLog_8h_source.html#l00114">SDLOG_FATFS_ERROR</a>, and <a class="el" href="sdLog_8h_source.html#l00112">SDLOG_OK</a>.</p>

<p class="reference">Referenced by <a class="el" href="sdlog__chibios_8c_source.html#l00207">sdlog_chibios_finish()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="sdLog_8c_a03326adcb90b1cc07d684a6abaff2051_icgraph.png" border="0" usemap="#asdLog_8c_a03326adcb90b1cc07d684a6abaff2051_icgraph" alt=""/></div>
<map name="asdLog_8c_a03326adcb90b1cc07d684a6abaff2051_icgraph" id="asdLog_8c_a03326adcb90b1cc07d684a6abaff2051_icgraph">
<area shape="rect" title="unmount filesystem" alt="" coords="777,5,876,31"/>
<area shape="rect" href="sdlog__chibios_8c.html#a9f9b049b6368d8306e16bad97dd30b91" title=" " alt="" coords="577,5,729,31"/>
<area shape="poly" title=" " alt="" coords="763,21,729,21,729,15,763,15"/>
<area shape="rect" href="usbStorage_8c.html#a03e36a472f457f472fc7031d798eac45" title=" " alt="" coords="411,5,529,31"/>
<area shape="poly" title=" " alt="" coords="563,21,529,21,529,15,563,15"/>
<area shape="rect" href="usbStorage_8c.html#a12081a3972cd8a738a527d104c647665" title=" " alt="" coords="192,5,363,31"/>
<area shape="poly" title=" " alt="" coords="397,21,363,21,363,15,397,15"/>
<area shape="rect" href="sdlog__chibios_8c.html#aeeba7682db35a9becddc07935f5d256a" title=" " alt="" coords="5,5,144,31"/>
<area shape="poly" title=" " alt="" coords="178,21,144,21,144,15,178,15"/>
</map>
</div>

</div>
</div>
<a id="a598888320386c21f975d32d68f29bcf3" name="a598888320386c21f975d32d68f29bcf3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a598888320386c21f975d32d68f29bcf3">&#9670;&#160;</a></span>sdLogInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sdLog_8h.html#ae9361ce95c5a174983481365e90d87b3">SdioError</a> sdLogInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vl53l1__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *&#160;</td>
          <td class="paramname"><em>freeSpaceInKo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initialise sdLog </p>
<p>init sdio peripheral, verify sdCard is inserted, check and mount filesystem, launch worker thread This function is available even without thread login facility : even if SDLOG_XXX macro are zeroed </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">freeSpaceInKo</td><td>: if pointer in nonnull, return free space on filesystem </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status (always check status) </dd></dl>

<p class="definition">Definition at line <a class="el" href="sdLog_8c_source.html#l00225">225</a> of file <a class="el" href="sdLog_8c_source.html">sdLog.c</a>.</p>

<p class="reference">References <a class="el" href="std_8h_source.html#l00005">FALSE</a>, <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="tlsf__malloc__arch_8h_source.html#l00044">HEAP_DEFAULT</a>, <a class="el" href="msg__queue_8c_source.html#l00042">msgqueue_init()</a>, <a class="el" href="sdio__arch_8c_source.html#l00048">sdio_connect()</a>, <a class="el" href="sdio__arch_8c_source.html#l00073">sdio_disconnect()</a>, <a class="el" href="sdLog_8h_source.html#l00114">SDLOG_FATFS_ERROR</a>, <a class="el" href="sdLog_8h_source.html#l00113">SDLOG_NOCARD</a>, <a class="el" href="mcuconf__h7_8h_source.html#l00676">SDLOG_NUM_FILES</a>, <a class="el" href="sdLog_8h_source.html#l00112">SDLOG_OK</a>, <a class="el" href="mcuconf__h7_8h_source.html#l00674">SDLOG_QUEUE_BUCKETS</a>, and <a class="el" href="sdLog_8h_source.html#l00124">SDLOG_WAS_LAUNCHED</a>.</p>

<p class="reference">Referenced by <a class="el" href="sdlog__chibios_8c_source.html#l00282">thd_startlog()</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="sdLog_8c_a598888320386c21f975d32d68f29bcf3_cgraph.png" border="0" usemap="#asdLog_8c_a598888320386c21f975d32d68f29bcf3_cgraph" alt=""/></div>
<map name="asdLog_8c_a598888320386c21f975d32d68f29bcf3_cgraph" id="asdLog_8c_a598888320386c21f975d32d68f29bcf3_cgraph">
<area shape="rect" title="initialise sdLog" alt="" coords="5,55,87,80"/>
<area shape="rect" href="msg__queue_8c.html#a8cbe13f6801caa6bd92498e5772eb3df" title="initialise MsgQueue" alt="" coords="139,5,257,31"/>
<area shape="poly" title=" " alt="" coords="85,52,144,33,146,38,87,57"/>
<area shape="rect" href="sdio__arch_8c.html#a2c7a19d188134c5cc92b8384d9c5328e" title="Connect a SD card on SDIO peripheral." alt="" coords="145,55,251,80"/>
<area shape="poly" title=" " alt="" coords="87,65,131,65,131,70,87,70"/>
<area shape="rect" href="sdio__arch_8c.html#af6dbef3fa5acad94ac78155c3dea1782" title="Disconnect a SD card on SDIO peripheral." alt="" coords="135,104,261,129"/>
<area shape="poly" title=" " alt="" coords="87,78,146,97,144,102,85,83"/>
</map>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="sdLog_8c_a598888320386c21f975d32d68f29bcf3_icgraph.png" border="0" usemap="#asdLog_8c_a598888320386c21f975d32d68f29bcf3_icgraph" alt=""/></div>
<map name="asdLog_8c_a598888320386c21f975d32d68f29bcf3_icgraph" id="asdLog_8c_a598888320386c21f975d32d68f29bcf3_icgraph">
<area shape="rect" title="initialise sdLog" alt="" coords="340,5,421,31"/>
<area shape="rect" href="sdlog__chibios_8c.html#a7cf4c749454b496e749b47e614750109" title=" " alt="" coords="192,5,292,31"/>
<area shape="poly" title=" " alt="" coords="327,21,292,21,292,15,327,15"/>
<area shape="rect" href="sdlog__chibios_8c.html#aeeba7682db35a9becddc07935f5d256a" title=" " alt="" coords="5,5,144,31"/>
<area shape="poly" title=" " alt="" coords="178,21,145,21,145,15,178,15"/>
</map>
</div>

</div>
</div>
<a id="a4fbab9a978291b87726867c0dcb05b81" name="a4fbab9a978291b87726867c0dcb05b81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fbab9a978291b87726867c0dcb05b81">&#9670;&#160;</a></span>uiGetIndexOfLogFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> uiGetIndexOfLogFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">char</a> *&#160;</td>
          <td class="paramname"><em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">char</a> *&#160;</td>
          <td class="paramname"><em>fileName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sdLog_8c_source.html#l00875">875</a> of file <a class="el" href="sdLog_8c_source.html">sdLog.c</a>.</p>

<p class="reference">References <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>.</p>

<p class="reference">Referenced by <a class="el" href="sdLog_8c_source.html#l00754">getFileName()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="sdLog_8c_a4fbab9a978291b87726867c0dcb05b81_icgraph.png" border="0" usemap="#asdLog_8c_a4fbab9a978291b87726867c0dcb05b81_icgraph" alt=""/></div>
<map name="asdLog_8c_a4fbab9a978291b87726867c0dcb05b81_icgraph" id="asdLog_8c_a4fbab9a978291b87726867c0dcb05b81_icgraph">
<area shape="rect" title=" " alt="" coords="159,5,313,31"/>
<area shape="rect" href="sdLog_8c.html#a510de29d16898e7e402fe7ea2dc7b992" title="get last used name for a pattern, then add offset and return valid filename" alt="" coords="5,5,111,31"/>
<area shape="poly" title=" " alt="" coords="145,21,111,21,111,15,145,15"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_01fcd3835fb4e7d9331b722d86291b65.html">sw</a></li><li class="navelem"><a class="el" href="dir_5e9153041680afc3c016fd52fa730b56.html">airborne</a></li><li class="navelem"><a class="el" href="dir_c2abcdd6ccb39c3582929c0e3f5651c2.html">modules</a></li><li class="navelem"><a class="el" href="dir_cbf4be70f5fb954ea1d2a546dd70b40e.html">loggers</a></li><li class="navelem"><a class="el" href="dir_c27662836f6a804eadd3e3b5df5506a4.html">sdlog_chibios</a></li><li class="navelem"><a class="el" href="sdLog_8c.html">sdLog.c</a></li>
    <li class="footer">Generated on Mon Jun 16 2025 11:06:54 for Paparazzi UAS by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
