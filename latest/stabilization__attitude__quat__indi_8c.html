<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Paparazzi UAS: sw/airborne/firmwares/rotorcraft/stabilization/stabilization_attitude_quat_indi.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="penguin_icon.png"/></td>
  <td id="projectalign">
   <div id="projectname">Paparazzi UAS<span id="projectnumber">&#160;v7.0_unstable</span>
   </div>
   <div id="projectbrief">Paparazzi is a free software Unmanned Aircraft System.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('stabilization__attitude__quat__indi_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">stabilization_attitude_quat_indi.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>MAVLab Delft University of Technology This control algorithm is Incremental Nonlinear Dynamic Inversion (INDI)  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="stabilization__attitude__quat__indi_8h_source.html">firmwares/rotorcraft/stabilization/stabilization_attitude_quat_indi.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for stabilization_attitude_quat_indi.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="stabilization__attitude__quat__indi_8c__incl.png" border="0" usemap="#asw_2airborne_2firmwares_2rotorcraft_2stabilization_2stabilization__attitude__quat__indi_8c" alt=""/></div>
<map name="asw_2airborne_2firmwares_2rotorcraft_2stabilization_2stabilization__attitude__quat__indi_8c" id="asw_2airborne_2firmwares_2rotorcraft_2stabilization_2stabilization__attitude__quat__indi_8c">
<area shape="rect" title="MAVLab Delft University of Technology This control algorithm is Incremental Nonlinear Dynamic Inversi..." alt="" coords="1031,5,1201,75"/>
<area shape="rect" href="stabilization__attitude__quat__indi_8h.html" title="This is the header file of the corresponding c file." alt="" coords="1021,123,1211,177"/>
<area shape="poly" title=" " alt="" coords="1119,75,1119,109,1113,109,1113,75"/>
<area shape="rect" href="rotorcraft_2stabilization_2stabilization__attitude_8h.html" title="General attitude stabilization interface for rotorcrafts." alt="" coords="1211,328,1402,383"/>
<area shape="poly" title=" " alt="" coords="1142,176,1274,316,1271,319,1139,179"/>
<area shape="rect" href="stabilization__indi_8h.html" title=" " alt="" coords="954,225,1145,280"/>
<area shape="poly" title=" " alt="" coords="1101,179,1076,216,1072,213,1096,176"/>
<area shape="rect" href="stabilization_8h.html" title="General stabilization interface for rotorcrafts." alt="" coords="782,438,933,478"/>
<area shape="poly" title=" " alt="" coords="1212,383,1201,385,947,441,946,435,1199,380,1211,377"/>
<area shape="rect" href="radio__control_8h.html" title="Generic interface for radio control modules." alt="" coords="1213,636,1379,676"/>
<area shape="poly" title=" " alt="" coords="1402,361,1478,369,1555,383,1621,402,1646,415,1663,429,1689,469,1695,490,1697,510,1695,530,1689,550,1663,590,1643,605,1615,615,1542,627,1393,638,1393,633,1541,622,1613,610,1641,600,1659,586,1684,547,1690,528,1692,510,1690,491,1684,472,1659,432,1643,419,1619,407,1554,388,1477,375,1402,366"/>
<area shape="rect" title=" " alt="" coords="805,797,859,823"/>
<area shape="poly" title=" " alt="" coords="859,478,836,784,831,784,853,478"/>
<area shape="rect" title=" " alt="" coords="1095,724,1255,749"/>
<area shape="poly" title=" " alt="" coords="933,463,975,471,1020,484,1063,504,1101,532,1115,558,1134,607,1169,710,1164,711,1129,608,1110,560,1097,535,1060,508,1018,489,974,476,932,468"/>
<area shape="rect" href="pprz__algebra__int_8h.html" title="Paparazzi fixed point algebra." alt="" coords="501,643,681,669"/>
<area shape="poly" title=" " alt="" coords="782,465,740,473,696,486,654,506,618,535,604,557,596,582,592,630,586,629,591,581,599,555,614,532,651,502,694,481,739,468,781,460"/>
<area shape="rect" href="pprz__algebra__float_8h.html" title="Paparazzi floating point algebra." alt="" coords="148,643,340,669"/>
<area shape="poly" title=" " alt="" coords="782,475,688,498,637,515,589,536,568,549,553,563,538,577,516,590,472,608,427,623,339,643,338,638,425,618,470,603,513,586,535,573,550,559,565,545,587,531,636,510,686,493,781,470"/>
<area shape="rect" href="stabilization__attitude__rc__setpoint_8h.html" title="Read an attitude setpoint from the RC." alt="" coords="629,533,819,588"/>
<area shape="poly" title=" " alt="" coords="834,480,772,527,769,523,831,476"/>
<area shape="poly" title=" " alt="" coords="602,667,638,706,688,747,741,775,792,794,790,799,739,780,685,752,634,709,598,671"/>
<area shape="rect" href="pprz__algebra_8h.html" title="Paparazzi generic algebra macros." alt="" coords="289,724,445,749"/>
<area shape="poly" title=" " alt="" coords="559,671,413,722,411,717,557,666"/>
<area shape="rect" href="pprz__trig__int_8h.html" title="Paparazzi fixed point trig functions." alt="" coords="469,724,622,749"/>
<area shape="poly" title=" " alt="" coords="586,670,561,713,557,711,582,668"/>
<area shape="rect" title=" " alt="" coords="698,724,769,749"/>
<area shape="poly" title=" " alt="" coords="613,667,702,715,699,720,610,671"/>
<area shape="poly" title=" " alt="" coords="442,747,791,800,790,805,441,752"/>
<area shape="rect" title=" " alt="" coords="258,797,321,823"/>
<area shape="poly" title=" " alt="" coords="356,751,314,790,310,786,352,747"/>
<area shape="rect" title=" " alt="" coords="345,797,415,823"/>
<area shape="poly" title=" " alt="" coords="371,749,378,783,373,784,366,750"/>
<area shape="rect" title=" " alt="" coords="166,797,234,823"/>
<area shape="poly" title=" " alt="" coords="341,752,241,794,239,789,339,747"/>
<area shape="poly" title=" " alt="" coords="592,747,792,796,791,801,591,752"/>
<area shape="poly" title=" " alt="" coords="264,667,339,714,336,719,261,671"/>
<area shape="poly" title=" " alt="" coords="250,668,285,783,279,785,245,669"/>
<area shape="poly" title=" " alt="" coords="243,669,210,785,205,784,238,668"/>
<area shape="rect" title=" " alt="" coords="5,724,163,749"/>
<area shape="poly" title=" " alt="" coords="222,671,121,720,118,716,220,666"/>
<area shape="poly" title=" " alt="" coords="738,587,824,784,819,786,733,589"/>
<area shape="poly" title=" " alt="" coords="688,590,620,638,617,633,685,586"/>
<area shape="poly" title=" " alt="" coords="629,583,317,643,316,638,628,578"/>
<area shape="poly" title=" " alt="" coords="820,575,884,585,1199,636,1198,642,884,591,819,580"/>
<area shape="poly" title=" " alt="" coords="1268,678,1205,719,1203,714,1265,674"/>
<area shape="rect" href="paparazzi_8h.html" title=" " alt="" coords="1918,724,2015,749"/>
<area shape="poly" title=" " alt="" coords="1380,663,1613,687,1896,721,1905,723,1904,728,1896,727,1612,692,1379,668"/>
<area shape="rect" title=" " alt="" coords="2241,797,2327,823"/>
<area shape="poly" title=" " alt="" coords="2016,746,2228,793,2227,799,2015,751"/>
<area shape="poly" title=" " alt="" coords="1117,278,1228,320,1226,325,1115,282"/>
<area shape="poly" title=" " alt="" coords="1023,282,974,330,884,429,880,426,970,326,1019,278"/>
<area shape="rect" href="stabilization__attitude__common__int_8h.html" title="Common data structures shared by euler and quaternion int implementations." alt="" coords="895,533,1086,588"/>
<area shape="poly" title=" " alt="" coords="1038,281,1020,329,1009,380,1001,431,994,520,989,520,996,431,1004,379,1015,327,1033,279"/>
<area shape="rect" href="stabilization__attitude__ref__quat__int_8h.html" title="Rotorcraft attitude reference generation." alt="" coords="235,431,426,485"/>
<area shape="poly" title=" " alt="" coords="958,283,437,429,435,424,956,278"/>
<area shape="rect" href="wls__alloc_8h.html" title=" " alt="" coords="1029,343,1187,368"/>
<area shape="poly" title=" " alt="" coords="1067,279,1097,329,1092,332,1062,282"/>
<area shape="poly" title=" " alt="" coords="1018,586,1107,674,1152,713,1148,717,1104,678,1014,590"/>
<area shape="poly" title=" " alt="" coords="895,587,654,643,653,638,894,582"/>
<area shape="poly" title=" " alt="" coords="236,477,187,499,166,515,149,535,142,548,140,560,149,587,172,615,203,635,200,639,169,619,144,589,135,560,137,547,144,532,162,511,185,495,234,472"/>
<area shape="rect" href="stabilization__attitude__ref__int_8h.html" title="Rotorcraft attitude reference generation API." alt="" coords="343,541,503,581"/>
<area shape="poly" title=" " alt="" coords="357,484,398,528,394,532,353,487"/>
<area shape="rect" href="attitude__ref__saturate__naive_8h.html" title="Naive attitude reference saturation." alt="" coords="159,541,318,581"/>
<area shape="poly" title=" " alt="" coords="308,487,268,532,264,528,305,484"/>
<area shape="poly" title=" " alt="" coords="458,578,559,634,557,639,455,583"/>
<area shape="poly" title=" " alt="" coords="305,578,331,585,533,637,531,643,330,591,304,583"/>
<area shape="poly" title=" " alt="" coords="242,581,245,629,240,629,237,581"/>
<area shape="poly" title=" " alt="" coords="1113,368,1173,710,1168,711,1107,369"/>
<area shape="rect" href="telemetry_8h.html" title="Periodic telemetry system header (includes downlink utility and generated code)." alt="" coords="1436,445,1649,471"/>
<area shape="poly" title=" " alt="" coords="1147,366,1201,380,1472,440,1471,445,1199,385,1146,371"/>
<area shape="poly" title=" " alt="" coords="1537,473,1458,588,1394,678,1363,705,1336,724,1268,752,1158,781,1048,799,949,808,873,811,873,806,948,802,1047,793,1157,776,1266,747,1333,719,1359,701,1390,674,1453,585,1533,470"/>
<area shape="rect" href="uart_8h.html" title="arch independent UART (Universal Asynchronous Receiver/Transmitter) API" alt="" coords="1743,724,1883,749"/>
<area shape="poly" title=" " alt="" coords="1568,468,1614,495,1663,531,1694,565,1732,615,1800,711,1796,714,1727,618,1690,569,1660,535,1611,499,1565,473"/>
<area shape="rect" title=" " alt="" coords="1505,541,1649,581"/>
<area shape="poly" title=" " alt="" coords="1549,470,1569,526,1564,528,1544,472"/>
<area shape="rect" href="downlink_8h.html" title="Common code for AP and FBW telemetry." alt="" coords="1785,548,1996,573"/>
<area shape="poly" title=" " alt="" coords="1583,468,1839,542,1838,547,1582,473"/>
<area shape="poly" title=" " alt="" coords="1743,751,1731,752,1476,774,1226,791,873,810,873,804,1226,786,1475,769,1730,747,1743,745"/>
<area shape="rect" title=" " alt="" coords="1621,797,1795,823"/>
<area shape="poly" title=" " alt="" coords="1798,752,1738,792,1735,787,1795,747"/>
<area shape="rect" title=" " alt="" coords="1820,797,2012,823"/>
<area shape="poly" title=" " alt="" coords="1831,747,1889,787,1886,791,1828,752"/>
<area shape="poly" title=" " alt="" coords="1805,576,1659,600,1577,618,1495,639,1444,658,1393,679,1236,723,1234,718,1391,673,1442,653,1494,633,1575,613,1658,595,1804,571"/>
<area shape="poly" title=" " alt="" coords="1997,561,2100,566,2209,578,2260,588,2304,600,2340,615,2365,635,2370,657,2369,692,2364,727,2357,751,2340,774,2318,791,2315,787,2336,770,2352,748,2359,726,2364,691,2365,657,2360,637,2337,620,2303,605,2259,593,2209,583,2099,571,1996,566"/>
<area shape="rect" title=" " alt="" coords="1786,643,1942,669"/>
<area shape="poly" title=" " alt="" coords="1890,574,1874,631,1869,629,1885,573"/>
<area shape="rect" href="datalink_8h.html" title="Handling of messages coming from ground and other A/Cs." alt="" coords="1506,643,1710,669"/>
<area shape="poly" title=" " alt="" coords="1857,576,1657,642,1655,636,1855,571"/>
<area shape="rect" href="pprz__dl_8h.html" title="Datalink using PPRZ protocol." alt="" coords="2151,643,2350,669"/>
<area shape="poly" title=" " alt="" coords="1935,571,2194,637,2192,642,1934,576"/>
<area shape="rect" title=" " alt="" coords="1967,643,2127,669"/>
<area shape="poly" title=" " alt="" coords="1911,571,2017,634,2014,639,1908,576"/>
<area shape="poly" title=" " alt="" coords="1599,671,1554,712,1522,734,1488,752,1434,767,1361,779,1185,797,1006,806,873,811,873,805,1006,801,1184,791,1360,774,1432,762,1486,747,1520,730,1551,708,1596,667"/>
<area shape="rect" title=" " alt="" coords="1556,724,1719,749"/>
<area shape="poly" title=" " alt="" coords="1615,668,1631,710,1626,712,1610,670"/>
<area shape="poly" title=" " alt="" coords="2188,671,1891,724,1890,719,2187,666"/>
<area shape="rect" title=" " alt="" coords="2159,724,2343,749"/>
<area shape="poly" title=" " alt="" coords="2253,669,2253,710,2248,710,2248,669"/>
</map>
</div>
</div>
<p><a href="stabilization__attitude__quat__indi_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a23f862ca823e6fd23fc9c111178be077" id="r_a23f862ca823e6fd23fc9c111178be077"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stabilization__attitude__quat__indi_8c.html#a23f862ca823e6fd23fc9c111178be077">stabilization_attitude_enter</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>)</td></tr>
<tr class="memdesc:a23f862ca823e6fd23fc9c111178be077"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attitude control enter function.  <br /></td></tr>
<tr class="separator:a23f862ca823e6fd23fc9c111178be077"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08849596f1ed44740256f2f07c988f9d" id="r_a08849596f1ed44740256f2f07c988f9d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stabilization__attitude__quat__indi_8c.html#a08849596f1ed44740256f2f07c988f9d">stabilization_attitude_run</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a> in_flight, struct <a class="el" href="structStabilizationSetpoint.html">StabilizationSetpoint</a> *sp, struct <a class="el" href="structThrustSetpoint.html">ThrustSetpoint</a> *thrust, <a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> *cmd)</td></tr>
<tr class="memdesc:a08849596f1ed44740256f2f07c988f9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attitude control run function.  <br /></td></tr>
<tr class="separator:a08849596f1ed44740256f2f07c988f9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>MAVLab Delft University of Technology This control algorithm is Incremental Nonlinear Dynamic Inversion (INDI) </p>
<p>This is an implementation of the publication in the journal of Control Guidance and Dynamics: Adaptive Incremental Nonlinear Dynamic Inversion for Attitude Control of Micro Aerial Vehicles</p>
<p>This is an implementation of the publication in the journal of Control Guidance and Dynamics: Adaptive Incremental Nonlinear Dynamic Inversion for Attitude Control of Micro Aerial Vehicles <a href="http://arc.aiaa.org/doi/pdf/10.2514/1.G001490">http://arc.aiaa.org/doi/pdf/10.2514/1.G001490</a> </p>

<p class="definition">Definition in file <a class="el" href="stabilization__attitude__quat__indi_8c_source.html">stabilization_attitude_quat_indi.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a23f862ca823e6fd23fc9c111178be077" name="a23f862ca823e6fd23fc9c111178be077"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23f862ca823e6fd23fc9c111178be077">&#9670;&#160;</a></span>stabilization_attitude_enter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> stabilization_attitude_enter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attitude control enter function. </p>

<p class="definition">Definition at line <a class="el" href="stabilization__attitude__quat__indi_8c_source.html#l00035">35</a> of file <a class="el" href="stabilization__attitude__quat__indi_8c_source.html">stabilization_attitude_quat_indi.c</a>.</p>

<p class="reference">References <a class="el" href="stabilization__indi_8c_source.html#l00445">stabilization_indi_enter()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="stabilization__attitude__quat__indi_8c_a23f862ca823e6fd23fc9c111178be077_cgraph.png" border="0" usemap="#astabilization__attitude__quat__indi_8c_a23f862ca823e6fd23fc9c111178be077_cgraph" alt=""/></div>
<map name="astabilization__attitude__quat__indi_8c_a23f862ca823e6fd23fc9c111178be077_cgraph" id="astabilization__attitude__quat__indi_8c_a23f862ca823e6fd23fc9c111178be077_cgraph">
<area shape="rect" title="Attitude control enter function." alt="" coords="5,5,165,45"/>
<area shape="rect" href="stabilization__indi_8c.html#a121fd732c65156adade05ffb27fbaf52" title="Function that resets important values upon engaging INDI." alt="" coords="213,5,347,45"/>
<area shape="poly" title=" " alt="" coords="166,23,200,23,200,28,166,28"/>
<area shape="rect" href="group__math__algebra__float.html#ga132a789820c2d2610906e87120af9d18" title="a = 0" alt="" coords="395,13,516,38"/>
<area shape="poly" title=" " alt="" coords="347,23,381,23,381,28,347,28"/>
</map>
</div>

</div>
</div>
<a id="a08849596f1ed44740256f2f07c988f9d" name="a08849596f1ed44740256f2f07c988f9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08849596f1ed44740256f2f07c988f9d">&#9670;&#160;</a></span>stabilization_attitude_run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> stabilization_attitude_run </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a>&#160;</td>
          <td class="paramname"><em>in_flight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structStabilizationSetpoint.html">StabilizationSetpoint</a> *&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structThrustSetpoint.html">ThrustSetpoint</a> *&#160;</td>
          <td class="paramname"><em>thrust</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> *&#160;</td>
          <td class="paramname"><em>cmd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attitude control run function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">in_flight</td><td>true if in flight </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to the stabilization setpoint structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">thrust</td><td>pointer to the thrust setoint structure </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cmd</td><td>pointer to the output command vector </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stabilization__attitude__quat__indi_8c_source.html#l00040">40</a> of file <a class="el" href="stabilization__attitude__quat__indi_8c_source.html">stabilization_attitude_quat_indi.c</a>.</p>

<p class="reference">References <a class="el" href="stabilization__indi_8c_source.html#l00765">stabilization_indi_attitude_run()</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="stabilization__attitude__quat__indi_8c_a08849596f1ed44740256f2f07c988f9d_cgraph.png" border="0" usemap="#astabilization__attitude__quat__indi_8c_a08849596f1ed44740256f2f07c988f9d_cgraph" alt=""/></div>
<map name="astabilization__attitude__quat__indi_8c_a08849596f1ed44740256f2f07c988f9d_cgraph" id="astabilization__attitude__quat__indi_8c_a08849596f1ed44740256f2f07c988f9d_cgraph">
<area shape="rect" title="Attitude control run function." alt="" coords="5,431,193,457"/>
<area shape="rect" href="stabilization__indi_8c.html#aad408aa55ec7cd11f1354db45fa08c39" title=" " alt="" coords="241,424,375,464"/>
<area shape="poly" title=" " alt="" coords="193,441,228,441,228,447,193,447"/>
<area shape="rect" href="group__math__algebra__float.html#ga154c3d68389b47e11fcdace73b1d75a7" title="Composition (multiplication) of two quaternions with normalization." alt="" coords="920,5,1077,45"/>
<area shape="poly" title=" " alt="" coords="308,423,316,367,335,290,349,249,368,208,392,169,421,135,474,93,534,61,599,38,665,23,732,14,796,10,906,12,906,18,796,15,732,19,666,28,600,43,536,66,477,98,425,139,396,173,373,210,354,251,340,292,321,368,314,424"/>
<area shape="rect" href="group__math__algebra__float.html#gac82a112d67cbf3ca72e363790b6518f7" title="Tilt twist decomposition of a quaternion (z axis)" alt="" coords="682,67,833,93"/>
<area shape="poly" title=" " alt="" coords="311,423,323,378,345,320,377,257,397,228,421,202,448,179,478,159,542,128,608,105,668,90,669,96,609,110,544,132,481,164,451,183,425,206,401,231,381,260,350,322,328,380,316,424"/>
<area shape="rect" href="stabilization_8c.html#ae2d2dc9d742cd2ce9038f6ea0ef4b96a" title=" " alt="" coords="439,431,601,457"/>
<area shape="poly" title=" " alt="" coords="375,441,425,441,425,447,375,447"/>
<area shape="rect" href="stabilization_8c.html#ac41f248e6265fdcd678691661a7f3c10" title=" " alt="" coords="445,505,595,530"/>
<area shape="poly" title=" " alt="" coords="367,462,470,498,468,503,366,467"/>
<area shape="rect" href="stabilization_8c.html#af997ac8db0c8ededc57d411e8caa47b2" title=" " alt="" coords="450,217,590,242"/>
<area shape="poly" title=" " alt="" coords="327,422,495,250,499,254,331,426"/>
<area shape="rect" href="stabilization_8c.html#a933a2abf3187537a85e675731038606c" title=" " alt="" coords="451,369,589,394"/>
<area shape="poly" title=" " alt="" coords="374,422,463,395,464,400,376,427"/>
<area shape="rect" href="stabilization_8c.html#a838406e69a08c86fb7f1427aaac5629f" title=" " alt="" coords="685,615,829,641"/>
<area shape="poly" title=" " alt="" coords="329,462,370,502,396,522,424,539,486,566,551,588,672,614,671,619,550,593,484,571,421,544,393,526,367,506,326,466"/>
<area shape="rect" href="stabilization__indi_8c.html#aae752b3cc69a5ad88f6729b3ea17d233" title=" " alt="" coords="453,964,587,1004"/>
<area shape="poly" title=" " alt="" coords="320,464,508,950,503,951,315,465"/>
<area shape="rect" href="group__state__attitude.html#gab5f063833fdba859ce42593112551463" title="Get vehicle body attitude quaternion (float)." alt="" coords="423,1234,617,1259"/>
<area shape="poly" title=" " alt="" coords="314,464,349,688,382,851,425,1015,468,1131,509,1221,504,1223,463,1133,420,1017,377,852,344,689,309,465"/>
<area shape="rect" href="group__math__algebra__float.html#ga2784b8b78ffff045ebb867a4198eb349" title="Composition (multiplication) of two quaternions." alt="" coords="1179,13,1337,38"/>
<area shape="poly" title=" " alt="" coords="1077,23,1166,23,1166,28,1077,28"/>
<area shape="rect" href="group__math__algebra__float.html#ga010393da7c94f197d0161a0071862041" title=" " alt="" coords="1179,70,1337,95"/>
<area shape="poly" title=" " alt="" coords="1078,40,1187,64,1186,70,1077,45"/>
<area shape="rect" href="group__math__algebra__float.html#ga8c87c4af5df3d13c6eb0bd8b8e97721a" title=" " alt="" coords="1165,119,1351,145"/>
<area shape="poly" title=" " alt="" coords="1032,43,1085,74,1149,104,1177,113,1175,118,1147,109,1083,79,1029,48"/>
<area shape="rect" href="group__math__algebra__float.html#gaf58947a2590837aa85077d42d99fb112" title=" " alt="" coords="1416,70,1544,95"/>
<area shape="poly" title=" " alt="" coords="1338,80,1402,80,1402,85,1338,85"/>
<area shape="poly" title=" " alt="" coords="813,65,906,44,907,49,815,70"/>
<area shape="poly" title=" " alt="" coords="833,78,1165,80,1165,85,833,83"/>
<area shape="rect" href="group__math__algebra__float.html#gacd71810b99ae462101d967468d0dcb25" title=" " alt="" coords="933,121,1065,146"/>
<area shape="poly" title=" " alt="" coords="816,90,928,115,927,120,815,95"/>
<area shape="rect" href="group__math__algebra__float.html#gaba11f83e0b801a4b10a5f4b417eca171" title="rotate 3D vector by quaternion." alt="" coords="933,170,1065,195"/>
<area shape="poly" title=" " alt="" coords="826,90,851,102,866,115,876,129,884,143,899,155,920,165,918,170,896,160,880,146,871,132,862,119,848,106,824,95"/>
<area shape="rect" href="group__math__algebra__int.html#ga02ccc32cb7b533e0c7cf18140fb7104e" title=" " alt="" coords="678,467,837,493"/>
<area shape="poly" title=" " alt="" coords="595,503,664,492,665,497,596,508"/>
<area shape="rect" href="stabilization_8c.html#a75c4fbd3740da152c0742c639489c3be" title=" " alt="" coords="692,517,823,542"/>
<area shape="poly" title=" " alt="" coords="596,518,678,523,678,528,595,524"/>
<area shape="rect" href="stabilization_8c.html#a13e6024d01a653e903200b89c72795b4" title=" " alt="" coords="693,566,822,591"/>
<area shape="poly" title=" " alt="" coords="571,527,695,560,694,565,569,533"/>
<area shape="rect" href="group__state__attitude.html#gaa4fb84e753baa3a8812b2bec33df4682" title="Get vehicle body attitude euler angles (float)." alt="" coords="897,517,1100,542"/>
<area shape="poly" title=" " alt="" coords="823,527,884,527,884,532,823,532"/>
<area shape="rect" href="group__state__attitude.html#ga40d15f52fa56369375a61cdf41ed970a" title="Get vehicle body attitude euler angles (int)." alt="" coords="897,566,1100,591"/>
<area shape="poly" title=" " alt="" coords="823,576,884,576,884,581,823,581"/>
<area shape="rect" href="group__math__algebra__float.html#ga0f036208343a764a0c1616264dbe31ca" title="initialises a quaternion to identity" alt="" coords="685,117,829,142"/>
<area shape="poly" title=" " alt="" coords="541,214,596,183,664,151,686,143,688,148,666,156,598,188,543,219"/>
<area shape="rect" href="group__math__algebra__float.html#ga99c8f1ff70a5b638cf87ea816f1756a2" title="quat of euler roation &#39;ZYX&#39;" alt="" coords="680,166,835,191"/>
<area shape="poly" title=" " alt="" coords="580,214,683,192,684,197,581,219"/>
<area shape="rect" href="stabilization__attitude__quat__transformations_8c.html#a875d6ee5cde39474c4ce13dd340cb262" title=" " alt="" coords="910,219,1087,245"/>
<area shape="poly" title=" " alt="" coords="590,227,896,229,896,234,590,232"/>
<area shape="rect" href="stabilization__attitude__quat__transformations_8c.html#acfb3bfa8af4aebad848717cd26aa78ee" title=" " alt="" coords="669,267,845,293"/>
<area shape="poly" title=" " alt="" coords="581,240,684,262,683,267,580,245"/>
<area shape="poly" title=" " alt="" coords="1078,217,1098,205,1109,193,1116,181,1121,156,1127,130,1134,117,1146,105,1165,94,1167,98,1150,109,1139,120,1132,132,1126,157,1121,183,1114,196,1102,209,1080,221"/>
<area shape="poly" title=" " alt="" coords="1070,217,1099,204,1113,193,1122,180,1131,167,1147,155,1163,147,1166,152,1149,160,1135,171,1126,183,1117,196,1101,209,1072,222"/>
<area shape="rect" href="group__math__algebra__float.html#gaf182e4cea0a80278a3b2856331095ff6" title="Composition (multiplication) of two quaternions." alt="" coords="1193,170,1323,195"/>
<area shape="poly" title=" " alt="" coords="1066,217,1179,195,1180,200,1067,222"/>
<area shape="rect" href="group__math__algebra__float.html#ga9698d02fc9515e6638181602aa04536a" title="Quaternion from orientation vector." alt="" coords="1148,219,1368,245"/>
<area shape="poly" title=" " alt="" coords="1088,229,1134,229,1134,235,1088,235"/>
<area shape="rect" href="group__math__algebra__float.html#ga4f32e245bb37ef9fdf43872080f63fbc" title=" " alt="" coords="1185,269,1331,294"/>
<area shape="poly" title=" " alt="" coords="1067,242,1178,263,1177,269,1066,247"/>
<area shape="poly" title=" " alt="" coords="821,265,920,245,921,250,823,270"/>
<area shape="poly" title=" " alt="" coords="589,367,711,341,781,323,848,301,909,276,962,249,964,254,911,281,850,307,782,328,713,346,590,372"/>
<area shape="poly" title=" " alt="" coords="545,366,664,310,703,295,705,300,666,314,547,371"/>
<area shape="rect" href="group__math__algebra__int.html#ga698f3fc474f66517868238f6f6b08fca" title="initialises a quaternion to identity" alt="" coords="683,369,831,394"/>
<area shape="poly" title=" " alt="" coords="590,379,670,379,670,384,590,384"/>
<area shape="rect" href="group__math__algebra__int.html#gab3d8478211bf7da23d2345e8eae43fc8" title="Quaternion from Euler angles." alt="" coords="678,418,837,443"/>
<area shape="poly" title=" " alt="" coords="582,391,683,413,682,418,581,397"/>
<area shape="poly" title=" " alt="" coords="521,963,533,902,558,817,577,772,600,727,629,686,664,650,671,644,674,649,667,654,633,689,605,730,581,774,563,819,538,903,527,964"/>
<area shape="rect" href="autopilot_8c.html#a6b52f0f9cd2cbf420a77029513ea6f35" title="get motors status" alt="" coords="665,1291,849,1317"/>
<area shape="poly" title=" " alt="" coords="531,1003,590,1149,630,1228,649,1258,667,1278,673,1283,670,1287,664,1282,645,1261,625,1231,585,1151,526,1005"/>
<area shape="rect" href="group__math__algebra__float.html#ga51d4918e372875631e37401779d07b83" title="o = a * b" alt="" coords="682,1341,833,1366"/>
<area shape="poly" title=" " alt="" coords="532,1003,608,1191,667,1328,673,1332,669,1336,663,1331,603,1193,527,1005"/>
<area shape="rect" href="group__math__algebra__float.html#gaa33d68b46bc4922889e1fc931c6318fd" title="o = a &#45; b" alt="" coords="700,1390,815,1415"/>
<area shape="poly" title=" " alt="" coords="533,1003,572,1097,620,1222,630,1268,633,1307,642,1342,651,1359,667,1377,688,1390,685,1395,664,1381,647,1362,637,1344,628,1308,625,1269,615,1223,567,1099,528,1005"/>
<area shape="rect" href="group__math__algebra__float.html#ga88cf94d472e697d43c56185cf80a300c" title="a.b" alt="" coords="672,665,843,690"/>
<area shape="poly" title=" " alt="" coords="523,963,538,910,565,839,583,801,606,763,633,729,664,699,670,694,673,699,667,703,637,733,610,766,588,803,569,841,543,911,528,964"/>
<area shape="rect" href="group__math__algebra__float.html#ga132a789820c2d2610906e87120af9d18" title="a = 0" alt="" coords="697,714,818,739"/>
<area shape="poly" title=" " alt="" coords="525,963,543,918,572,860,612,800,636,772,664,748,682,738,685,743,667,753,640,776,616,803,576,863,548,920,530,965"/>
<area shape="rect" href="stabilization__indi_8c.html#aedcd86587b8d94bc799eb14c3b76c4d0" title="Function that tries to get actuator feedback." alt="" coords="685,763,829,789"/>
<area shape="poly" title=" " alt="" coords="529,963,549,927,579,882,618,837,664,798,674,792,677,796,667,802,622,840,583,885,554,930,534,965"/>
<area shape="rect" href="stabilization__indi_8c.html#ad4a81c601235942469d940e7ac5f400e" title="Function that estimates the control effectiveness of each actuator online." alt="" coords="696,813,819,838"/>
<area shape="poly" title=" " alt="" coords="538,962,591,909,626,881,664,855,695,840,698,845,667,860,629,885,595,913,541,966"/>
<area shape="rect" href="group__state__velocity.html#ga4c0971d022697106338036028a62c7fd" title="Get acceleration in Body coordinates (int)." alt="" coords="920,863,1077,889"/>
<area shape="poly" title=" " alt="" coords="564,961,612,942,665,924,790,897,906,882,907,887,791,903,666,929,613,947,566,966"/>
<area shape="rect" href="low__pass__filter_8h.html#aae1acf6d0534bb694b2f7f530ce41650" title="Update second order Butterworth low pass filter state with a new value." alt="" coords="923,913,1074,953"/>
<area shape="poly" title=" " alt="" coords="586,964,665,949,793,937,910,932,910,937,793,942,666,955,587,970"/>
<area shape="rect" href="stabilization__indi_8c.html#a28a3aa7ed36fb838f27a1d7533793ef2" title="Function that sets the u_min, u_max and u_pref if function not elsewhere defined." alt="" coords="689,964,826,1004"/>
<area shape="poly" title=" " alt="" coords="587,981,675,981,675,987,587,987"/>
<area shape="rect" href="group__state__rate.html#gaf712020339c342d39ce714802ab155c0" title="Get vehicle body angular rate (float)." alt="" coords="677,1029,837,1054"/>
<area shape="poly" title=" " alt="" coords="587,997,692,1023,690,1028,586,1003"/>
<area shape="rect" href="stabilization_8c.html#a8879789937e2ebcfac887de04352e6cd" title=" " alt="" coords="697,1078,817,1103"/>
<area shape="poly" title=" " alt="" coords="552,1002,604,1034,666,1064,686,1071,685,1076,664,1069,602,1038,550,1006"/>
<area shape="rect" href="stabilization_8c.html#aff1c34e4df8582150dd77b44ae73a1db" title=" " alt="" coords="691,1127,824,1153"/>
<area shape="poly" title=" " alt="" coords="540,1002,593,1058,628,1088,667,1114,680,1120,678,1125,664,1118,625,1092,589,1062,536,1006"/>
<area shape="rect" href="low__pass__filter_8h.html#a4ea211d4b5976d245c96408ff2d2803f" title="Update first order low pass filter state with a new value." alt="" coords="687,1177,827,1217"/>
<area shape="poly" title=" " alt="" coords="535,1003,585,1081,623,1125,667,1163,677,1169,674,1174,664,1167,619,1129,581,1084,530,1006"/>
<area shape="rect" href="wls__alloc_8c.html#a7fad13367373b7b994de75bdd817d58d" title="active set algorithm for control allocation" alt="" coords="716,1242,799,1267"/>
<area shape="poly" title=" " alt="" coords="530,1003,547,1049,575,1110,615,1173,639,1202,667,1227,684,1238,704,1245,702,1250,682,1242,664,1231,635,1206,610,1177,570,1113,542,1051,525,1005"/>
<area shape="rect" href="group__math__algebra__float.html#ga90298b458dad65af4a4bc5f7491da823" title="a = b" alt="" coords="937,715,1061,741"/>
<area shape="poly" title=" " alt="" coords="821,761,923,740,924,745,823,766"/>
<area shape="poly" title=" " alt="" coords="818,811,848,798,862,786,871,774,880,762,896,750,922,738,924,743,899,754,884,765,875,777,866,790,851,802,820,816"/>
<area shape="rect" href="stabilization__indi_8c.html#a4e43de9dea0dc088a1a920bd7470fe45" title=" " alt="" coords="943,765,1054,790"/>
<area shape="poly" title=" " alt="" coords="818,811,929,788,930,794,819,816"/>
<area shape="rect" href="stabilization__indi_8c.html#a005e2826f380bfa4d2788e2d97d6b1ca" title=" " alt="" coords="933,814,1065,839"/>
<area shape="poly" title=" " alt="" coords="819,823,919,824,919,829,819,828"/>
<area shape="poly" title=" " alt="" coords="819,836,925,858,924,863,818,841"/>
<area shape="poly" title=" " alt="" coords="781,836,834,866,898,898,920,906,918,911,896,902,831,870,778,840"/>
<area shape="rect" href="group__math__orientation__representation.html#ga987757fa07a7edea1006395e35e49473" title="Get vehicle body attitude quaternion (float)." alt="" coords="678,1439,837,1465"/>
<area shape="poly" title=" " alt="" coords="530,1258,549,1292,579,1338,619,1385,667,1426,677,1432,674,1436,664,1430,615,1389,575,1341,545,1295,525,1261"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_01fcd3835fb4e7d9331b722d86291b65.html">sw</a></li><li class="navelem"><a class="el" href="dir_5e9153041680afc3c016fd52fa730b56.html">airborne</a></li><li class="navelem"><a class="el" href="dir_e7d2494544042a787a6ee70a779a5e07.html">firmwares</a></li><li class="navelem"><a class="el" href="dir_e37d355c72eb7c8e5b43c34bdea5a24b.html">rotorcraft</a></li><li class="navelem"><a class="el" href="dir_d1b81cc433edb6118e3c3e3bc7700be0.html">stabilization</a></li><li class="navelem"><a class="el" href="stabilization__attitude__quat__indi_8c.html">stabilization_attitude_quat_indi.c</a></li>
    <li class="footer">Generated on Mon Jul 21 2025 14:32:07 for Paparazzi UAS by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
