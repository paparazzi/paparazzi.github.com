<map id="thdUsbStorage" name="thdUsbStorage">
<area shape="rect" id="Node000001" title=" " alt="" coords="5,867,124,893"/>
<area shape="rect" id="Node000002" href="$usb__msd_8c.html#af6995e11a18decb9478ad798000d60ca" title=" " alt="" coords="207,695,346,721"/>
<area shape="poly" id="edge1_Node000001_Node000002" title=" " alt="" coords="72,866,111,813,139,782,170,754,197,737,225,724,227,728,199,742,174,758,142,786,115,817,76,869"/>
<area shape="rect" id="Node000004" href="$usb__msd_8c.html#a2c07ac4c24d02f56c726c38477e98b01" title=" " alt="" coords="215,769,338,794"/>
<area shape="poly" id="edge3_Node000001_Node000004" title=" " alt="" coords="79,865,118,834,171,803,201,792,203,797,173,808,121,838,82,869"/>
<area shape="rect" id="Node000028" href="$group__mcu__periph.html#ga4c4b3d4809e69cc0f0ee9b2882081caa" title="Reboot the MCU." alt="" coords="227,818,326,843"/>
<area shape="poly" id="edge50_Node000001_Node000028" title=" " alt="" coords="118,865,171,852,213,842,214,848,173,857,119,870"/>
<area shape="rect" id="Node000032" href="$usb__msd_8c.html#a9ad360964cf29c17ffda4847ea88c2f3" title="register connected event source in local event mask" alt="" coords="172,867,381,893"/>
<area shape="poly" id="edge54_Node000001_Node000032" title=" " alt="" coords="124,877,158,877,158,883,124,883"/>
<area shape="rect" id="Node000033" href="$main__chibios_8c.html#ab187dc37cfd9ba19180b8d99905dd2e3" title="Terminate all autopilot threads Wait until proper stop." alt="" coords="183,917,370,957"/>
<area shape="poly" id="edge55_Node000001_Node000033" title=" " alt="" coords="113,890,190,911,188,916,112,895"/>
<area shape="rect" id="Node000034" href="$sdio__arch_8c.html#a2c7a19d188134c5cc92b8384d9c5328e" title="Connect a SD card on SDIO peripheral." alt="" coords="223,982,330,1007"/>
<area shape="poly" id="edge56_Node000001_Node000034" title=" " alt="" coords="80,891,119,929,145,950,173,967,211,981,209,986,171,972,142,954,115,933,76,895"/>
<area shape="rect" id="Node000035" href="$sdlog__chibios_8c.html#a9f9b049b6368d8306e16bad97dd30b91" title=" " alt="" coords="201,1031,353,1057"/>
<area shape="poly" id="edge57_Node000001_Node000035" title=" " alt="" coords="74,892,111,952,139,987,174,1016,189,1025,187,1030,170,1021,135,991,106,955,70,894"/>
<area shape="rect" id="Node000003" href="$usb__msd_8c.html#aaa1c1d04bba912b3ae2b6806f8ed4fdc" title="Stops a USB mass storage driver." alt="" coords="455,695,534,721"/>
<area shape="poly" id="edge2_Node000002_Node000003" title=" " alt="" coords="346,705,442,705,442,711,346,711"/>
<area shape="rect" id="Node000005" href="$usb__msd_8c.html#a9030d48fbe74f8689d41984bd08edf51" title="Initializse a USB mass storage driver." alt="" coords="459,794,530,819"/>
<area shape="poly" id="edge4_Node000004_Node000005" title=" " alt="" coords="339,786,446,798,446,804,338,791"/>
<area shape="rect" id="Node000007" href="$usb__msd_8c.html#a7889b266f8bf0e0063afd3546cd02439" title="Starts a USB mass storage driver." alt="" coords="454,745,535,770"/>
<area shape="poly" id="edge6_Node000004_Node000007" title=" " alt="" coords="338,772,440,761,440,766,339,777"/>
<area shape="rect" id="Node000006" href="$usb__msd_8c.html#a218498e8fe29b8470ad71b25f61ca783" title=" " alt="" coords="624,794,755,819"/>
<area shape="poly" id="edge5_Node000005_Node000006" title=" " alt="" coords="530,804,610,804,610,809,530,809"/>
<area shape="rect" id="Node000008" href="$usb__msd_8c.html#afae8af1112e8706a2abac1033b431d1a" title="Mass storage thread that processes commands." alt="" coords="608,745,771,770"/>
<area shape="poly" id="edge7_Node000007_Node000008" title=" " alt="" coords="536,755,594,755,594,760,536,760"/>
<area shape="rect" id="Node000009" href="$usb__msd_8c.html#aae86072280e1c9c74809a1657712bc8b" title="Reads a newly received command block." alt="" coords="819,370,1019,395"/>
<area shape="poly" id="edge8_Node000008_Node000009" title=" " alt="" coords="696,743,900,406,905,408,701,746"/>
<area shape="rect" id="Node000012" href="$usb__msd_8c.html#a9eccc1c15eed8fd3b53c7692c2b359b1" title="Changes the SCSI sense information." alt="" coords="1309,530,1464,555"/>
<area shape="poly" id="edge45_Node000008_Node000012" title=" " alt="" coords="741,767,844,786,910,793,980,795,1054,790,1126,778,1196,755,1260,719,1272,708,1280,697,1287,673,1293,645,1307,615,1331,586,1356,563,1360,567,1335,590,1312,617,1298,647,1293,674,1285,699,1276,712,1263,724,1198,759,1128,783,1054,796,980,800,909,798,844,791,740,773"/>
<area shape="rect" id="Node000019" href="$usb__msd_8c.html#a3b8762ec274b71960bc00505e3668ed5" title="Wait until the end&#45;point interrupt handler has been called." alt="" coords="1320,682,1453,707"/>
<area shape="poly" id="edge49_Node000008_Node000019" title=" " alt="" coords="743,768,772,779,786,788,796,798,805,807,820,814,942,849,993,860,1042,864,1090,862,1141,853,1197,837,1260,814,1294,794,1324,769,1368,717,1372,720,1328,773,1297,799,1262,818,1199,842,1142,858,1091,867,1042,869,993,865,941,855,818,818,802,811,792,802,783,793,769,784,741,773"/>
<area shape="rect" id="Node000027" href="$usb__msd_8c.html#aa1850fad33df3daf4aee4757e87be5b3" title="Waits for a new command block." alt="" coords="1073,669,1255,709"/>
<area shape="poly" id="edge46_Node000008_Node000027" title=" " alt="" coords="770,743,1059,702,1059,707,771,748"/>
<area shape="rect" id="Node000010" href="$usb__msd_8c.html#a48c18c077f1b99cd4f0530f8b02007fc" title="Processes an INQUIRY SCSI command." alt="" coords="1069,313,1259,338"/>
<area shape="poly" id="edge9_Node000009_Node000010" title=" " alt="" coords="973,367,1095,339,1096,344,974,373"/>
<area shape="poly" id="edge42_Node000009_Node000012" title=" " alt="" coords="926,395,941,438,969,497,989,528,1011,558,1038,584,1068,604,1118,624,1161,627,1206,618,1261,604,1311,585,1355,561,1357,565,1314,590,1262,609,1207,624,1161,632,1117,629,1065,609,1034,588,1007,561,984,531,965,500,936,440,921,396"/>
<area shape="rect" id="Node000013" href="$usb__msd_8c.html#a0074e59868c631d2f665ee9d32e316cd" title="Starts sending data." alt="" coords="1312,255,1461,281"/>
<area shape="poly" id="edge43_Node000009_Node000013" title=" " alt="" coords="926,368,946,338,977,300,1018,262,1066,234,1102,222,1139,216,1177,215,1215,218,1285,231,1342,248,1340,253,1284,236,1214,223,1177,221,1140,222,1103,227,1068,238,1021,266,981,304,950,341,930,371"/>
<area shape="rect" id="Node000014" href="$usb__msd_8c.html#a751915d3ec433652970157ec1602eab4" title="Processes a MODE_SENSE_6 SCSI command." alt="" coords="1073,248,1255,288"/>
<area shape="poly" id="edge13_Node000009_Node000014" title=" " alt="" coords="938,368,995,334,1066,298,1083,290,1085,295,1068,302,997,339,941,372"/>
<area shape="rect" id="Node000015" href="$usb__msd_8c.html#a8ebbd37f54610b397906cd1166e978b3" title="Processes a READ_CAPACITY_10 SCSI command." alt="" coords="1077,69,1251,109"/>
<area shape="poly" id="edge16_Node000009_Node000015" title=" " alt="" coords="921,369,937,322,965,255,1008,183,1034,149,1065,119,1072,114,1075,119,1068,123,1038,152,1012,186,970,257,942,324,926,370"/>
<area shape="rect" id="Node000017" href="$usb__msd_8c.html#accb6f6c3de04140ad134fa859874f48e" title="Processes a READ_FORMAT_CAPACITIES SCSI command." alt="" coords="1077,5,1251,45"/>
<area shape="poly" id="edge20_Node000009_Node000017" title=" " alt="" coords="919,369,931,313,957,229,976,182,1000,136,1030,93,1065,55,1070,51,1074,55,1068,59,1034,97,1005,139,981,185,962,231,936,314,925,370"/>
<area shape="rect" id="Node000018" href="$usb__msd_8c.html#adcf34e8664fce2f0676aa631a73e53f3" title="Processes a REQUEST_SENSE SCSI command." alt="" coords="1067,427,1261,467"/>
<area shape="poly" id="edge24_Node000009_Node000018" title=" " alt="" coords="969,393,1074,420,1072,426,968,398"/>
<area shape="poly" id="edge44_Node000009_Node000019" title=" " alt="" coords="923,395,931,457,953,548,972,597,997,644,1029,685,1068,719,1102,736,1138,745,1176,748,1214,745,1286,730,1345,710,1346,715,1288,735,1214,751,1176,753,1137,750,1100,741,1065,724,1025,689,992,646,967,599,948,550,926,458,918,396"/>
<area shape="rect" id="Node000021" href="$usb__msd_8c.html#adde97b16d8281aeca3a016ce27fd4c24" title="Processes a SEND_DIAGNOSTIC SCSI command." alt="" coords="1075,555,1253,595"/>
<area shape="poly" id="edge28_Node000009_Node000021" title=" " alt="" coords="930,394,983,463,1023,504,1068,540,1078,546,1075,551,1065,545,1019,508,979,467,926,397"/>
<area shape="rect" id="Node000022" href="$usb__msd_8c.html#a7da9e934287148f0383b353ea8418318" title="Processes a READ_WRITE_10 SCSI command." alt="" coords="1076,363,1252,403"/>
<area shape="poly" id="edge30_Node000009_Node000022" title=" " alt="" coords="1019,380,1062,380,1062,385,1019,385"/>
<area shape="rect" id="Node000025" href="$usb__msd_8c.html#a9af0f1fa6a97cdd8d2c117fc7671aea0" title="Processes a START_STOP_UNIT SCSI command." alt="" coords="1076,133,1252,173"/>
<area shape="poly" id="edge38_Node000009_Node000025" title=" " alt="" coords="924,368,944,334,976,286,1016,235,1065,190,1085,177,1088,182,1068,194,1020,239,980,289,949,336,929,371"/>
<area shape="rect" id="Node000026" href="$usb__msd_8c.html#ad782b2c1e3b1a66863b39eab0a301b2d" title="Processes a TEST_UNIT_READY SCSI command." alt="" coords="1079,491,1249,531"/>
<area shape="poly" id="edge39_Node000009_Node000026" title=" " alt="" coords="938,393,994,433,1068,476,1084,483,1081,488,1065,481,991,438,935,398"/>
<area shape="rect" id="Node000011" href="$usb__msd_8c.html#ad07c9360f29e619d5e4d4e9e4b28cb3d" title=" " alt="" coords="1317,313,1456,338"/>
<area shape="poly" id="edge10_Node000010_Node000011" title=" " alt="" coords="1260,323,1303,323,1303,328,1260,328"/>
<area shape="poly" id="edge11_Node000010_Node000012" title=" " alt="" coords="1239,336,1263,349,1290,378,1321,424,1374,516,1370,519,1317,426,1286,381,1260,353,1236,340"/>
<area shape="poly" id="edge12_Node000010_Node000013" title=" " alt="" coords="1213,310,1323,282,1324,287,1215,315"/>
<area shape="poly" id="edge14_Node000014_Node000011" title=" " alt="" coords="1243,285,1324,307,1322,312,1242,291"/>
<area shape="poly" id="edge15_Node000014_Node000013" title=" " alt="" coords="1255,265,1298,265,1298,271,1255,271"/>
<area shape="poly" id="edge17_Node000015_Node000011" title=" " alt="" coords="1248,107,1263,119,1279,141,1287,163,1289,206,1290,248,1297,269,1311,290,1328,304,1325,308,1307,294,1292,271,1285,249,1284,206,1282,164,1275,144,1259,123,1245,112"/>
<area shape="poly" id="edge18_Node000015_Node000013" title=" " alt="" coords="1241,107,1263,119,1298,148,1329,181,1373,242,1369,245,1324,184,1294,152,1260,124,1238,112"/>
<area shape="rect" id="Node000016" href="$usb__msd_8c.html#a2c58af6d9b07129480e5c5c8f47a588a" title="Byte&#45;swap a 32 bits unsigned integer." alt="" coords="1335,77,1439,102"/>
<area shape="poly" id="edge19_Node000015_Node000016" title=" " alt="" coords="1252,87,1320,87,1320,92,1252,92"/>
<area shape="poly" id="edge21_Node000017_Node000011" title=" " alt="" coords="1249,43,1263,56,1283,86,1292,116,1293,145,1289,174,1286,203,1286,231,1293,260,1311,290,1327,304,1324,308,1307,294,1288,262,1281,232,1281,202,1284,173,1287,145,1287,116,1279,88,1259,59,1246,47"/>
<area shape="poly" id="edge22_Node000017_Node000013" title=" " alt="" coords="1244,43,1263,55,1291,89,1323,140,1376,241,1371,244,1318,142,1287,92,1260,59,1241,48"/>
<area shape="poly" id="edge23_Node000017_Node000016" title=" " alt="" coords="1235,43,1329,70,1328,75,1234,48"/>
<area shape="poly" id="edge25_Node000018_Node000013" title=" " alt="" coords="1243,424,1260,413,1271,399,1278,386,1283,357,1289,328,1295,313,1307,298,1326,285,1329,289,1311,302,1300,316,1294,330,1289,358,1283,387,1276,402,1263,417,1247,429"/>
<area shape="poly" id="edge26_Node000018_Node000019" title=" " alt="" coords="1248,465,1263,477,1280,501,1288,525,1289,571,1289,618,1296,640,1311,664,1323,673,1319,677,1307,667,1291,643,1283,618,1283,572,1283,526,1275,503,1259,480,1245,469"/>
<area shape="rect" id="Node000020" href="$usb__msd_8c.html#a24a678ea6bcd105c46f97ccc813d146b" title=" " alt="" coords="1512,682,1655,707"/>
<area shape="poly" id="edge27_Node000019_Node000020" title=" " alt="" coords="1454,692,1498,692,1498,697,1454,697"/>
<area shape="poly" id="edge29_Node000021_Node000012" title=" " alt="" coords="1253,559,1295,553,1296,558,1253,565"/>
<area shape="poly" id="edge31_Node000022_Node000011" title=" " alt="" coords="1242,360,1322,339,1324,344,1243,365"/>
<area shape="poly" id="edge32_Node000022_Node000012" title=" " alt="" coords="1240,400,1263,412,1296,437,1325,465,1370,517,1366,521,1321,468,1292,441,1260,417,1237,405"/>
<area shape="poly" id="edge34_Node000022_Node000013" title=" " alt="" coords="1235,360,1260,347,1274,335,1283,323,1293,311,1308,298,1333,284,1335,289,1311,302,1297,314,1288,327,1278,339,1263,352,1237,365"/>
<area shape="poly" id="edge37_Node000022_Node000016" title=" " alt="" coords="1241,360,1260,347,1280,323,1289,300,1295,273,1307,242,1370,113,1375,116,1312,244,1300,275,1294,301,1284,326,1263,351,1244,365"/>
<area shape="poly" id="edge35_Node000022_Node000019" title=" " alt="" coords="1249,401,1263,413,1284,445,1293,477,1293,509,1289,540,1285,570,1284,601,1292,632,1311,664,1322,673,1318,677,1307,667,1287,634,1279,602,1279,570,1283,539,1288,508,1287,478,1279,447,1259,416,1246,405"/>
<area shape="rect" id="Node000023" href="$usb__msd_8c.html#a9f5b2ca0047c96b2b13cb1d89ba3fc73" title="Starts receiving data." alt="" coords="1315,629,1458,654"/>
<area shape="poly" id="edge33_Node000022_Node000023" title=" " alt="" coords="1248,401,1263,413,1278,432,1287,450,1293,487,1296,524,1301,544,1312,565,1334,594,1359,618,1356,622,1330,598,1307,568,1296,546,1291,525,1287,487,1282,452,1274,435,1259,417,1244,405"/>
<area shape="rect" id="Node000024" href="$usb__msd_8c.html#a4676adea8c569b096bc971c208256e61" title="Byte&#45;swap a 16 bits unsigned integer." alt="" coords="1335,370,1439,395"/>
<area shape="poly" id="edge36_Node000022_Node000024" title=" " alt="" coords="1252,380,1321,380,1321,385,1252,385"/>
<area shape="poly" id="edge40_Node000026_Node000011" title=" " alt="" coords="1243,488,1260,477,1272,462,1278,448,1283,418,1288,387,1295,371,1307,355,1325,342,1328,346,1311,359,1300,374,1293,389,1289,419,1283,450,1276,465,1263,481,1247,493"/>
<area shape="poly" id="edge41_Node000026_Node000012" title=" " alt="" coords="1250,520,1296,527,1295,532,1249,526"/>
<area shape="poly" id="edge47_Node000027_Node000011" title=" " alt="" coords="1197,667,1230,640,1259,605,1274,571,1280,539,1277,478,1275,449,1277,419,1287,388,1307,356,1322,342,1326,346,1311,359,1292,390,1282,420,1280,449,1283,478,1285,539,1279,572,1264,608,1234,644,1200,671"/>
<area shape="poly" id="edge48_Node000027_Node000023" title=" " alt="" coords="1255,667,1313,654,1314,660,1256,672"/>
<area shape="rect" id="Node000029" href="$chibios_2mcu__arch_8c.html#a1296057f718ade4eeb9674b9c3550cb8" title="Put MCU into deep sleep mode." alt="" coords="429,843,560,869"/>
<area shape="poly" id="edge51_Node000028_Node000029" title=" " alt="" coords="327,834,416,844,415,850,326,839"/>
<area shape="rect" id="Node000030" href="$stm32_2mcu__periph_2i2c__arch_8c.html#a6b9c651bba2afc97b6578902bae95012" title=" " alt="" coords="636,843,743,869"/>
<area shape="poly" id="edge52_Node000029_Node000030" title=" " alt="" coords="560,853,622,853,622,859,560,859"/>
<area shape="rect" id="Node000031" href="$stm32_2mcu__periph_2i2c__arch_8c.html#a5e587d51e0e0c291bb20ef0f9b5e8e76" title=" " alt="" coords="637,893,741,918"/>
<area shape="poly" id="edge53_Node000029_Node000031" title=" " alt="" coords="546,866,626,887,624,892,545,871"/>
<area shape="rect" id="Node000036" href="$sdLog_8c.html#a03326adcb90b1cc07d684a6abaff2051" title="unmount filesystem" alt="" coords="445,1031,544,1057"/>
<area shape="poly" id="edge58_Node000035_Node000036" title=" " alt="" coords="353,1041,431,1041,431,1047,353,1047"/>
</map>
