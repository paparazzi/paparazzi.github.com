<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Paparazzi UAS: sw/airborne/firmwares/rotorcraft/guidance/guidance_v_adapt.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="penguin_icon.png"/></td>
  <td id="projectalign">
   <div id="projectname">Paparazzi UAS<span id="projectnumber">&#160;v7.0_unstable</span>
   </div>
   <div id="projectbrief">Paparazzi is a free software Unmanned Aircraft System.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('guidance__v__adapt_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">guidance_v_adapt.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Adaptation block of the vertical guidance.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="guidance__v__adapt_8h_source.html">firmwares/rotorcraft/guidance/guidance_v_adapt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="paparazzi_8h_source.html">paparazzi.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pprz__algebra__int_8h_source.html">math/pprz_algebra_int.h</a>&quot;</code><br />
<code>#include &quot;generated/airframe.h&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for guidance_v_adapt.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="guidance__v__adapt_8c__incl.png" border="0" usemap="#asw_2airborne_2firmwares_2rotorcraft_2guidance_2guidance__v__adapt_8c" alt=""/></div>
<map name="asw_2airborne_2firmwares_2rotorcraft_2guidance_2guidance__v__adapt_8c" id="asw_2airborne_2firmwares_2rotorcraft_2guidance_2guidance__v__adapt_8c">
<area shape="rect" title="Adaptation block of the vertical guidance." alt="" coords="239,5,406,60"/>
<area shape="rect" href="guidance__v__adapt_8h.html" title="Adaptation block of the vertical guidance." alt="" coords="5,108,168,163"/>
<area shape="poly" title=" " alt="" coords="262,62,162,105,160,100,260,58"/>
<area shape="rect" href="paparazzi_8h.html" title=" " alt="" coords="193,123,290,148"/>
<area shape="poly" title=" " alt="" coords="303,62,261,114,257,110,299,59"/>
<area shape="rect" href="pprz__algebra__int_8h.html" title="Paparazzi fixed point algebra." alt="" coords="314,123,494,148"/>
<area shape="poly" title=" " alt="" coords="346,59,388,110,384,114,342,62"/>
<area shape="rect" title=" " alt="" coords="519,123,679,148"/>
<area shape="poly" title=" " alt="" coords="395,58,555,115,554,120,394,63"/>
<area shape="rect" title=" " alt="" coords="309,284,363,309"/>
<area shape="poly" title=" " alt="" coords="98,162,116,199,129,218,144,234,180,257,220,272,260,283,295,289,294,294,259,288,219,278,178,261,141,238,124,221,111,202,93,164"/>
<area shape="rect" title=" " alt="" coords="154,211,241,236"/>
<area shape="poly" title=" " alt="" coords="238,149,212,199,207,197,233,147"/>
<area shape="poly" title=" " alt="" coords="379,150,340,175,322,192,308,212,304,227,306,242,320,272,315,274,301,243,299,226,303,210,318,188,336,170,376,146"/>
<area shape="rect" href="pprz__algebra_8h.html" title="Paparazzi generic algebra macros." alt="" coords="494,211,650,236"/>
<area shape="poly" title=" " alt="" coords="428,146,538,202,536,207,425,151"/>
<area shape="rect" href="pprz__trig__int_8h.html" title="Paparazzi fixed point trig functions." alt="" coords="317,211,470,236"/>
<area shape="poly" title=" " alt="" coords="405,149,399,197,394,196,400,148"/>
<area shape="rect" title=" " alt="" coords="674,211,745,236"/>
<area shape="poly" title=" " alt="" coords="446,146,661,206,660,211,444,151"/>
<area shape="poly" title=" " alt="" coords="535,239,377,286,376,281,533,233"/>
<area shape="rect" title=" " alt="" coords="450,284,513,309"/>
<area shape="poly" title=" " alt="" coords="559,238,509,277,505,273,556,234"/>
<area shape="rect" title=" " alt="" coords="537,284,607,309"/>
<area shape="poly" title=" " alt="" coords="575,236,575,270,569,270,569,236"/>
<area shape="rect" title=" " alt="" coords="631,284,699,309"/>
<area shape="poly" title=" " alt="" coords="589,234,641,273,638,278,585,238"/>
<area shape="poly" title=" " alt="" coords="386,238,356,275,352,271,382,235"/>
</map>
</div>
</div>
<p><a href="guidance__v__adapt_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a491f930739b79d2e901c22ff7bf6b255" id="r_a491f930739b79d2e901c22ff7bf6b255"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="guidance__v__adapt_8c.html#a491f930739b79d2e901c22ff7bf6b255">GUIDANCE_V_ADAPT_INITIAL_HOVER_THROTTLE</a>&#160;&#160;&#160;0.3</td></tr>
<tr class="memdesc:a491f930739b79d2e901c22ff7bf6b255"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initial hover throttle as factor of MAX_PPRZ.  <br /></td></tr>
<tr class="separator:a491f930739b79d2e901c22ff7bf6b255"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1f11769fc0bd070f5b87c0b57a9b9a4" id="r_ad1f11769fc0bd070f5b87c0b57a9b9a4"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="guidance__v__adapt_8c.html#ad1f11769fc0bd070f5b87c0b57a9b9a4">GUIDANCE_V_ADAPT_MIN_HOVER_THROTTLE</a>&#160;&#160;&#160;0.2</td></tr>
<tr class="memdesc:ad1f11769fc0bd070f5b87c0b57a9b9a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum hover throttle as factor of MAX_PPRZ.  <br /></td></tr>
<tr class="separator:ad1f11769fc0bd070f5b87c0b57a9b9a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a414ba0963f008cd5ff06c4bfbeac2ecc" id="r_a414ba0963f008cd5ff06c4bfbeac2ecc"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="guidance__v__adapt_8c.html#a414ba0963f008cd5ff06c4bfbeac2ecc">GUIDANCE_V_ADAPT_MAX_HOVER_THROTTLE</a>&#160;&#160;&#160;0.75</td></tr>
<tr class="memdesc:a414ba0963f008cd5ff06c4bfbeac2ecc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum hover throttle as factor of MAX_PPRZ.  <br /></td></tr>
<tr class="separator:a414ba0963f008cd5ff06c4bfbeac2ecc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3720e5c2d1efce3423181db33b9f1ef5" id="r_a3720e5c2d1efce3423181db33b9f1ef5"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="guidance__v__adapt_8c.html#a3720e5c2d1efce3423181db33b9f1ef5">GUIDANCE_V_ADAPT_NOISE_FACTOR</a>&#160;&#160;&#160;1.0</td></tr>
<tr class="memdesc:a3720e5c2d1efce3423181db33b9f1ef5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adapt noise factor.  <br /></td></tr>
<tr class="separator:a3720e5c2d1efce3423181db33b9f1ef5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d62700c8e938a85d29186643e308600" id="r_a4d62700c8e938a85d29186643e308600"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="guidance__v__adapt_8c.html#a4d62700c8e938a85d29186643e308600">GUIDANCE_V_ADAPT_MAX_ACCEL</a>&#160;&#160;&#160;4.0</td></tr>
<tr class="memdesc:a4d62700c8e938a85d29186643e308600"><td class="mdescLeft">&#160;</td><td class="mdescRight">Filter is not fed if accel values are more than +/- MAX_ACCEL.  <br /></td></tr>
<tr class="separator:a4d62700c8e938a85d29186643e308600"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad86e4967e4f8918981e037e48aed1ad1" id="r_ad86e4967e4f8918981e037e48aed1ad1"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="guidance__v__adapt_8c.html#ad86e4967e4f8918981e037e48aed1ad1">GUIDANCE_V_ADAPT_MAX_CMD</a>&#160;&#160;&#160;0.9</td></tr>
<tr class="memdesc:ad86e4967e4f8918981e037e48aed1ad1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Filter is not fed if command values are out of a % of 0/MAX_PPRZ.  <br /></td></tr>
<tr class="separator:ad86e4967e4f8918981e037e48aed1ad1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0b57a6956b778c5d67dc08034f8efef" id="r_ab0b57a6956b778c5d67dc08034f8efef"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="guidance__v__adapt_8c.html#ab0b57a6956b778c5d67dc08034f8efef">GUIDANCE_V_ADAPT_MIN_CMD</a>&#160;&#160;&#160;0.1</td></tr>
<tr class="separator:ab0b57a6956b778c5d67dc08034f8efef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ae8bdb9d24e48209cd4a6f9bd58b288" id="r_a5ae8bdb9d24e48209cd4a6f9bd58b288"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="guidance__v__adapt_8c.html#a5ae8bdb9d24e48209cd4a6f9bd58b288">GV_ADAPT_SYS_NOISE_F</a>&#160;&#160;&#160;0.00005</td></tr>
<tr class="separator:a5ae8bdb9d24e48209cd4a6f9bd58b288"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8009c4c8d2bf9ea4150743b0ee52d75a" id="r_a8009c4c8d2bf9ea4150743b0ee52d75a"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="guidance__v__adapt_8c.html#a8009c4c8d2bf9ea4150743b0ee52d75a">GV_ADAPT_SYS_NOISE</a>&#160;&#160;&#160;<a class="el" href="group__math__algebra__int.html#gaa6bb9343d0a10947a0824bc67cf4a47d">BFP_OF_REAL</a>(<a class="el" href="guidance__v__adapt_8c.html#a5ae8bdb9d24e48209cd4a6f9bd58b288">GV_ADAPT_SYS_NOISE_F</a>, <a class="el" href="guidance__v__adapt_8h.html#ae48506ef71b097cbc23c4a1eff14fc8d">GV_ADAPT_P_FRAC</a>)</td></tr>
<tr class="separator:a8009c4c8d2bf9ea4150743b0ee52d75a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b327bb3914e66db3fb2a0a1d5b8fbf8" id="r_a2b327bb3914e66db3fb2a0a1d5b8fbf8"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="guidance__v__adapt_8c.html#a2b327bb3914e66db3fb2a0a1d5b8fbf8">GV_ADAPT_MEAS_NOISE_HOVER_F</a>&#160;&#160;&#160;(50.0*<a class="el" href="guidance__v__adapt_8c.html#a3720e5c2d1efce3423181db33b9f1ef5">GUIDANCE_V_ADAPT_NOISE_FACTOR</a>)</td></tr>
<tr class="separator:a2b327bb3914e66db3fb2a0a1d5b8fbf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab71b7758a98d0f9f24db0f4ea5cb5127" id="r_ab71b7758a98d0f9f24db0f4ea5cb5127"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="guidance__v__adapt_8c.html#ab71b7758a98d0f9f24db0f4ea5cb5127">GV_ADAPT_MEAS_NOISE_HOVER</a>&#160;&#160;&#160;<a class="el" href="group__math__algebra__int.html#gaa6bb9343d0a10947a0824bc67cf4a47d">BFP_OF_REAL</a>(<a class="el" href="guidance__v__adapt_8c.html#a2b327bb3914e66db3fb2a0a1d5b8fbf8">GV_ADAPT_MEAS_NOISE_HOVER_F</a>, <a class="el" href="guidance__v__adapt_8h.html#ae48506ef71b097cbc23c4a1eff14fc8d">GV_ADAPT_P_FRAC</a>)</td></tr>
<tr class="separator:ab71b7758a98d0f9f24db0f4ea5cb5127"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7375d670f4b38044453271776694d0a9" id="r_a7375d670f4b38044453271776694d0a9"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="guidance__v__adapt_8c.html#a7375d670f4b38044453271776694d0a9">GV_ADAPT_MEAS_NOISE_OF_ZD</a>&#160;&#160;&#160;(100.0*<a class="el" href="guidance__v__adapt_8c.html#a3720e5c2d1efce3423181db33b9f1ef5">GUIDANCE_V_ADAPT_NOISE_FACTOR</a>)</td></tr>
<tr class="separator:a7375d670f4b38044453271776694d0a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab14ff80550f83821205d485e6c3e44ce" id="r_ab14ff80550f83821205d485e6c3e44ce"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="guidance__v__adapt_8c.html#ab14ff80550f83821205d485e6c3e44ce">GV_ADAPT_P0_F</a>&#160;&#160;&#160;0.1</td></tr>
<tr class="separator:ab14ff80550f83821205d485e6c3e44ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51fba05eb418475b476fbadc2534827c" id="r_a51fba05eb418475b476fbadc2534827c"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="guidance__v__adapt_8c.html#a51fba05eb418475b476fbadc2534827c">K_FRAC</a>&#160;&#160;&#160;12</td></tr>
<tr class="separator:a51fba05eb418475b476fbadc2534827c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a14968f81dc98fe21f0f996ceace5fb5d" id="r_a14968f81dc98fe21f0f996ceace5fb5d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="guidance__v__adapt_8c.html#a14968f81dc98fe21f0f996ceace5fb5d">gv_adapt_init</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>)</td></tr>
<tr class="separator:a14968f81dc98fe21f0f996ceace5fb5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a108e823687eddd24bff053ea9a03943f" id="r_a108e823687eddd24bff053ea9a03943f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="guidance__v__adapt_8c.html#a108e823687eddd24bff053ea9a03943f">gv_adapt_run</a> (<a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">zdd_meas</a>, <a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">thrust_applied</a>, <a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> zd_ref)</td></tr>
<tr class="memdesc:a108e823687eddd24bff053ea9a03943f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adaptation function.  <br /></td></tr>
<tr class="separator:a108e823687eddd24bff053ea9a03943f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab9714ec507d12d067e58b9498784e4b3" id="r_ab9714ec507d12d067e58b9498784e4b3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="guidance__v__adapt_8c.html#ab9714ec507d12d067e58b9498784e4b3">gv_adapt_X</a></td></tr>
<tr class="memdesc:ab9714ec507d12d067e58b9498784e4b3"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="group__state__interface.html#structState" title="Structure holding vehicle state data.">State</a> of the estimator.  <br /></td></tr>
<tr class="separator:ab9714ec507d12d067e58b9498784e4b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a397e893a9ab16d6efe7637576c61dd00" id="r_a397e893a9ab16d6efe7637576c61dd00"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="guidance__v__adapt_8c.html#a397e893a9ab16d6efe7637576c61dd00">gv_adapt_P</a></td></tr>
<tr class="memdesc:a397e893a9ab16d6efe7637576c61dd00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Covariance.  <br /></td></tr>
<tr class="separator:a397e893a9ab16d6efe7637576c61dd00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9e0f391f1a1e53a185ce28a45e31090" id="r_ac9e0f391f1a1e53a185ce28a45e31090"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="guidance__v__adapt_8c.html#ac9e0f391f1a1e53a185ce28a45e31090">gv_adapt_Xmeas</a></td></tr>
<tr class="memdesc:ac9e0f391f1a1e53a185ce28a45e31090"><td class="mdescLeft">&#160;</td><td class="mdescRight">Measurement.  <br /></td></tr>
<tr class="separator:ac9e0f391f1a1e53a185ce28a45e31090"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a606488180af5af850b60949fe7854398" id="r_a606488180af5af850b60949fe7854398"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">static</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="guidance__v__adapt_8c.html#a606488180af5af850b60949fe7854398">gv_adapt_P0</a> = <a class="el" href="group__math__algebra__int.html#gaa6bb9343d0a10947a0824bc67cf4a47d">BFP_OF_REAL</a>(<a class="el" href="guidance__v__adapt_8c.html#ab14ff80550f83821205d485e6c3e44ce">GV_ADAPT_P0_F</a>, <a class="el" href="guidance__v__adapt_8h.html#ae48506ef71b097cbc23c4a1eff14fc8d">GV_ADAPT_P_FRAC</a>)</td></tr>
<tr class="separator:a606488180af5af850b60949fe7854398"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa810b91c591c30594a11b3100b09f73c" id="r_aa810b91c591c30594a11b3100b09f73c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">static</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="guidance__v__adapt_8c.html#aa810b91c591c30594a11b3100b09f73c">gv_adapt_X0</a></td></tr>
<tr class="separator:aa810b91c591c30594a11b3100b09f73c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Adaptation block of the vertical guidance. </p>
<p>This is a dimension one kalman filter estimating the ratio of vertical acceleration over thrust command ( ~ inverse of the mass ) needed by the invert dynamic model to produce a nominal command. </p>

<p class="definition">Definition in file <a class="el" href="guidance__v__adapt_8c_source.html">guidance_v_adapt.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a491f930739b79d2e901c22ff7bf6b255" name="a491f930739b79d2e901c22ff7bf6b255"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a491f930739b79d2e901c22ff7bf6b255">&#9670;&#160;</a></span>GUIDANCE_V_ADAPT_INITIAL_HOVER_THROTTLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a> GUIDANCE_V_ADAPT_INITIAL_HOVER_THROTTLE&#160;&#160;&#160;0.3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initial hover throttle as factor of MAX_PPRZ. </p>
<p>Should be a value between <a class="el" href="guidance__v__adapt_8c.html#ad1f11769fc0bd070f5b87c0b57a9b9a4" title="Minimum hover throttle as factor of MAX_PPRZ.">GUIDANCE_V_ADAPT_MIN_HOVER_THROTTLE</a> and <a class="el" href="guidance__v__adapt_8c.html#a414ba0963f008cd5ff06c4bfbeac2ecc" title="Maximum hover throttle as factor of MAX_PPRZ.">GUIDANCE_V_ADAPT_MAX_HOVER_THROTTLE</a>. If the nominal hover throttle is defined use it otherwise it is better to start with low thrust and let it rise as the adaptive filter finds the vehicle needs more thrust. </p>

<p class="definition">Definition at line <a class="el" href="guidance__v__adapt_8c_source.html#l00047">47</a> of file <a class="el" href="guidance__v__adapt_8c_source.html">guidance_v_adapt.c</a>.</p>

</div>
</div>
<a id="a4d62700c8e938a85d29186643e308600" name="a4d62700c8e938a85d29186643e308600"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d62700c8e938a85d29186643e308600">&#9670;&#160;</a></span>GUIDANCE_V_ADAPT_MAX_ACCEL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a> GUIDANCE_V_ADAPT_MAX_ACCEL&#160;&#160;&#160;4.0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Filter is not fed if accel values are more than +/- MAX_ACCEL. </p>
<p>MAX_ACCEL is a positive value in m/s^2 </p>

<p class="definition">Definition at line <a class="el" href="guidance__v__adapt_8c_source.html#l00084">84</a> of file <a class="el" href="guidance__v__adapt_8c_source.html">guidance_v_adapt.c</a>.</p>

</div>
</div>
<a id="ad86e4967e4f8918981e037e48aed1ad1" name="ad86e4967e4f8918981e037e48aed1ad1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad86e4967e4f8918981e037e48aed1ad1">&#9670;&#160;</a></span>GUIDANCE_V_ADAPT_MAX_CMD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a> GUIDANCE_V_ADAPT_MAX_CMD&#160;&#160;&#160;0.9</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Filter is not fed if command values are out of a % of 0/MAX_PPRZ. </p>
<p>MAX_CMD and MIN_CMD must be between 0 and 1 with MIN_CMD &lt; MAX_CMD </p>

<p class="definition">Definition at line <a class="el" href="guidance__v__adapt_8c_source.html#l00091">91</a> of file <a class="el" href="guidance__v__adapt_8c_source.html">guidance_v_adapt.c</a>.</p>

</div>
</div>
<a id="a414ba0963f008cd5ff06c4bfbeac2ecc" name="a414ba0963f008cd5ff06c4bfbeac2ecc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a414ba0963f008cd5ff06c4bfbeac2ecc">&#9670;&#160;</a></span>GUIDANCE_V_ADAPT_MAX_HOVER_THROTTLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a> GUIDANCE_V_ADAPT_MAX_HOVER_THROTTLE&#160;&#160;&#160;0.75</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum hover throttle as factor of MAX_PPRZ. </p>
<p>With the default of 0.75 the nominal hover throttle will never go over 75% of max throttle. </p>

<p class="definition">Definition at line <a class="el" href="guidance__v__adapt_8c_source.html#l00066">66</a> of file <a class="el" href="guidance__v__adapt_8c_source.html">guidance_v_adapt.c</a>.</p>

</div>
</div>
<a id="ab0b57a6956b778c5d67dc08034f8efef" name="ab0b57a6956b778c5d67dc08034f8efef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0b57a6956b778c5d67dc08034f8efef">&#9670;&#160;</a></span>GUIDANCE_V_ADAPT_MIN_CMD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a> GUIDANCE_V_ADAPT_MIN_CMD&#160;&#160;&#160;0.1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="guidance__v__adapt_8c_source.html#l00094">94</a> of file <a class="el" href="guidance__v__adapt_8c_source.html">guidance_v_adapt.c</a>.</p>

</div>
</div>
<a id="ad1f11769fc0bd070f5b87c0b57a9b9a4" name="ad1f11769fc0bd070f5b87c0b57a9b9a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1f11769fc0bd070f5b87c0b57a9b9a4">&#9670;&#160;</a></span>GUIDANCE_V_ADAPT_MIN_HOVER_THROTTLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a> GUIDANCE_V_ADAPT_MIN_HOVER_THROTTLE&#160;&#160;&#160;0.2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Minimum hover throttle as factor of MAX_PPRZ. </p>
<p>With the default of 0.2 the nominal hover throttle will never go lower than 20%. </p>

<p class="definition">Definition at line <a class="el" href="guidance__v__adapt_8c_source.html#l00057">57</a> of file <a class="el" href="guidance__v__adapt_8c_source.html">guidance_v_adapt.c</a>.</p>

</div>
</div>
<a id="a3720e5c2d1efce3423181db33b9f1ef5" name="a3720e5c2d1efce3423181db33b9f1ef5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3720e5c2d1efce3423181db33b9f1ef5">&#9670;&#160;</a></span>GUIDANCE_V_ADAPT_NOISE_FACTOR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a> GUIDANCE_V_ADAPT_NOISE_FACTOR&#160;&#160;&#160;1.0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adapt noise factor. </p>
<p>Smaller values will make the filter to adapt faster. Bigger values (slower adaptation) make the filter more robust to external pertubations. Factor should always be &gt;0 </p>

<p class="definition">Definition at line <a class="el" href="guidance__v__adapt_8c_source.html#l00076">76</a> of file <a class="el" href="guidance__v__adapt_8c_source.html">guidance_v_adapt.c</a>.</p>

</div>
</div>
<a id="ab71b7758a98d0f9f24db0f4ea5cb5127" name="ab71b7758a98d0f9f24db0f4ea5cb5127"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab71b7758a98d0f9f24db0f4ea5cb5127">&#9670;&#160;</a></span>GV_ADAPT_MEAS_NOISE_HOVER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a> GV_ADAPT_MEAS_NOISE_HOVER&#160;&#160;&#160;<a class="el" href="group__math__algebra__int.html#gaa6bb9343d0a10947a0824bc67cf4a47d">BFP_OF_REAL</a>(<a class="el" href="guidance__v__adapt_8c.html#a2b327bb3914e66db3fb2a0a1d5b8fbf8">GV_ADAPT_MEAS_NOISE_HOVER_F</a>, <a class="el" href="guidance__v__adapt_8h.html#ae48506ef71b097cbc23c4a1eff14fc8d">GV_ADAPT_P_FRAC</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="guidance__v__adapt_8c_source.html#l00111">111</a> of file <a class="el" href="guidance__v__adapt_8c_source.html">guidance_v_adapt.c</a>.</p>

</div>
</div>
<a id="a2b327bb3914e66db3fb2a0a1d5b8fbf8" name="a2b327bb3914e66db3fb2a0a1d5b8fbf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b327bb3914e66db3fb2a0a1d5b8fbf8">&#9670;&#160;</a></span>GV_ADAPT_MEAS_NOISE_HOVER_F</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a> GV_ADAPT_MEAS_NOISE_HOVER_F&#160;&#160;&#160;(50.0*<a class="el" href="guidance__v__adapt_8c.html#a3720e5c2d1efce3423181db33b9f1ef5">GUIDANCE_V_ADAPT_NOISE_FACTOR</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="guidance__v__adapt_8c_source.html#l00110">110</a> of file <a class="el" href="guidance__v__adapt_8c_source.html">guidance_v_adapt.c</a>.</p>

</div>
</div>
<a id="a7375d670f4b38044453271776694d0a9" name="a7375d670f4b38044453271776694d0a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7375d670f4b38044453271776694d0a9">&#9670;&#160;</a></span>GV_ADAPT_MEAS_NOISE_OF_ZD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a> GV_ADAPT_MEAS_NOISE_OF_ZD&#160;&#160;&#160;(100.0*<a class="el" href="guidance__v__adapt_8c.html#a3720e5c2d1efce3423181db33b9f1ef5">GUIDANCE_V_ADAPT_NOISE_FACTOR</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="guidance__v__adapt_8c_source.html#l00112">112</a> of file <a class="el" href="guidance__v__adapt_8c_source.html">guidance_v_adapt.c</a>.</p>

</div>
</div>
<a id="ab14ff80550f83821205d485e6c3e44ce" name="ab14ff80550f83821205d485e6c3e44ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab14ff80550f83821205d485e6c3e44ce">&#9670;&#160;</a></span>GV_ADAPT_P0_F</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a> GV_ADAPT_P0_F&#160;&#160;&#160;0.1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="guidance__v__adapt_8c_source.html#l00115">115</a> of file <a class="el" href="guidance__v__adapt_8c_source.html">guidance_v_adapt.c</a>.</p>

</div>
</div>
<a id="a8009c4c8d2bf9ea4150743b0ee52d75a" name="a8009c4c8d2bf9ea4150743b0ee52d75a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8009c4c8d2bf9ea4150743b0ee52d75a">&#9670;&#160;</a></span>GV_ADAPT_SYS_NOISE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a> GV_ADAPT_SYS_NOISE&#160;&#160;&#160;<a class="el" href="group__math__algebra__int.html#gaa6bb9343d0a10947a0824bc67cf4a47d">BFP_OF_REAL</a>(<a class="el" href="guidance__v__adapt_8c.html#a5ae8bdb9d24e48209cd4a6f9bd58b288">GV_ADAPT_SYS_NOISE_F</a>, <a class="el" href="guidance__v__adapt_8h.html#ae48506ef71b097cbc23c4a1eff14fc8d">GV_ADAPT_P_FRAC</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="guidance__v__adapt_8c_source.html#l00107">107</a> of file <a class="el" href="guidance__v__adapt_8c_source.html">guidance_v_adapt.c</a>.</p>

</div>
</div>
<a id="a5ae8bdb9d24e48209cd4a6f9bd58b288" name="a5ae8bdb9d24e48209cd4a6f9bd58b288"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ae8bdb9d24e48209cd4a6f9bd58b288">&#9670;&#160;</a></span>GV_ADAPT_SYS_NOISE_F</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a> GV_ADAPT_SYS_NOISE_F&#160;&#160;&#160;0.00005</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="guidance__v__adapt_8c_source.html#l00105">105</a> of file <a class="el" href="guidance__v__adapt_8c_source.html">guidance_v_adapt.c</a>.</p>

</div>
</div>
<a id="a51fba05eb418475b476fbadc2534827c" name="a51fba05eb418475b476fbadc2534827c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51fba05eb418475b476fbadc2534827c">&#9670;&#160;</a></span>K_FRAC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a> K_FRAC&#160;&#160;&#160;12</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="guidance__v__adapt_8c_source.html#l00126">126</a> of file <a class="el" href="guidance__v__adapt_8c_source.html">guidance_v_adapt.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a14968f81dc98fe21f0f996ceace5fb5d" name="a14968f81dc98fe21f0f996ceace5fb5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14968f81dc98fe21f0f996ceace5fb5d">&#9670;&#160;</a></span>gv_adapt_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> gv_adapt_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="guidance__v__adapt_8c_source.html#l00120">120</a> of file <a class="el" href="guidance__v__adapt_8c_source.html">guidance_v_adapt.c</a>.</p>

<p class="reference">References <a class="el" href="guidance__v__adapt_8c_source.html#l00100">gv_adapt_P</a>, <a class="el" href="guidance__v__adapt_8c_source.html#l00116">gv_adapt_P0</a>, <a class="el" href="guidance__v__adapt_8c_source.html#l00099">gv_adapt_X</a>, and <a class="el" href="guidance__v__adapt_8c_source.html#l00117">gv_adapt_X0</a>.</p>

<p class="reference">Referenced by <a class="el" href="rotorcraft_2guidance_2guidance__v_8c_source.html#l00091">guidance_v_init()</a>, <a class="el" href="rotorcraft_2guidance_2guidance__v_8c_source.html#l00163">guidance_v_notify_in_flight()</a>, and <a class="el" href="rotorcraft_2guidance_2guidance__v_8c_source.html#l00199">guidance_v_thrust_adapt()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="guidance__v__adapt_8c_a14968f81dc98fe21f0f996ceace5fb5d_icgraph.png" border="0" usemap="#aguidance__v__adapt_8c_a14968f81dc98fe21f0f996ceace5fb5d_icgraph" alt=""/></div>
<map name="aguidance__v__adapt_8c_a14968f81dc98fe21f0f996ceace5fb5d_icgraph" id="aguidance__v__adapt_8c_a14968f81dc98fe21f0f996ceace5fb5d_icgraph">
<area shape="rect" title=" " alt="" coords="641,69,752,95"/>
<area shape="rect" href="rotorcraft_2guidance_2guidance__v_8c.html#ae1e43515cf186f69dfaac9a4543b3cf0" title=" " alt="" coords="439,12,563,37"/>
<area shape="poly" title=" " alt="" coords="642,68,593,53,548,40,550,35,594,47,644,63"/>
<area shape="rect" href="rotorcraft_2guidance_2guidance__v_8c.html#a331e736eaca82c6f4a2b5a0f6d92e8e2" title=" " alt="" coords="421,62,580,102"/>
<area shape="poly" title=" " alt="" coords="627,85,580,85,580,79,627,79"/>
<area shape="rect" href="rotorcraft_2guidance_2guidance__v_8c.html#a0f2c0608e9949e1d68952c3491a30a83" title=" " alt="" coords="408,127,593,152"/>
<area shape="poly" title=" " alt="" coords="644,101,594,117,550,129,548,124,593,111,642,96"/>
<area shape="rect" href="rotorcraft_2guidance_2guidance__v_8c.html#af7b4baa154425fe61d4807656a01ab06" title="Guidance vertical run functions." alt="" coords="236,127,360,152"/>
<area shape="poly" title=" " alt="" coords="394,142,360,142,360,137,394,137"/>
<area shape="rect" href="rotorcraft_2autopilot__static_8c.html#a81ff7c3a0611cb76bfbd35fc817070d6" title=" " alt="" coords="5,5,188,31"/>
<area shape="poly" title=" " alt="" coords="274,118,236,80,187,46,157,33,159,28,189,41,239,76,278,114"/>
<area shape="rect" href="control__mixing__heewing_8c.html#a804a462f0c974ed4b7f144cc591f4369" title="Stabilization in attitude direct mode." alt="" coords="6,55,187,95"/>
<area shape="poly" title=" " alt="" coords="243,125,160,98,161,93,245,120"/>
<area shape="rect" href="control__mixing__heewing_8c.html#a4461199643a00378c315418f41c5a14d" title=" " alt="" coords="6,119,187,159"/>
<area shape="poly" title=" " alt="" coords="222,142,188,142,188,137,222,137"/>
<area shape="rect" href="control__mixing__heewing_8c.html#a14d760978bd1498edd52144771de4b86" title=" " alt="" coords="6,183,187,223"/>
<area shape="poly" title=" " alt="" coords="245,159,161,186,160,181,243,154"/>
<area shape="rect" href="ctrl__module__outerloop__demo_8c.html#a930fc2d7668ebfeaf878439804b73478" title=" " alt="" coords="14,248,179,273"/>
<area shape="poly" title=" " alt="" coords="278,165,239,202,189,238,159,250,157,246,187,233,236,198,274,161"/>
</map>
</div>

</div>
</div>
<a id="a108e823687eddd24bff053ea9a03943f" name="a108e823687eddd24bff053ea9a03943f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a108e823687eddd24bff053ea9a03943f">&#9670;&#160;</a></span>gv_adapt_run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> gv_adapt_run </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a>&#160;</td>
          <td class="paramname"><em>zdd_meas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a>&#160;</td>
          <td class="paramname"><em>thrust_applied</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a>&#160;</td>
          <td class="paramname"><em>zd_ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adaptation function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">zdd_meas</td><td>vert accel measurement in m/s^2 with <a class="el" href="group__math__algebra__int.html#ga871a3a4fc9d79e94f0f648483542f7fa">INT32_ACCEL_FRAC</a> </td></tr>
    <tr><td class="paramname">thrust_applied</td><td>controller input [0 : MAX_PPRZ] </td></tr>
    <tr><td class="paramname">zd_ref</td><td>vertical speed reference in m/s with <a class="el" href="group__math__algebra__int.html#ga78c97bb51a4486cff673bf9995b8fdb0">INT32_SPEED_FRAC</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="guidance__v__adapt_8c_source.html#l00133">133</a> of file <a class="el" href="guidance__v__adapt_8c_source.html">guidance_v_adapt.c</a>.</p>

<p class="reference">References <a class="el" href="pprz__algebra__int_8h_source.html#l00221">ACCEL_BFP_OF_REAL</a>, <a class="el" href="pprz__algebra__int_8h_source.html#l00206">BFP_OF_REAL</a>, <a class="el" href="pprz__geodetic__utm_8h_source.html#l00040">E</a>, <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="guidance__v__adapt_8c_source.html#l00084">GUIDANCE_V_ADAPT_MAX_ACCEL</a>, <a class="el" href="guidance__v__adapt_8c_source.html#l00091">GUIDANCE_V_ADAPT_MAX_CMD</a>, <a class="el" href="guidance__v__adapt_8c_source.html#l00066">GUIDANCE_V_ADAPT_MAX_HOVER_THROTTLE</a>, <a class="el" href="guidance__v__adapt_8c_source.html#l00094">GUIDANCE_V_ADAPT_MIN_CMD</a>, <a class="el" href="guidance__v__adapt_8c_source.html#l00057">GUIDANCE_V_ADAPT_MIN_HOVER_THROTTLE</a>, <a class="el" href="guidance__v__adapt_8c_source.html#l00111">GV_ADAPT_MEAS_NOISE_HOVER</a>, <a class="el" href="guidance__v__adapt_8c_source.html#l00112">GV_ADAPT_MEAS_NOISE_OF_ZD</a>, <a class="el" href="guidance__v__adapt_8c_source.html#l00100">gv_adapt_P</a>, <a class="el" href="guidance__v__adapt_8c_source.html#l00116">gv_adapt_P0</a>, <a class="el" href="guidance__v__adapt_8h_source.html#l00047">GV_ADAPT_P_FRAC</a>, <a class="el" href="guidance__v__adapt_8c_source.html#l00107">GV_ADAPT_SYS_NOISE</a>, <a class="el" href="guidance__v__adapt_8c_source.html#l00099">gv_adapt_X</a>, <a class="el" href="guidance__v__adapt_8h_source.html#l00040">GV_ADAPT_X_FRAC</a>, <a class="el" href="guidance__v__adapt_8c_source.html#l00101">gv_adapt_Xmeas</a>, <a class="el" href="pprz__algebra__int_8h_source.html#l00078">INT32_ACCEL_FRAC</a>, <a class="el" href="pprz__algebra__int_8h_source.html#l00073">INT32_SPEED_FRAC</a>, <a class="el" href="undistort__image_8c_source.html#l00041">K</a>, <a class="el" href="guidance__v__adapt_8c_source.html#l00126">K_FRAC</a>, <a class="el" href="paparazzi_8h_source.html#l00008">MAX_PPRZ</a>, and <a class="el" href="temp__tcouple__adc_8c_source.html#l00049">ref</a>.</p>

<p class="reference">Referenced by <a class="el" href="rotorcraft_2guidance_2guidance__v_8c_source.html#l00199">guidance_v_thrust_adapt()</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="guidance__v__adapt_8c_a108e823687eddd24bff053ea9a03943f_icgraph.png" border="0" usemap="#aguidance__v__adapt_8c_a108e823687eddd24bff053ea9a03943f_icgraph" alt=""/></div>
<map name="aguidance__v__adapt_8c_a108e823687eddd24bff053ea9a03943f_icgraph" id="aguidance__v__adapt_8c_a108e823687eddd24bff053ea9a03943f_icgraph">
<area shape="rect" title="Adaptation function." alt="" coords="641,127,752,152"/>
<area shape="rect" href="rotorcraft_2guidance_2guidance__v_8c.html#a0f2c0608e9949e1d68952c3491a30a83" title=" " alt="" coords="408,127,593,152"/>
<area shape="poly" title=" " alt="" coords="627,142,594,142,594,137,627,137"/>
<area shape="rect" href="rotorcraft_2guidance_2guidance__v_8c.html#af7b4baa154425fe61d4807656a01ab06" title="Guidance vertical run functions." alt="" coords="236,127,360,152"/>
<area shape="poly" title=" " alt="" coords="394,142,360,142,360,137,394,137"/>
<area shape="rect" href="rotorcraft_2autopilot__static_8c.html#a81ff7c3a0611cb76bfbd35fc817070d6" title=" " alt="" coords="5,5,188,31"/>
<area shape="poly" title=" " alt="" coords="274,118,236,80,187,46,157,33,159,28,189,41,239,76,278,114"/>
<area shape="rect" href="control__mixing__heewing_8c.html#a804a462f0c974ed4b7f144cc591f4369" title="Stabilization in attitude direct mode." alt="" coords="6,55,187,95"/>
<area shape="poly" title=" " alt="" coords="243,125,160,98,161,93,245,120"/>
<area shape="rect" href="control__mixing__heewing_8c.html#a4461199643a00378c315418f41c5a14d" title=" " alt="" coords="6,119,187,159"/>
<area shape="poly" title=" " alt="" coords="222,142,188,142,188,137,222,137"/>
<area shape="rect" href="control__mixing__heewing_8c.html#a14d760978bd1498edd52144771de4b86" title=" " alt="" coords="6,183,187,223"/>
<area shape="poly" title=" " alt="" coords="245,159,161,186,160,181,243,154"/>
<area shape="rect" href="ctrl__module__outerloop__demo_8c.html#a930fc2d7668ebfeaf878439804b73478" title=" " alt="" coords="14,248,179,273"/>
<area shape="poly" title=" " alt="" coords="278,165,239,202,189,238,159,250,157,246,187,233,236,198,274,161"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a397e893a9ab16d6efe7637576c61dd00" name="a397e893a9ab16d6efe7637576c61dd00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a397e893a9ab16d6efe7637576c61dd00">&#9670;&#160;</a></span>gv_adapt_P</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> gv_adapt_P</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Covariance. </p>
<p>fixed point representation with <a class="el" href="guidance__v__adapt_8h.html#ae48506ef71b097cbc23c4a1eff14fc8d">GV_ADAPT_P_FRAC</a> Q13.18 </p>

<p class="definition">Definition at line <a class="el" href="guidance__v__adapt_8c_source.html#l00100">100</a> of file <a class="el" href="guidance__v__adapt_8c_source.html">guidance_v_adapt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="guidance__v__adapt_8c_source.html#l00120">gv_adapt_init()</a>, <a class="el" href="guidance__v__adapt_8c_source.html#l00133">gv_adapt_run()</a>, and <a class="el" href="guidance__pid_8c_source.html#l00164">send_vert_loop()</a>.</p>

</div>
</div>
<a id="a606488180af5af850b60949fe7854398" name="a606488180af5af850b60949fe7854398"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a606488180af5af850b60949fe7854398">&#9670;&#160;</a></span>gv_adapt_P0</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> gv_adapt_P0 = <a class="el" href="group__math__algebra__int.html#gaa6bb9343d0a10947a0824bc67cf4a47d">BFP_OF_REAL</a>(<a class="el" href="guidance__v__adapt_8c.html#ab14ff80550f83821205d485e6c3e44ce">GV_ADAPT_P0_F</a>, <a class="el" href="guidance__v__adapt_8h.html#ae48506ef71b097cbc23c4a1eff14fc8d">GV_ADAPT_P_FRAC</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="guidance__v__adapt_8c_source.html#l00116">116</a> of file <a class="el" href="guidance__v__adapt_8c_source.html">guidance_v_adapt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="guidance__v__adapt_8c_source.html#l00120">gv_adapt_init()</a>, and <a class="el" href="guidance__v__adapt_8c_source.html#l00133">gv_adapt_run()</a>.</p>

</div>
</div>
<a id="ab9714ec507d12d067e58b9498784e4b3" name="ab9714ec507d12d067e58b9498784e4b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9714ec507d12d067e58b9498784e4b3">&#9670;&#160;</a></span>gv_adapt_X</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> gv_adapt_X</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="group__state__interface.html#structState" title="Structure holding vehicle state data.">State</a> of the estimator. </p>
<p>fixed point representation with <a class="el" href="guidance__v__adapt_8h.html#a039f31720ffa5d57ad37345eec2fb302">GV_ADAPT_X_FRAC</a> Q13.18 </p>

<p class="definition">Definition at line <a class="el" href="guidance__v__adapt_8c_source.html#l00099">99</a> of file <a class="el" href="guidance__v__adapt_8c_source.html">guidance_v_adapt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="guidance__pid_8c_source.html#l00321">guidance_pid_v_run()</a>, <a class="el" href="guidance__v__adapt_8c_source.html#l00120">gv_adapt_init()</a>, <a class="el" href="guidance__v__adapt_8c_source.html#l00133">gv_adapt_run()</a>, and <a class="el" href="guidance__pid_8c_source.html#l00164">send_vert_loop()</a>.</p>

</div>
</div>
<a id="aa810b91c591c30594a11b3100b09f73c" name="aa810b91c591c30594a11b3100b09f73c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa810b91c591c30594a11b3100b09f73c">&#9670;&#160;</a></span>gv_adapt_X0</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> <a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> gv_adapt_X0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= <a class="code hl_define" href="group__math__algebra__int.html#gaa6bb9343d0a10947a0824bc67cf4a47d">BFP_OF_REAL</a>(9.81, <a class="code hl_define" href="guidance__v__adapt_8h.html#a039f31720ffa5d57ad37345eec2fb302">GV_ADAPT_X_FRAC</a>) /</div>
<div class="line">                                   (<a class="code hl_define" href="guidance__v__adapt_8c.html#a491f930739b79d2e901c22ff7bf6b255">GUIDANCE_V_ADAPT_INITIAL_HOVER_THROTTLE</a> *<a class="code hl_define" href="paparazzi_8h.html#a54d332726575cca5fb2774bfcfbe36a9">MAX_PPRZ</a>)</div>
<div class="ttc" id="agroup__math__algebra__int_html_gaa6bb9343d0a10947a0824bc67cf4a47d"><div class="ttname"><a href="group__math__algebra__int.html#gaa6bb9343d0a10947a0824bc67cf4a47d">BFP_OF_REAL</a></div><div class="ttdeci">#define BFP_OF_REAL(_vr, _frac)</div><div class="ttdef"><b>Definition</b> <a href="pprz__algebra__int_8h_source.html#l00206">pprz_algebra_int.h:206</a></div></div>
<div class="ttc" id="aguidance__v__adapt_8c_html_a491f930739b79d2e901c22ff7bf6b255"><div class="ttname"><a href="guidance__v__adapt_8c.html#a491f930739b79d2e901c22ff7bf6b255">GUIDANCE_V_ADAPT_INITIAL_HOVER_THROTTLE</a></div><div class="ttdeci">#define GUIDANCE_V_ADAPT_INITIAL_HOVER_THROTTLE</div><div class="ttdoc">Initial hover throttle as factor of MAX_PPRZ.</div><div class="ttdef"><b>Definition</b> <a href="guidance__v__adapt_8c_source.html#l00047">guidance_v_adapt.c:47</a></div></div>
<div class="ttc" id="aguidance__v__adapt_8h_html_a039f31720ffa5d57ad37345eec2fb302"><div class="ttname"><a href="guidance__v__adapt_8h.html#a039f31720ffa5d57ad37345eec2fb302">GV_ADAPT_X_FRAC</a></div><div class="ttdeci">#define GV_ADAPT_X_FRAC</div><div class="ttdef"><b>Definition</b> <a href="guidance__v__adapt_8h_source.html#l00040">guidance_v_adapt.h:40</a></div></div>
<div class="ttc" id="apaparazzi_8h_html_a54d332726575cca5fb2774bfcfbe36a9"><div class="ttname"><a href="paparazzi_8h.html#a54d332726575cca5fb2774bfcfbe36a9">MAX_PPRZ</a></div><div class="ttdeci">#define MAX_PPRZ</div><div class="ttdef"><b>Definition</b> <a href="paparazzi_8h_source.html#l00008">paparazzi.h:8</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="guidance__v__adapt_8c_source.html#l00117">117</a> of file <a class="el" href="guidance__v__adapt_8c_source.html">guidance_v_adapt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="guidance__v__adapt_8c_source.html#l00120">gv_adapt_init()</a>.</p>

</div>
</div>
<a id="ac9e0f391f1a1e53a185ce28a45e31090" name="ac9e0f391f1a1e53a185ce28a45e31090"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9e0f391f1a1e53a185ce28a45e31090">&#9670;&#160;</a></span>gv_adapt_Xmeas</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vl53l1__types_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> gv_adapt_Xmeas</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Measurement. </p>

<p class="definition">Definition at line <a class="el" href="guidance__v__adapt_8c_source.html#l00101">101</a> of file <a class="el" href="guidance__v__adapt_8c_source.html">guidance_v_adapt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="guidance__v__adapt_8c_source.html#l00133">gv_adapt_run()</a>, and <a class="el" href="guidance__pid_8c_source.html#l00164">send_vert_loop()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_01fcd3835fb4e7d9331b722d86291b65.html">sw</a></li><li class="navelem"><a class="el" href="dir_5e9153041680afc3c016fd52fa730b56.html">airborne</a></li><li class="navelem"><a class="el" href="dir_e7d2494544042a787a6ee70a779a5e07.html">firmwares</a></li><li class="navelem"><a class="el" href="dir_e37d355c72eb7c8e5b43c34bdea5a24b.html">rotorcraft</a></li><li class="navelem"><a class="el" href="dir_3d64810a495a8e63c02e8d4ee1418813.html">guidance</a></li><li class="navelem"><a class="el" href="guidance__v__adapt_8c.html">guidance_v_adapt.c</a></li>
    <li class="footer">Generated on Tue Jul 1 2025 08:13:16 for Paparazzi UAS by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
