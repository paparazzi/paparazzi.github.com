<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Paparazzi UAS: flight_benchmark module</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="penguin_icon.png"/></td>
  <td id="projectalign">
   <div id="projectname">Paparazzi UAS<span id="projectnumber">&#160;v7.0_unstable</span>
   </div>
   <div id="projectbrief">Paparazzi is a free software Unmanned Aircraft System.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('module__flight_benchmark.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">flight_benchmark module</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>Flight benchmark for fixedwing.</b></p>
<p><b></b></p>
<p>This module allows a quantitative assessment of a flight. It calculates the sum of squared error of the two-dimensional course (x / y), the altitude and true airspeed. The sum of squared error of the course and altitude were separated, because they are regulated separately, and so they dependent on various parameters. The module was written to optimize the control parameters and has already been used successfully.</p>
<p>The measurement is not started until about the variable benchm_go is set to 1. Could also be set from within a flightplan for automated Becnhmarking.</p>
<p>The sum of squared error can by reseted by changing the boolean variable benchm_reset to zero. It will turn back to 1 automatically after it has done the reset). This can also be used in a flight plan, which allows a flight plan with auto-reset. So it is possible to fly an oval or a eight figure with a sum of squared error that will be reseted at the very same point of the figure.</p>
<h1><a class="anchor" id="module_load_example__flight_benchmark"></a>
Example for airframe file</h1>
<p>Add to your firmware section: This example contains all possible configuration options, not all of them are mandatory! </p><div class="fragment"><div class="line">&lt;<span class="keywordtype">module</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;flight_benchmark&quot;</span>&gt;</div>
<div class="line">  <span class="keyword">b</span><span class="stringliteral">&#39;&lt;define name=&quot;BENCHMARK_AIRSPEED&quot; /&gt;\n    &#39;</span></div>
<div class="line">  <span class="keyword">b</span><span class="stringliteral">&#39;&lt;define name=&quot;BENCHMARK_ALTITUDE&quot; /&gt;\n    &#39;</span></div>
<div class="line">  <span class="keyword">b</span><span class="stringliteral">&#39;&lt;define name=&quot;BENCHMARK_POSITION&quot; /&gt;\n    &#39;</span></div>
<div class="line">  <span class="keyword">b</span><span class="stringliteral">&#39;&lt;define name=&quot;BENCHMARK_TOLERANCE_AIRSPEED&quot; value=&quot;0.&quot; /&gt;\n    &#39;</span></div>
<div class="line">  <span class="keyword">b</span><span class="stringliteral">&#39;&lt;define name=&quot;BENCHMARK_TOLERANCE_ALTITUDE&quot; value=&quot;0.&quot; /&gt;\n    &#39;</span></div>
<div class="line">  <span class="keyword">b</span><span class="stringliteral">&#39;&lt;define name=&quot;BENCHMARK_TOLERANCE_POSITION&quot; value=&quot;0.&quot; /&gt;\n  &#39;</span></div>
<div class="line">&lt;/<span class="keywordtype">module</span>&gt;</div>
</div><!-- fragment --> <h1><a class="anchor" id="configuration__flight_benchmark"></a>
Module configuration options</h1>
<h2><a class="anchor" id="define"></a>
Define Options</h2>
<ul>
<li><b>name:</b> <code>BENCHMARK_AIRSPEED</code> <b>value:</b> <em>None</em> <br  />
 Description: Add to enable airspeed benchmarking (only with airspeed module)</li>
<li><b>name:</b> <code>BENCHMARK_ALTITUDE</code> <b>value:</b> <em>None</em> <br  />
 Description: Add to enable altitude benchmarking</li>
<li><b>name:</b> <code>BENCHMARK_POSITION</code> <b>value:</b> <em>None</em> <br  />
 Description: Add to enable position (x/y) benchmarking. (shortest error to the path)</li>
<li><b>name:</b> <code>BENCHMARK_TOLERANCE_AIRSPEED</code> <b>value:</b> <em>0.</em> <br  />
 Description: define the tolerated value where the sum of squared error won't change. Set to zero to have no tolerance.</li>
<li><b>name:</b> <code>BENCHMARK_TOLERANCE_ALTITUDE</code> <b>value:</b> <em>0.</em> <br  />
 Description: define the tolerated value where the sum of squared error won't change. Set to zero to have no tolerance.</li>
<li><b>name:</b> <code>BENCHMARK_TOLERANCE_POSITION</code> <b>value:</b> <em>0.</em> <br  />
 Description: define the tolerated value where the sum of squared error won't change. Set to zero to have no tolerance.</li>
</ul>
<h1><a class="anchor" id="functions__flight_benchmark"></a>
Module functions</h1>
<h2><a class="anchor" id="init_functions"></a>
Init Functions</h2>
<p>These initialization functions are called once on startup.</p>
<ul>
<li><a class="el" href="flight__benchmark_8c.html#a4dcacc8a9bc906ab084299c2614669ec">flight_benchmark_init()</a></li>
</ul>
<h2><a class="anchor" id="periodic_functions"></a>
Periodic Functions</h2>
<p>These functions are called periodically at the specified frequency from the module periodic loop.</p>
<ul>
<li><a class="el" href="flight__benchmark_8c.html#a42ae975c1caf0cfcf6d713897773a16a">flight_benchmark_periodic()</a><ul>
<li>Frequency in Hz: <em>1</em> </li>
<li>Autorun: <em>TRUE</em> <br  />
 Periodic function automatically starts after init.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="files"></a>
Files</h1>
<h2><a class="anchor" id="headers"></a>
Header Files</h2>
<p>The following headers are automatically included in modules.h</p>
<ul>
<li><a class="el" href="flight__benchmark_8h.html">flight_benchmark.h</a></li>
</ul>
<h2><a class="anchor" id="sources"></a>
Source Files</h2>
<ul>
<li><a class="el" href="flight__benchmark_8c.html">modules/benchmark/flight_benchmark.c</a></li>
</ul>
<h2><a class="anchor" id="module_xml__flight_benchmark"></a>
Raw flight_benchmark.xml file:</h2>
<div class="fragment"><div class="line">&lt;!<span class="keyword">DOCTYPE</span> <span class="keyword">module</span> <span class="keyword">SYSTEM</span> <span class="stringliteral">&quot;module.dtd&quot;</span>&gt;</div>
<div class="line"> </div>
<div class="line">&lt;<span class="keywordtype">module</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;flight_benchmark&quot;</span> <span class="keyword">dir</span>=<span class="stringliteral">&quot;benchmark&quot;</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">doc</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">description</span>&gt;</div>
<div class="line"><span class="keyword">Flight</span> <span class="keyword">benchmark</span> <span class="keyword">for</span> <span class="keyword">fixedwing.</span></div>
<div class="line"><span class="keyword">This</span> <span class="keyword">module</span> <span class="keyword">allows</span> <span class="keyword">a</span> <span class="keyword">quantitative</span> <span class="keyword">assessment</span> <span class="keyword">of</span> <span class="keyword">a</span> <span class="keyword">flight.</span> <span class="keyword">It</span> <span class="keyword">calculates</span> <span class="keyword">the</span> <span class="keyword">sum</span> <span class="keyword">of</span> <span class="keyword">squared</span> <span class="keyword">error</span> <span class="keyword">of</span> <span class="keyword">the</span> <span class="keyword">two-dimensional</span> <span class="keyword">course</span> (<span class="keyword">x</span> / <span class="keyword">y</span>), <span class="keyword">the</span> <span class="keyword">altitude</span> <span class="keyword">and</span> <span class="keyword">true</span> <span class="keyword">airspeed.</span> <span class="keyword">The</span> <span class="keyword">sum</span> <span class="keyword">of</span> <span class="keyword">squared</span> <span class="keyword">error</span> <span class="keyword">of</span> <span class="keyword">the</span> <span class="keyword">course</span> <span class="keyword">and</span> <span class="keyword">altitude</span> <span class="keyword">were</span> <span class="keyword">separated</span>, <span class="keyword">because</span> <span class="keyword">they</span> <span class="keyword">are</span> <span class="keyword">regulated</span> <span class="keyword">separately</span>, <span class="keyword">and</span> <span class="keyword">so</span> <span class="keyword">they</span> <span class="keyword">dependent</span> <span class="keyword">on</span> <span class="keyword">various</span> <span class="keyword">parameters.</span> <span class="keyword">The</span> <span class="keyword">module</span> <span class="keyword">was</span> <span class="keyword">written</span> <span class="keyword">to</span> <span class="keyword">optimize</span> <span class="keyword">the</span> <span class="keyword">control</span> <span class="keyword">parameters</span> <span class="keyword">and</span> <span class="keyword">has</span> <span class="keyword">already</span> <span class="keyword">been</span> <span class="keyword">used</span> <span class="keyword">successfully.</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">The</span> <span class="keyword">measurement</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">started</span> <span class="keyword">until</span> <span class="keyword">about</span> <span class="keyword">the</span> <span class="keyword">variable</span> <span class="keyword">benchm_go</span> <span class="keyword">is</span> <span class="keyword">set</span> <span class="keyword">to</span> 1. <span class="keyword">Could</span> <span class="keyword">also</span> <span class="keyword">be</span> <span class="keyword">set</span> <span class="keyword">from</span> <span class="keyword">within</span> <span class="keyword">a</span> <span class="keyword">flightplan</span> <span class="keyword">for</span> <span class="keyword">automated</span> <span class="keyword">Becnhmarking.</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">The</span> <span class="keyword">sum</span> <span class="keyword">of</span> <span class="keyword">squared</span> <span class="keyword">error</span> <span class="keyword">can</span> <span class="keyword">by</span> <span class="keyword">reseted</span> <span class="keyword">by</span> <span class="keyword">changing</span> <span class="keyword">the</span> <span class="keyword">boolean</span> <span class="keyword">variable</span> <span class="keyword">benchm_reset</span> <span class="keyword">to</span> <span class="keyword">zero.</span> <span class="keyword">It</span> <span class="keyword">will</span> <span class="keyword">turn</span> <span class="keyword">back</span> <span class="keyword">to</span> 1 <span class="keyword">automatically</span> <span class="keyword">after</span> <span class="keyword">it</span> <span class="keyword">has</span> <span class="keyword">done</span> <span class="keyword">the</span> <span class="keyword">reset</span>). <span class="keyword">This</span> <span class="keyword">can</span> <span class="keyword">also</span> <span class="keyword">be</span> <span class="keyword">used</span> <span class="keyword">in</span> <span class="keyword">a</span> <span class="keyword">flight</span> <span class="keyword">plan</span>, <span class="keyword">which</span> <span class="keyword">allows</span> <span class="keyword">a</span> <span class="keyword">flight</span> <span class="keyword">plan</span> <span class="keyword">with</span> <span class="keyword">auto-reset.</span> <span class="keyword">So</span> <span class="keyword">it</span> <span class="keyword">is</span> <span class="keyword">possible</span> <span class="keyword">to</span> <span class="keyword">fly</span> <span class="keyword">an</span> <span class="keyword">oval</span> <span class="keyword">or</span> <span class="keyword">a</span> <span class="keyword">eight</span> <span class="keyword">figure</span> <span class="keyword">with</span> <span class="keyword">a</span> <span class="keyword">sum</span> <span class="keyword">of</span> <span class="keyword">squared</span> <span class="keyword">error</span> <span class="keyword">that</span> <span class="keyword">will</span> <span class="keyword">be</span> <span class="keyword">reseted</span> <span class="keyword">at</span> <span class="keyword">the</span> <span class="keyword">very</span> <span class="keyword">same</span> <span class="keyword">point</span> <span class="keyword">of</span> <span class="keyword">the</span> <span class="keyword">figure.</span></div>
<div class="line">    &lt;/<span class="keywordtype">description</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">define</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;BENCHMARK_AIRSPEED&quot;</span> <span class="keyword">description</span>=<span class="stringliteral">&quot;Add to enable airspeed benchmarking (only with airspeed module)&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">define</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;BENCHMARK_ALTITUDE&quot;</span> <span class="keyword">description</span>=<span class="stringliteral">&quot;Add to enable altitude benchmarking&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">define</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;BENCHMARK_POSITION&quot;</span> <span class="keyword">description</span>=<span class="stringliteral">&quot;Add to enable position (x/y) benchmarking. (shortest error to the path)&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">define</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;BENCHMARK_TOLERANCE_AIRSPEED&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;0.&quot;</span> <span class="keyword">description</span>=<span class="stringliteral">&quot;define the tolerated value where the sum of squared error won&#39;t change. Set to zero to have no tolerance.&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">define</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;BENCHMARK_TOLERANCE_ALTITUDE&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;0.&quot;</span> <span class="keyword">description</span>=<span class="stringliteral">&quot;define the tolerated value where the sum of squared error won&#39;t change. Set to zero to have no tolerance.&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">define</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;BENCHMARK_TOLERANCE_POSITION&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;0.&quot;</span> <span class="keyword">description</span>=<span class="stringliteral">&quot;define the tolerated value where the sum of squared error won&#39;t change. Set to zero to have no tolerance.&quot;</span>/&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">doc</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">settings</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">dl_settings</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">dl_settings</span> <span class="keyword">NAME</span>=<span class="stringliteral">&quot;Benchmark&quot;</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">dl_setting</span> <span class="keyword">MAX</span>=<span class="stringliteral">&quot;1&quot;</span> <span class="keyword">MIN</span>=<span class="stringliteral">&quot;0&quot;</span> <span class="keyword">STEP</span>=<span class="stringliteral">&quot;1&quot;</span> <span class="keyword">VAR</span>=<span class="stringliteral">&quot;benchm_reset&quot;</span> <span class="keyword">shortname</span>=<span class="stringliteral">&quot;bench_reset&quot;</span> <span class="keyword">module</span>=<span class="stringliteral">&quot;modules/benchmark/flight_benchmark&quot;</span>/&gt;</div>
<div class="line">        &lt;<span class="keywordtype">dl_setting</span> <span class="keyword">MAX</span>=<span class="stringliteral">&quot;1&quot;</span> <span class="keyword">MIN</span>=<span class="stringliteral">&quot;0&quot;</span> <span class="keyword">STEP</span>=<span class="stringliteral">&quot;1&quot;</span> <span class="keyword">VAR</span>=<span class="stringliteral">&quot;benchm_go&quot;</span> <span class="keyword">shortname</span>=<span class="stringliteral">&quot;bench_go&quot;</span> /&gt;</div>
<div class="line">        &lt;<span class="keywordtype">dl_setting</span> <span class="keyword">MAX</span>=<span class="stringliteral">&quot;20&quot;</span> <span class="keyword">MIN</span>=<span class="stringliteral">&quot;0&quot;</span> <span class="keyword">STEP</span>=<span class="stringliteral">&quot;0.1&quot;</span> <span class="keyword">VAR</span>=<span class="stringliteral">&quot;ToleranceAispeed&quot;</span> <span class="keyword">shortname</span>=<span class="stringliteral">&quot;AS_Tolerance&quot;</span> <span class="keyword">param</span>=<span class="stringliteral">&quot;BENCHMARK_TOLERANCE_AIRSPEED&quot;</span>/&gt;</div>
<div class="line">        &lt;<span class="keywordtype">dl_setting</span> <span class="keyword">MAX</span>=<span class="stringliteral">&quot;20&quot;</span> <span class="keyword">MIN</span>=<span class="stringliteral">&quot;0&quot;</span> <span class="keyword">STEP</span>=<span class="stringliteral">&quot;0.1&quot;</span> <span class="keyword">VAR</span>=<span class="stringliteral">&quot;ToleranceAltitude&quot;</span> <span class="keyword">shortname</span>=<span class="stringliteral">&quot;Alt_Tolerance&quot;</span> <span class="keyword">param</span>=<span class="stringliteral">&quot;BENCHMARK_TOLERANCE_ALTITUDE&quot;</span>/&gt;</div>
<div class="line">        &lt;<span class="keywordtype">dl_setting</span> <span class="keyword">MAX</span>=<span class="stringliteral">&quot;20&quot;</span> <span class="keyword">MIN</span>=<span class="stringliteral">&quot;0&quot;</span> <span class="keyword">STEP</span>=<span class="stringliteral">&quot;0.1&quot;</span> <span class="keyword">VAR</span>=<span class="stringliteral">&quot;TolerancePosition&quot;</span> <span class="keyword">shortname</span>=<span class="stringliteral">&quot;Pos_Tolerance&quot;</span> <span class="keyword">param</span>=<span class="stringliteral">&quot;BENCHMARK_TOLERANCE_POSITION&quot;</span>/&gt;</div>
<div class="line">      &lt;/<span class="keywordtype">dl_settings</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">dl_settings</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">settings</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">header</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">file</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;flight_benchmark.h&quot;</span>/&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">header</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">init</span> <span class="keyword">fun</span>=<span class="stringliteral">&quot;flight_benchmark_init()&quot;</span>/&gt;</div>
<div class="line">  &lt;<span class="keywordtype">periodic</span> <span class="keyword">fun</span>=<span class="stringliteral">&quot;flight_benchmark_periodic()&quot;</span> <span class="keyword">freq</span>=<span class="stringliteral">&quot;1&quot;</span> <span class="keyword">autorun</span>=<span class="stringliteral">&quot;TRUE&quot;</span>/&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">makefile</span> <span class="keyword">target</span>=<span class="stringliteral">&quot;ap&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">file</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;flight_benchmark.c&quot;</span>/&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">makefile</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">module</span>&gt;</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="onboard_modules.html">Onboard Modules</a></li>
    <li class="footer">Generated on Fri Jun 27 2025 09:44:33 for Paparazzi UAS by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
