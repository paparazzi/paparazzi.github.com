<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Paparazzi UAS: sw/airborne/modules/computer_vision/opticflow/opticflow_calculator.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="penguin_icon.png"/></td>
  <td id="projectalign">
   <div id="projectname">Paparazzi UAS<span id="projectnumber">&#160;v7.0_unstable</span>
   </div>
   <div id="projectbrief">Paparazzi is a free software Unmanned Aircraft System.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('opticflow__calculator_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">opticflow_calculator.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Calculate velocity from optic flow.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;std.h&quot;</code><br />
<code>#include &quot;<a class="el" href="inter__thread__data_8h_source.html">inter_thread_data.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="image_8h_source.html">lib/vision/image.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="v4l2_8h_source.html">lib/v4l/v4l2.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for opticflow_calculator.h:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="opticflow__calculator_8h__incl.png" border="0" usemap="#asw_2airborne_2modules_2computer__vision_2opticflow_2opticflow__calculator_8h" alt=""/></div>
<map name="asw_2airborne_2modules_2computer__vision_2opticflow_2opticflow__calculator_8h" id="asw_2airborne_2modules_2computer__vision_2opticflow_2opticflow__calculator_8h">
<area shape="rect" title="Calculate velocity from optic flow." alt="" coords="588,5,785,60"/>
<area shape="rect" title=" " alt="" coords="222,563,277,588"/>
<area shape="poly" title=" " alt="" coords="588,39,417,50,321,61,226,76,141,96,71,122,44,137,25,154,12,173,8,193,8,430,14,461,29,488,53,510,82,528,148,553,209,566,208,571,147,558,80,532,50,514,25,491,9,463,3,430,3,192,7,170,21,151,41,133,69,117,139,91,225,71,320,56,417,45,588,34"/>
<area shape="rect" href="inter__thread__data_8h.html" title="Inter&#45;thread data structures." alt="" coords="737,335,887,361"/>
<area shape="poly" title=" " alt="" coords="786,38,862,52,943,77,983,96,1020,119,1053,147,1081,180,1093,210,1088,237,1069,260,1041,281,1005,298,966,313,887,335,885,330,964,308,1003,293,1038,276,1066,256,1083,234,1088,210,1076,183,1049,150,1017,123,980,101,941,82,861,57,785,43"/>
<area shape="rect" href="image_8h.html" title="Image helper functions like resizing, color filter, converters..." alt="" coords="544,181,683,207"/>
<area shape="poly" title=" " alt="" coords="677,61,627,170,622,168,672,59"/>
<area shape="rect" href="v4l2_8h.html" title="Capture images from a V4L2 device (Video for Linux 2)" alt="" coords="692,108,799,133"/>
<area shape="poly" title=" " alt="" coords="707,59,732,95,728,98,702,62"/>
<area shape="rect" href="pprz__algebra__float_8h.html" title="Paparazzi floating point algebra." alt="" coords="731,416,923,441"/>
<area shape="poly" title=" " alt="" coords="817,360,825,402,819,403,812,361"/>
<area shape="rect" href="pprz__algebra__int_8h.html" title="Paparazzi fixed point algebra." alt="" coords="395,416,575,441"/>
<area shape="poly" title=" " alt="" coords="765,363,547,415,546,410,764,358"/>
<area shape="rect" href="pprz__algebra_8h.html" title="Paparazzi generic algebra macros." alt="" coords="637,489,755,515"/>
<area shape="poly" title=" " alt="" coords="807,444,730,485,728,480,804,439"/>
<area shape="rect" title=" " alt="" coords="695,563,758,588"/>
<area shape="poly" title=" " alt="" coords="872,439,907,451,938,468,950,478,957,490,958,503,951,516,939,527,922,536,875,552,772,571,771,566,874,546,920,531,936,522,947,513,953,502,952,492,946,482,935,473,905,456,870,444"/>
<area shape="rect" title=" " alt="" coords="906,563,974,588"/>
<area shape="poly" title=" " alt="" coords="899,439,940,457,959,470,974,488,980,504,978,522,962,553,957,550,973,520,975,505,970,491,955,474,938,461,896,444"/>
<area shape="rect" title=" " alt="" coords="780,489,937,515"/>
<area shape="poly" title=" " alt="" coords="834,441,850,476,846,478,830,443"/>
<area shape="poly" title=" " alt="" coords="637,515,291,570,290,565,636,510"/>
<area shape="poly" title=" " alt="" coords="704,514,719,549,714,551,699,516"/>
<area shape="rect" title=" " alt="" coords="1059,563,1130,588"/>
<area shape="poly" title=" " alt="" coords="756,511,1046,563,1045,568,755,517"/>
<area shape="poly" title=" " alt="" coords="736,512,894,558,892,563,734,517"/>
<area shape="poly" title=" " alt="" coords="410,444,354,462,327,475,302,491,277,520,261,551,256,548,273,517,298,487,324,470,352,457,409,439"/>
<area shape="poly" title=" " alt="" coords="520,439,650,482,648,487,518,444"/>
<area shape="rect" href="pprz__trig__int_8h.html" title="Paparazzi fixed point trig functions." alt="" coords="313,489,466,515"/>
<area shape="poly" title=" " alt="" coords="471,444,418,483,415,479,468,439"/>
<area shape="rect" title=" " alt="" coords="490,489,561,515"/>
<area shape="poly" title=" " alt="" coords="494,440,514,476,510,479,490,443"/>
<area shape="poly" title=" " alt="" coords="368,517,285,559,283,554,366,512"/>
<area shape="poly" title=" " alt="" coords="544,202,405,216,324,227,245,242,172,262,112,285,90,299,73,314,62,330,59,347,59,430,63,456,74,479,91,499,113,516,162,544,210,561,208,566,160,548,110,521,88,503,70,482,58,458,53,430,53,346,57,328,69,310,87,295,110,281,170,257,243,237,323,222,404,211,544,197"/>
<area shape="rect" title=" " alt="" coords="651,255,741,280"/>
<area shape="poly" title=" " alt="" coords="628,205,674,243,670,248,625,209"/>
<area shape="rect" href="state_8h.html" title="API to get/set the generic vehicle states." alt="" coords="535,255,601,280"/>
<area shape="poly" title=" " alt="" coords="608,208,585,245,580,242,604,206"/>
<area shape="poly" title=" " alt="" coords="535,271,440,271,318,277,258,285,205,296,162,310,134,330,119,357,116,387,124,418,139,449,160,479,183,507,227,551,223,555,179,511,155,483,134,452,119,419,111,387,114,355,130,326,159,306,203,290,258,280,318,272,440,266,535,265"/>
<area shape="poly" title=" " alt="" coords="602,271,780,301,900,326,907,337,908,347,901,369,884,393,862,411,859,407,880,389,896,367,903,347,902,339,897,330,779,307,601,277"/>
<area shape="poly" title=" " alt="" coords="602,271,922,326,954,349,983,377,1030,439,1065,500,1087,548,1083,550,1060,502,1026,442,979,380,951,353,920,330,601,277"/>
<area shape="poly" title=" " alt="" coords="563,282,536,329,499,404,494,402,531,327,559,279"/>
<area shape="rect" href="pprz__geodetic__int_8h.html" title="Paparazzi fixed point math for geodetic calculations." alt="" coords="319,328,470,368"/>
<area shape="poly" title=" " alt="" coords="544,282,450,325,448,320,542,278"/>
<area shape="rect" href="pprz__geodetic__float_8h.html" title="Paparazzi floating point math for geodetic calculations." alt="" coords="145,328,295,368"/>
<area shape="poly" title=" " alt="" coords="535,279,310,329,308,324,534,274"/>
<area shape="rect" href="pprz__orientation__conversion_8h.html" title="Generic orientation representation and conversions." alt="" coords="546,328,713,368"/>
<area shape="poly" title=" " alt="" coords="579,279,608,315,604,319,575,282"/>
<area shape="poly" title=" " alt="" coords="386,370,364,405,334,443,317,458,302,466,289,475,276,491,262,520,255,549,250,548,257,518,271,488,285,471,300,462,314,453,330,439,359,402,382,367"/>
<area shape="poly" title=" " alt="" coords="418,366,463,405,460,409,415,370"/>
<area shape="rect" href="pprz__geodetic_8h.html" title="Paparazzi generic macros for geodetic calculations." alt="" coords="195,416,320,441"/>
<area shape="poly" title=" " alt="" coords="363,370,291,411,288,407,360,366"/>
<area shape="poly" title=" " alt="" coords="208,369,195,391,185,417,184,429,185,441,193,478,208,513,233,551,228,554,203,516,188,480,180,442,178,429,180,415,190,389,204,367"/>
<area shape="poly" title=" " alt="" coords="296,363,307,365,525,395,717,415,716,421,524,401,306,371,295,369"/>
<area shape="poly" title=" " alt="" coords="231,367,248,402,244,405,227,369"/>
<area shape="poly" title=" " alt="" coords="631,368,628,401,619,441,602,482,589,501,574,517,552,530,522,540,445,557,361,568,290,574,290,569,361,563,444,552,520,535,550,525,570,513,585,497,597,479,614,439,622,400,626,368"/>
<area shape="poly" title=" " alt="" coords="678,366,786,408,784,413,676,370"/>
<area shape="poly" title=" " alt="" coords="596,370,520,412,517,407,594,366"/>
<area shape="poly" title=" " alt="" coords="753,132,772,166,798,205,833,240,865,262,895,287,924,327,953,379,974,425,978,448,977,470,968,493,951,517,937,526,915,534,848,547,759,557,657,565,448,573,290,576,290,571,447,568,657,559,759,552,847,542,913,529,935,521,947,513,964,491,972,469,973,448,969,427,948,381,919,329,891,291,862,267,829,244,794,208,767,169,749,135"/>
<area shape="poly" title=" " alt="" coords="725,136,648,177,646,172,723,131"/>
<area shape="poly" title=" " alt="" coords="744,135,707,243,702,241,739,133"/>
<area shape="rect" title=" " alt="" coords="917,181,1067,207"/>
<area shape="poly" title=" " alt="" coords="786,131,940,175,938,180,784,136"/>
<area shape="rect" title=" " alt="" coords="809,181,893,207"/>
<area shape="poly" title=" " alt="" coords="764,131,824,171,821,176,761,136"/>
</map>
</div>
</div><div class="textblock"><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> This graph shows which files directly or indirectly include this file:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="opticflow__calculator_8h__dep__incl.png" border="0" usemap="#asw_2airborne_2modules_2computer__vision_2opticflow_2opticflow__calculator_8hdep" alt=""/></div>
<map name="asw_2airborne_2modules_2computer__vision_2opticflow_2opticflow__calculator_8hdep" id="asw_2airborne_2modules_2computer__vision_2opticflow_2opticflow__calculator_8hdep">
<area shape="rect" title="Calculate velocity from optic flow." alt="" coords="227,5,425,60"/>
<area shape="rect" href="act__fast_8c.html" title="Finds corners in an image by actively scanning the image." alt="" coords="5,108,164,163"/>
<area shape="poly" title=" " alt="" coords="252,68,149,110,147,105,250,63"/>
<area shape="rect" href="edge__flow_8h.html" title="calculate optical flow with EdgeFlow" alt="" coords="188,108,347,163"/>
<area shape="poly" title=" " alt="" coords="306,73,285,109,280,107,301,71"/>
<area shape="rect" href="opticflow__calculator_8c.html" title="Estimate velocity from optic flow." alt="" coords="265,211,462,265"/>
<area shape="poly" title=" " alt="" coords="349,71,362,107,369,162,368,211,363,211,363,163,357,109,344,73"/>
<area shape="rect" href="opticflow__module_8h.html" title="optical&#45;flow calculation for Parrot Drones" alt="" coords="465,108,662,163"/>
<area shape="poly" title=" " alt="" coords="401,63,503,105,500,110,399,68"/>
<area shape="rect" href="edge__flow_8c.html" title="calculate optical flow with EdgeFlow" alt="" coords="81,211,240,265"/>
<area shape="poly" title=" " alt="" coords="231,174,190,213,187,209,228,170"/>
<area shape="poly" title=" " alt="" coords="304,171,340,209,336,212,300,174"/>
<area shape="rect" href="opticflow__module_8c.html" title="Optical&#45;flow estimation module." alt="" coords="486,211,683,265"/>
<area shape="poly" title=" " alt="" coords="574,175,582,210,576,211,569,177"/>
</map>
</div>
</div>
<p><a href="opticflow__calculator_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structopticflow__t" id="r_structopticflow__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="opticflow__calculator_8h.html#structopticflow__t">opticflow_t</a></td></tr>
<tr class="separator:structopticflow__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af8580baf85f0c87ba368f1824c1d4063" id="r_af8580baf85f0c87ba368f1824c1d4063"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="opticflow__calculator_8h.html#af8580baf85f0c87ba368f1824c1d4063">FAST9_MAX_CORNERS</a>&#160;&#160;&#160;512</td></tr>
<tr class="separator:af8580baf85f0c87ba368f1824c1d4063"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7d03c46f201e48777ef9d612fe73fc51" id="r_a7d03c46f201e48777ef9d612fe73fc51"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="opticflow__calculator_8h.html#a7d03c46f201e48777ef9d612fe73fc51">opticflow_calc_init</a> (struct <a class="el" href="opticflow__calculator_8h.html#structopticflow__t">opticflow_t</a> <a class="el" href="opticflow__module_8c.html#a82a571b4f979b955128f710d3525a5b6">opticflow</a>[])</td></tr>
<tr class="memdesc:a7d03c46f201e48777ef9d612fe73fc51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the opticflow calculator.  <br /></td></tr>
<tr class="separator:a7d03c46f201e48777ef9d612fe73fc51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89e51af8fe5a0f534193635d181a2086" id="r_a89e51af8fe5a0f534193635d181a2086"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="opticflow__calculator_8h.html#a89e51af8fe5a0f534193635d181a2086">opticflow_calc_frame</a> (struct <a class="el" href="opticflow__calculator_8h.html#structopticflow__t">opticflow_t</a> *<a class="el" href="opticflow__module_8c.html#a82a571b4f979b955128f710d3525a5b6">opticflow</a>, struct <a class="el" href="image_8h.html#structimage__t">image_t</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">img</a>, struct <a class="el" href="inter__thread__data_8h.html#structopticflow__result__t">opticflow_result_t</a> *result)</td></tr>
<tr class="memdesc:a89e51af8fe5a0f534193635d181a2086"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the optical flow on a new image frame.  <br /></td></tr>
<tr class="separator:a89e51af8fe5a0f534193635d181a2086"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3edff14cc7f95b5202ba6841a12dfed3" id="r_a3edff14cc7f95b5202ba6841a12dfed3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="opticflow__calculator_8h.html#a3edff14cc7f95b5202ba6841a12dfed3">calc_fast9_lukas_kanade</a> (struct <a class="el" href="opticflow__calculator_8h.html#structopticflow__t">opticflow_t</a> *<a class="el" href="opticflow__module_8c.html#a82a571b4f979b955128f710d3525a5b6">opticflow</a>, struct <a class="el" href="image_8h.html#structimage__t">image_t</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">img</a>, struct <a class="el" href="inter__thread__data_8h.html#structopticflow__result__t">opticflow_result_t</a> *result)</td></tr>
<tr class="memdesc:a3edff14cc7f95b5202ba6841a12dfed3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the optical flow with fast9 and lukaskanade on a new image frame.  <br /></td></tr>
<tr class="separator:a3edff14cc7f95b5202ba6841a12dfed3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab57bd1ab7d50982c7f9494e40e6da3ca" id="r_ab57bd1ab7d50982c7f9494e40e6da3ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="opticflow__calculator_8h.html#ab57bd1ab7d50982c7f9494e40e6da3ca">calc_edgeflow_tot</a> (struct <a class="el" href="opticflow__calculator_8h.html#structopticflow__t">opticflow_t</a> *<a class="el" href="opticflow__module_8c.html#a82a571b4f979b955128f710d3525a5b6">opticflow</a>, struct <a class="el" href="image_8h.html#structimage__t">image_t</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">img</a>, struct <a class="el" href="inter__thread__data_8h.html#structopticflow__result__t">opticflow_result_t</a> *result)</td></tr>
<tr class="memdesc:ab57bd1ab7d50982c7f9494e40e6da3ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the optical flow with EDGEFLOW on a new image frame.  <br /></td></tr>
<tr class="separator:ab57bd1ab7d50982c7f9494e40e6da3ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b04e288db8c4c22a0354161df3e7873" id="r_a0b04e288db8c4c22a0354161df3e7873"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="opticflow__calculator_8h.html#a0b04e288db8c4c22a0354161df3e7873">kalman_filter_opticflow_velocity</a> (<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">velocity_x</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">velocity_y</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">acceleration_measurement</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> fps, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">measurement_noise</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">process_noise</a>, <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a> <a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">reinitialize_kalman</a>)</td></tr>
<tr class="separator:a0b04e288db8c4c22a0354161df3e7873"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Calculate velocity from optic flow. </p>
<p>Using images from a vertical camera and IMU sensor data. </p>

<p class="definition">Definition in file <a class="el" href="opticflow__calculator_8h_source.html">opticflow_calculator.h</a>.</p>
</div><hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structopticflow__t" id="structopticflow__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structopticflow__t">&#9670;&#160;</a></span>opticflow_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct opticflow_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="opticflow__calculator_8h_source.html#l00040">40</a> of file <a class="el" href="opticflow__calculator_8h_source.html">opticflow_calculator.h</a>.</p>
</div><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Collaboration diagram for opticflow_t:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="structopticflow__t__coll__graph.png" border="0" usemap="#aopticflow__t_coll__map" alt="Collaboration graph"/></div>
<map name="aopticflow__t_coll__map" id="aopticflow__t_coll__map">
<area shape="rect" title=" " alt="" coords="5,137,99,163"/>
<area shape="rect" title=" " alt="" coords="23,5,81,31"/>
<area shape="poly" title=" " alt="" coords="55,44,55,137,49,137,49,44"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a82f24188a5d1eafa6870567a4da2b21d" name="a82f24188a5d1eafa6870567a4da2b21d"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">int</a></td>
<td class="fieldname">
actfast_gradient_method</td>
<td class="fielddoc">
Whether to use a simple or Sobel filter. </td></tr>
<tr><td class="fieldtype">
<a id="a93e090c235282f0ea3adfb90f5df6fb8" name="a93e090c235282f0ea3adfb90f5df6fb8"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
actfast_long_step</td>
<td class="fielddoc">
Step size to take when there is no texture. </td></tr>
<tr><td class="fieldtype">
<a id="abb24128e6ff419613175073b90217f94" name="abb24128e6ff419613175073b90217f94"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">int</a></td>
<td class="fieldname">
actfast_min_gradient</td>
<td class="fielddoc">
Threshold that decides when there is sufficient texture for edge following. </td></tr>
<tr><td class="fieldtype">
<a id="af2b68acbdbead102649264f6830e7c3e" name="af2b68acbdbead102649264f6830e7c3e"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
actfast_short_step</td>
<td class="fielddoc">
Step size to take when there is an edge to be followed. </td></tr>
<tr><td class="fieldtype">
<a id="a74e9f391f9e9b0d66049bb0b172558c0" name="a74e9f391f9e9b0d66049bb0b172558c0"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">const</a> struct <a class="el" href="video__device_8h.html#structvideo__config__t">video_config_t</a> *</td>
<td class="fieldname">
camera</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a4967bac1deb26cf5ddc9af53918d6e0d" name="a4967bac1deb26cf5ddc9af53918d6e0d"></a><a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></td>
<td class="fieldname">
corner_method</td>
<td class="fielddoc">
Method to use for determining where the corners are. </td></tr>
<tr><td class="fieldtype">
<a id="a69eee269a375bf38f5165e3babbacb37" name="a69eee269a375bf38f5165e3babbacb37"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a></td>
<td class="fieldname">
derotation</td>
<td class="fielddoc">
Derotation switched on or off (depended on the quality of the gyroscope measurement) </td></tr>
<tr><td class="fieldtype">
<a id="a1e4ae6d4816b337a16747a2c072572ec" name="a1e4ae6d4816b337a16747a2c072572ec"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
derotation_correction_factor_x</td>
<td class="fielddoc">
Correction factor for derotation in x axis, determined from a fit from the gyros and flow rotation. (wrong FOV, camera not in center) </td></tr>
<tr><td class="fieldtype">
<a id="aef3e670364f2c8a69c5f02f9e1ced363" name="aef3e670364f2c8a69c5f02f9e1ced363"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a></td>
<td class="fieldname">
derotation_correction_factor_y</td>
<td class="fielddoc">
Correction factor for derotation in Y axis, determined from a fit from the gyros and flow rotation. (wrong FOV, camera not in center) </td></tr>
<tr><td class="fieldtype">
<a id="ab16878e5632234237e8383b9e4ee1230" name="ab16878e5632234237e8383b9e4ee1230"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a></td>
<td class="fieldname">
fast9_adaptive</td>
<td class="fielddoc">
Whether the FAST9 threshold should be adaptive. </td></tr>
<tr><td class="fieldtype">
<a id="a1967c8fbb6d7220052ba19a3859e5d9f" name="a1967c8fbb6d7220052ba19a3859e5d9f"></a><a class="el" href="vl53l1__types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a></td>
<td class="fieldname">
fast9_min_distance</td>
<td class="fielddoc">
Minimum distance in pixels between corners. </td></tr>
<tr><td class="fieldtype">
<a id="afbd01d7899a4bd96c5efe26e108870fe" name="afbd01d7899a4bd96c5efe26e108870fe"></a><a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></td>
<td class="fieldname">
fast9_num_regions</td>
<td class="fielddoc">
The number of regions of interest the image is split into. </td></tr>
<tr><td class="fieldtype">
<a id="acef34ba76a199b1df7db8663575ebcf0" name="acef34ba76a199b1df7db8663575ebcf0"></a><a class="el" href="vl53l1__types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a></td>
<td class="fieldname">
fast9_padding</td>
<td class="fielddoc">
Padding used in FAST9 detector. </td></tr>
<tr><td class="fieldtype">
<a id="addf29f507f6eb0907560e20b4ba20229" name="addf29f507f6eb0907560e20b4ba20229"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a></td>
<td class="fieldname">
fast9_region_detect</td>
<td class="fielddoc">
Decides whether to detect fast9 corners in specific regions of interest or the whole image (only for feature management) </td></tr>
<tr><td class="fieldtype">
<a id="a5829f618788dd4bce1c6b39fd461344c" name="a5829f618788dd4bce1c6b39fd461344c"></a>struct <a class="el" href="image_8h.html#structpoint__t">point_t</a> *</td>
<td class="fieldname">
fast9_ret_corners</td>
<td class="fielddoc">
Corners. </td></tr>
<tr><td class="fieldtype">
<a id="aee4ccb24fc4030263d5a6d4af13e6952" name="aee4ccb24fc4030263d5a6d4af13e6952"></a><a class="el" href="vl53l1__types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a></td>
<td class="fieldname">
fast9_rsize</td>
<td class="fielddoc">
Amount of corners allocated. </td></tr>
<tr><td class="fieldtype">
<a id="ab85fa885515cb68118e90cc57d846708" name="ab85fa885515cb68118e90cc57d846708"></a><a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></td>
<td class="fieldname">
fast9_threshold</td>
<td class="fielddoc">
FAST9 corner detection threshold. </td></tr>
<tr><td class="fieldtype">
<a id="ad458a766df7f0952e880fdfdadad0a3b" name="ad458a766df7f0952e880fdfdadad0a3b"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a></td>
<td class="fieldname">
feature_management</td>
<td class="fielddoc">
Decides whether to keep track corners in memory for the next frame instead of re-detecting every time. </td></tr>
<tr><td class="fieldtype">
<a id="ab3bab8f3e362de9c3ab1d7843ad81062" name="ab3bab8f3e362de9c3ab1d7843ad81062"></a><a class="el" href="vl53l1__types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a></td>
<td class="fieldname">
fps</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a50177a5e749edc0bdc8ea6a33fee44ac" name="a50177a5e749edc0bdc8ea6a33fee44ac"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a></td>
<td class="fieldname">
got_first_img</td>
<td class="fielddoc">
If we got a image to work with. </td></tr>
<tr><td class="fieldtype">
<a id="af2e32767b08ec68164d72904d3ff50ea" name="af2e32767b08ec68164d72904d3ff50ea"></a><a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></td>
<td class="fieldname">
id</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a48090cfda015ecd52f82d6b72c8052fd" name="a48090cfda015ecd52f82d6b72c8052fd"></a>struct <a class="el" href="image_8h.html#structimage__t">image_t</a></td>
<td class="fieldname">
img_gray</td>
<td class="fielddoc">
Current gray image frame. </td></tr>
<tr><td class="fieldtype">
<a id="ad00cecd0d37a2da50d7e52907e316045" name="ad00cecd0d37a2da50d7e52907e316045"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a></td>
<td class="fieldname">
just_switched_method</td>
<td class="fielddoc">
Boolean to check if methods has been switched (for reinitialization) </td></tr>
<tr><td class="fieldtype">
<a id="a7b0e7579d3f7448cf883fbadef8cf13f" name="a7b0e7579d3f7448cf883fbadef8cf13f"></a><a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></td>
<td class="fieldname">
max_iterations</td>
<td class="fielddoc">
The maximum amount of iterations the Lucas Kanade algorithm should do. </td></tr>
<tr><td class="fieldtype">
<a id="a302a13897d69528d8fd0f36c2a192854" name="a302a13897d69528d8fd0f36c2a192854"></a><a class="el" href="vl53l1__types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a></td>
<td class="fieldname">
max_track_corners</td>
<td class="fielddoc">
Maximum amount of corners Lucas Kanade should track. </td></tr>
<tr><td class="fieldtype">
<a id="ac46ba0a23910701fc0416b9887585474" name="ac46ba0a23910701fc0416b9887585474"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a></td>
<td class="fieldname">
median_filter</td>
<td class="fielddoc">
Decides to use a median filter on the velocity. </td></tr>
<tr><td class="fieldtype">
<a id="af6d3597927c49a82adb5fac801f1bfb5" name="af6d3597927c49a82adb5fac801f1bfb5"></a><a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></td>
<td class="fieldname">
method</td>
<td class="fielddoc">
Method to use to calculate the optical flow. </td></tr>
<tr><td class="fieldtype">
<a id="a081e7989b7c43732e5e23913a1244f69" name="a081e7989b7c43732e5e23913a1244f69"></a>struct <a class="el" href="image_8h.html#structimage__t">image_t</a></td>
<td class="fieldname">
prev_img_gray</td>
<td class="fielddoc">
Previous gray image frame. </td></tr>
<tr><td class="fieldtype">
<a id="ae31f77094c837de0995cce68dde91c13" name="ae31f77094c837de0995cce68dde91c13"></a><a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></td>
<td class="fieldname">
pyramid_level</td>
<td class="fielddoc">
Number of pyramid levels used in Lucas Kanade algorithm (0 == no pyramids used) </td></tr>
<tr><td class="fieldtype">
<a id="a783f63928572c465ff64fe40592a5e93" name="a783f63928572c465ff64fe40592a5e93"></a><a class="el" href="vl53l1__types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a></td>
<td class="fieldname">
resolution_factor</td>
<td class="fielddoc">
The resolution in EdgeFlow to determine the Divergence. </td></tr>
<tr><td class="fieldtype">
<a id="a2acccca55633eced49436da4971f62bd" name="a2acccca55633eced49436da4971f62bd"></a><a class="el" href="vl53l1__types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a></td>
<td class="fieldname">
search_distance</td>
<td class="fielddoc">
Search distance for blockmatching alg. </td></tr>
<tr><td class="fieldtype">
<a id="a9bf4e63875af38d49cd6779b0e578e09" name="a9bf4e63875af38d49cd6779b0e578e09"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a></td>
<td class="fieldname">
show_flow</td>
<td class="fielddoc">
Whether to draw the flow vectors on the image. Watch out! This changes the image as will be received by subsequent processing steps. </td></tr>
<tr><td class="fieldtype">
<a id="a9350ccdd0ffbeda24ae5640894926f5a" name="a9350ccdd0ffbeda24ae5640894926f5a"></a><a class="el" href="vl53l1__types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a></td>
<td class="fieldname">
subpixel_factor</td>
<td class="fielddoc">
The amount of subpixels per pixel. </td></tr>
<tr><td class="fieldtype">
<a id="acca7d40c29039569cd1945dd77b8287a" name="acca7d40c29039569cd1945dd77b8287a"></a><a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></td>
<td class="fieldname">
threshold_vec</td>
<td class="fielddoc">
The threshold in x, y subpixels which the algorithm should stop. </td></tr>
<tr><td class="fieldtype">
<a id="a089f6e08cb72710e2cd379c0e577b9ed" name="a089f6e08cb72710e2cd379c0e577b9ed"></a><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a></td>
<td class="fieldname">
track_back</td>
<td class="fielddoc">
Whether to track flow vectors back to the previous image, in order to check if the back-tracked flow leads to the original corner position. </td></tr>
<tr><td class="fieldtype">
<a id="ace971c356385c5fc287dfdb6874743ee" name="ace971c356385c5fc287dfdb6874743ee"></a><a class="el" href="vl53l1__types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a></td>
<td class="fieldname">
window_size</td>
<td class="fielddoc">
Window size for the blockmatching algorithm (general value for all methods) </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af8580baf85f0c87ba368f1824c1d4063" name="af8580baf85f0c87ba368f1824c1d4063"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8580baf85f0c87ba368f1824c1d4063">&#9670;&#160;</a></span>FAST9_MAX_CORNERS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">define</a> FAST9_MAX_CORNERS&#160;&#160;&#160;512</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="opticflow__calculator_8h_source.html#l00088">88</a> of file <a class="el" href="opticflow__calculator_8h_source.html">opticflow_calculator.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab57bd1ab7d50982c7f9494e40e6da3ca" name="ab57bd1ab7d50982c7f9494e40e6da3ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab57bd1ab7d50982c7f9494e40e6da3ca">&#9670;&#160;</a></span>calc_edgeflow_tot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a> calc_edgeflow_tot </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="opticflow__calculator_8h.html#structopticflow__t">opticflow_t</a> *&#160;</td>
          <td class="paramname"><em>opticflow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="image_8h.html#structimage__t">image_t</a> *&#160;</td>
          <td class="paramname"><em>img</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="inter__thread__data_8h.html#structopticflow__result__t">opticflow_result_t</a> *&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run the optical flow with EDGEFLOW on a new image frame. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*opticflow</td><td>The opticalflow structure that keeps track of previous images </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*state</td><td>The state of the drone </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*img</td><td>The image frame to calculate the optical flow from </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">*result</td><td>The optical flow result </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">computation</td><td>successful </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="opticflow__calculator_8c_source.html#l01017">1017</a> of file <a class="el" href="opticflow__calculator_8c_source.html">opticflow_calculator.c</a>.</p>

<p class="reference">References <a class="el" href="agl__dist_8c_source.html#l00035">agl_dist_value_filtered</a>, <a class="el" href="edge__flow_8c_source.html#l00039">calc_previous_frame_nr()</a>, <a class="el" href="edge__flow_8c_source.html#l00168">calculate_edge_displacement()</a>, <a class="el" href="edge__flow_8c_source.html#l00088">calculate_edge_histogram()</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00084">opticflow_t::camera</a>, <a class="el" href="inter__thread__data_8h_source.html#l00055">opticflow_result_t::camera_id</a>, <a class="el" href="video__device_8h_source.html#l00068">video_config_t::camera_intrinsics</a>, <a class="el" href="inter__thread__data_8h_source.html#l00039">opticflow_result_t::corner_cnt</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00050">opticflow_t::derotation</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00053">opticflow_t::derotation_correction_factor_x</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00054">opticflow_t::derotation_correction_factor_y</a>, <a class="el" href="edge__flow_8h_source.html#l00053">DISP_RANGE_MAX</a>, <a class="el" href="inter__thread__data_8h_source.html#l00051">opticflow_result_t::div_size</a>, <a class="el" href="inter__thread__data_8h_source.html#l00054">opticflow_result_t::divergence</a>, <a class="el" href="edge__flow_8c_source.html#l00297">draw_edgeflow_img()</a>, <a class="el" href="pprz__algebra__float_8h_source.html#l00519">FLOAT_EULERS_ZERO</a>, <a class="el" href="inter__thread__data_8h_source.html#l00045">opticflow_result_t::flow_der_x</a>, <a class="el" href="inter__thread__data_8h_source.html#l00046">opticflow_result_t::flow_der_y</a>, <a class="el" href="inter__thread__data_8h_source.html#l00043">opticflow_result_t::flow_x</a>, <a class="el" href="inter__thread__data_8h_source.html#l00044">opticflow_result_t::flow_y</a>, <a class="el" href="video__device_8h_source.html#l00047">camera_intrinsics_t::focal_x</a>, <a class="el" href="video__device_8h_source.html#l00048">camera_intrinsics_t::focal_y</a>, <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="inter__thread__data_8h_source.html#l00038">opticflow_result_t::fps</a>, <a class="el" href="edge__flow_8c_source.html#l00337">getAmountPeaks()</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00085">opticflow_t::id</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00042">opticflow_t::just_switched_method</a>, <a class="el" href="edge__flow_8c_source.html#l00247">line_fit()</a>, <a class="el" href="edge__flow_8h_source.html#l00046">MAX_HORIZON</a>, <a class="el" href="edge__flow_8h_source.html#l00056">MAX_WINDOW_SIZE</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00051">opticflow_t::median_filter</a>, <a class="el" href="inter__thread__data_8h_source.html#l00057">opticflow_result_t::noise_measurement</a>, <a class="el" href="opticflow__module_8c_source.html#l00069">opticflow</a>, <a class="el" href="detect__window_8c_source.html#l00027">RES</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00060">opticflow_t::resolution_factor</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00049">opticflow_t::search_distance</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00057">opticflow_t::show_flow</a>, <a class="el" href="inter__thread__data_8h_source.html#l00053">opticflow_result_t::surface_roughness</a>, <a class="el" href="opticflow__calculator_8c_source.html#l01219">timeval_diff()</a>, <a class="el" href="inter__thread__data_8h_source.html#l00040">opticflow_result_t::tracked_cnt</a>, <a class="el" href="median__filter_8h_source.html#l00214">UpdateMedianFilterVect3Float</a>, <a class="el" href="inter__thread__data_8h_source.html#l00048">opticflow_result_t::vel_cam</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00381">vel_filt</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00048">opticflow_t::window_size</a>, <a class="el" href="pprz__algebra__float_8h_source.html#l00055">FloatVect3::x</a>, <a class="el" href="edge__flow_8h_source.html#l00073">edgeflow_displacement_t::x</a>, <a class="el" href="pprz__algebra__float_8h_source.html#l00056">FloatVect3::y</a>, and <a class="el" href="pprz__algebra__float_8h_source.html#l00057">FloatVect3::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="opticflow__calculator_8c_source.html#l01181">opticflow_calc_frame()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="opticflow__calculator_8h_ab57bd1ab7d50982c7f9494e40e6da3ca_cgraph.png" border="0" usemap="#aopticflow__calculator_8h_ab57bd1ab7d50982c7f9494e40e6da3ca_cgraph" alt=""/></div>
<map name="aopticflow__calculator_8h_ab57bd1ab7d50982c7f9494e40e6da3ca_cgraph" id="aopticflow__calculator_8h_ab57bd1ab7d50982c7f9494e40e6da3ca_cgraph">
<area shape="rect" title="Run the optical flow with EDGEFLOW on a new image frame." alt="" coords="5,153,144,179"/>
<area shape="rect" href="edge__flow_8c.html#a79cdb2523f43871785a1808f5d3dc260" title="Calc_previous_frame_nr; adaptive Time Horizon." alt="" coords="211,5,388,31"/>
<area shape="poly" title=" " alt="" coords="82,151,124,97,155,66,191,40,204,33,207,38,193,44,158,70,128,100,86,155"/>
<area shape="rect" href="edge__flow_8c.html#a362f7ce14089a9e1bf93464ef5731714" title="Calculate_displacement calculates the displacement between two histograms." alt="" coords="192,55,407,80"/>
<area shape="poly" title=" " alt="" coords="90,151,134,120,191,89,212,81,214,86,193,94,137,124,93,155"/>
<area shape="rect" href="edge__flow_8c.html#a3dacd96582561f6f436df853e4ce0d63" title="Calculate a edge/gradient histogram for each dimension of the image." alt="" coords="203,104,396,129"/>
<area shape="poly" title=" " alt="" coords="133,151,227,130,228,135,134,156"/>
<area shape="rect" href="edge__flow_8c.html#a3b033920386bfd9bd702b743b16d6339" title="Draws edgehistogram, displacement and linefit directly on the image for debugging (only for edgeflow ..." alt="" coords="223,153,375,179"/>
<area shape="poly" title=" " alt="" coords="144,163,210,163,210,169,144,169"/>
<area shape="rect" href="edge__flow_8c.html#a36266096493b2aae14a6aefc01e5c0db" title="getAmountPeaks, calculates the amount of peaks in a edge histogram" alt="" coords="233,203,366,228"/>
<area shape="poly" title=" " alt="" coords="134,176,228,197,227,202,133,181"/>
<area shape="rect" href="edge__flow_8c.html#a57885c6d0cf61ad61c6e6113b2573c88" title="Fits a linear model to an array with pixel displacements with least squares." alt="" coords="266,252,333,277"/>
<area shape="poly" title=" " alt="" coords="94,177,137,207,193,237,253,255,252,260,191,242,135,211,91,181"/>
<area shape="rect" href="opticflow__calculator_8c.html#a37709847b0065c4f371663e9ad30459d" title="Calculate the difference from start till finish." alt="" coords="249,301,349,327"/>
<area shape="poly" title=" " alt="" coords="86,177,128,231,158,261,193,286,236,303,234,308,191,291,155,265,124,234,82,180"/>
<area shape="rect" href="edge__flow_8c.html#a24125fbc0c941963c0e3a2ab55a97e6e" title="Calculate minimum of an array." alt="" coords="469,55,574,80"/>
<area shape="poly" title=" " alt="" coords="407,65,455,65,455,70,407,70"/>
<area shape="rect" href="image_8c.html#a40fe37e1ba3df58796c2aa29e04e8567" title="Draw a pink line on the image." alt="" coords="455,153,588,179"/>
<area shape="poly" title=" " alt="" coords="376,163,441,163,441,169,376,169"/>
<area shape="rect" href="image_8c.html#a5b1f40ae3b945985c9f4d09bdd313de8" title="Draw a line on the image." alt="" coords="636,153,808,179"/>
<area shape="poly" title=" " alt="" coords="588,163,622,163,622,169,588,169"/>
</map>
</div>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="opticflow__calculator_8h_ab57bd1ab7d50982c7f9494e40e6da3ca_icgraph.png" border="0" usemap="#aopticflow__calculator_8h_ab57bd1ab7d50982c7f9494e40e6da3ca_icgraph" alt=""/></div>
<map name="aopticflow__calculator_8h_ab57bd1ab7d50982c7f9494e40e6da3ca_icgraph" id="aopticflow__calculator_8h_ab57bd1ab7d50982c7f9494e40e6da3ca_icgraph">
<area shape="rect" title="Run the optical flow with EDGEFLOW on a new image frame." alt="" coords="645,5,784,31"/>
<area shape="rect" href="opticflow__calculator_8c.html#a89e51af8fe5a0f534193635d181a2086" title="Run the optical flow on a new image frame." alt="" coords="437,5,597,31"/>
<area shape="poly" title=" " alt="" coords="632,21,597,21,597,15,632,15"/>
<area shape="rect" href="opticflow__module_8c.html#adb417544fc559b45532524416ce59953" title="The main optical flow calculation thread." alt="" coords="219,5,389,31"/>
<area shape="poly" title=" " alt="" coords="423,21,389,21,389,15,423,15"/>
<area shape="rect" href="opticflow__module_8c.html#a6026660ee86fbb1f72bada581386e6d9" title="Initialize the optical flow module for the bottom camera." alt="" coords="5,5,171,31"/>
<area shape="poly" title=" " alt="" coords="205,21,171,21,171,15,205,15"/>
</map>
</div>

</div>
</div>
<a id="a3edff14cc7f95b5202ba6841a12dfed3" name="a3edff14cc7f95b5202ba6841a12dfed3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3edff14cc7f95b5202ba6841a12dfed3">&#9670;&#160;</a></span>calc_fast9_lukas_kanade()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a> calc_fast9_lukas_kanade </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="opticflow__calculator_8h.html#structopticflow__t">opticflow_t</a> *&#160;</td>
          <td class="paramname"><em>opticflow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="image_8h.html#structimage__t">image_t</a> *&#160;</td>
          <td class="paramname"><em>img</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="inter__thread__data_8h.html#structopticflow__result__t">opticflow_result_t</a> *&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run the optical flow with fast9 and lukaskanade on a new image frame. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*opticflow</td><td>The opticalflow structure that keeps track of previous images </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*state</td><td>The state of the drone </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*img</td><td>The image frame to calculate the optical flow from </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">*result</td><td>The optical flow result </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Was optical flow successful </dd></dl>

<p class="definition">Definition at line <a class="el" href="opticflow__calculator_8c_source.html#l00494">494</a> of file <a class="el" href="opticflow__calculator_8c_source.html">opticflow_calculator.c</a>.</p>

<p class="reference">References <a class="el" href="act__fast_8c_source.html#l00058">act_fast()</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00057">ACT_FAST</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00080">opticflow_t::actfast_gradient_method</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00077">opticflow_t::actfast_long_step</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00079">opticflow_t::actfast_min_gradient</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00078">opticflow_t::actfast_short_step</a>, <a class="el" href="agl__dist_8c_source.html#l00035">agl_dist_value_filtered</a>, <a class="el" href="linear__flow__fit_8c_source.html#l00399">analyze_flow_field()</a>, <a class="el" href="linear__flow__fit_8c_source.html#l00067">analyze_linear_flow_field()</a>, <a class="el" href="mt9v117__nps_8c_source.html#l00003">bottom_camera</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00084">opticflow_t::camera</a>, <a class="el" href="inter__thread__data_8h_source.html#l00055">opticflow_result_t::camera_id</a>, <a class="el" href="video__device_8h_source.html#l00068">video_config_t::camera_intrinsics</a>, <a class="el" href="opticflow__calculator_8c_source.html#l01234">cmp_flow()</a>, <a class="el" href="inter__thread__data_8h_source.html#l00039">opticflow_result_t::corner_cnt</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00047">opticflow_t::corner_method</a>, <a class="el" href="image_8h_source.html#l00061">point_t::count</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00050">opticflow_t::derotation</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00053">opticflow_t::derotation_correction_factor_x</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00054">opticflow_t::derotation_correction_factor_y</a>, <a class="el" href="video__device_8h_source.html#l00059">video_config_t::dev_name</a>, <a class="el" href="inter__thread__data_8h_source.html#l00051">opticflow_result_t::div_size</a>, <a class="el" href="inter__thread__data_8h_source.html#l00054">opticflow_result_t::divergence</a>, <a class="el" href="image_8h_source.html#l00082">flow_t::error</a>, <a class="el" href="image_8h_source.html#l00049">image_t::eulers</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00056">EXHAUSTIVE_FAST</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00066">opticflow_t::fast9_adaptive</a>, <a class="el" href="fast__rosten_8c_source.html#l00052">fast9_detect()</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00202">FAST9_HIGH_THRESHOLD</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00201">FAST9_LOW_THRESHOLD</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00068">opticflow_t::fast9_min_distance</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00069">opticflow_t::fast9_padding</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00072">opticflow_t::fast9_ret_corners</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00071">opticflow_t::fast9_rsize</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00067">opticflow_t::fast9_threshold</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00073">opticflow_t::feature_management</a>, <a class="el" href="inter__thread__data_8h_source.html#l00045">opticflow_result_t::flow_der_x</a>, <a class="el" href="inter__thread__data_8h_source.html#l00046">opticflow_result_t::flow_der_y</a>, <a class="el" href="inter__thread__data_8h_source.html#l00043">opticflow_result_t::flow_x</a>, <a class="el" href="inter__thread__data_8h_source.html#l00044">opticflow_result_t::flow_y</a>, <a class="el" href="video__device_8h_source.html#l00047">camera_intrinsics_t::focal_x</a>, <a class="el" href="video__device_8h_source.html#l00048">camera_intrinsics_t::focal_y</a>, <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="inter__thread__data_8h_source.html#l00038">opticflow_result_t::fps</a>, <a class="el" href="size__divergence_8c_source.html#l00042">get_size_divergence()</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00041">opticflow_t::got_first_img</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00085">opticflow_t::id</a>, <a class="el" href="image_8c_source.html#l00089">image_copy()</a>, <a class="el" href="image_8c_source.html#l00043">image_create()</a>, <a class="el" href="image_8h_source.html#l00037">IMAGE_GRAYSCALE</a>, <a class="el" href="image_8c_source.html#l00743">image_show_flow_color()</a>, <a class="el" href="image_8c_source.html#l00679">image_show_points()</a>, <a class="el" href="image_8c_source.html#l00112">image_switch()</a>, <a class="el" href="image_8c_source.html#l00131">image_to_grayscale()</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00043">opticflow_t::img_gray</a>, <a class="el" href="median__filter_8h_source.html#l00205">InitMedianFilterVect3Float</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00042">opticflow_t::just_switched_method</a>, <a class="el" href="lucas__kanade_8h_source.html#l00037">LARGE_FLOW_ERROR</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00067">LINEAR_FIT</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00903">manage_flow_features()</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00061">opticflow_t::max_iterations</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00065">opticflow_t::max_track_corners</a>, <a class="el" href="median__filter_8h_source.html#l00028">MEDIAN_DEFAULT_SIZE</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00051">opticflow_t::median_filter</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00060">n_agents</a>, <a class="el" href="detect__gate_8c_source.html#l00085">n_samples</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00059">n_time_steps</a>, <a class="el" href="inter__thread__data_8h_source.html#l00057">opticflow_result_t::noise_measurement</a>, <a class="el" href="opticflow__module_8c_source.html#l00069">opticflow</a>, <a class="el" href="lucas__kanade_8c_source.html#l00074">opticFlowLK()</a>, <a class="el" href="pprz__algebra__float_8h_source.html#l00085">FloatEulers::phi</a>, <a class="el" href="image_8h_source.html#l00079">flow_t::pos</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00832">predict_flow_vectors()</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00044">opticflow_t::prev_img_gray</a>, <a class="el" href="pprz__algebra__float_8h_source.html#l00087">FloatEulers::psi</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00063">opticflow_t::pyramid_level</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00057">opticflow_t::show_flow</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00064">SIZE_DIV</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00059">opticflow_t::subpixel_factor</a>, <a class="el" href="inter__thread__data_8h_source.html#l00053">opticflow_result_t::surface_roughness</a>, <a class="el" href="pprz__algebra__float_8h_source.html#l00086">FloatEulers::theta</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00062">opticflow_t::threshold_vec</a>, <a class="el" href="opticflow__calculator_8c_source.html#l01219">timeval_diff()</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00056">opticflow_t::track_back</a>, <a class="el" href="inter__thread__data_8h_source.html#l00040">opticflow_result_t::tracked_cnt</a>, <a class="el" href="image_8h_source.html#l00048">image_t::ts</a>, <a class="el" href="median__filter_8h_source.html#l00214">UpdateMedianFilterVect3Float</a>, <a class="el" href="pprz__algebra_8h_source.html#l00125">VECT3_ASSIGN</a>, <a class="el" href="inter__thread__data_8h_source.html#l00049">opticflow_result_t::vel_body</a>, <a class="el" href="inter__thread__data_8h_source.html#l00048">opticflow_result_t::vel_cam</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00381">vel_filt</a>, <a class="el" href="image_8h_source.html#l00046">image_t::w</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00048">opticflow_t::window_size</a>, <a class="el" href="pprz__algebra__float_8h_source.html#l00055">FloatVect3::x</a>, <a class="el" href="image_8h_source.html#l00059">point_t::x</a>, <a class="el" href="image_8h_source.html#l00062">point_t::x_sub</a>, <a class="el" href="pprz__algebra__float_8h_source.html#l00056">FloatVect3::y</a>, <a class="el" href="image_8h_source.html#l00060">point_t::y</a>, <a class="el" href="image_8h_source.html#l00063">point_t::y_sub</a>, and <a class="el" href="pprz__algebra__float_8h_source.html#l00057">FloatVect3::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="opticflow__calculator_8c_source.html#l01181">opticflow_calc_frame()</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="opticflow__calculator_8h_a3edff14cc7f95b5202ba6841a12dfed3_cgraph.png" border="0" usemap="#aopticflow__calculator_8h_a3edff14cc7f95b5202ba6841a12dfed3_cgraph" alt=""/></div>
<map name="aopticflow__calculator_8h_a3edff14cc7f95b5202ba6841a12dfed3_cgraph" id="aopticflow__calculator_8h_a3edff14cc7f95b5202ba6841a12dfed3_cgraph">
<area shape="rect" title="Run the optical flow with fast9 and lukaskanade on a new image frame." alt="" coords="5,447,188,472"/>
<area shape="rect" href="act__fast_8c.html#ac19c04b1275447322d4739824fa76d42" title="Do an ACT&#45;FAST corner detection." alt="" coords="284,55,359,80"/>
<area shape="poly" title=" " alt="" coords="97,446,106,385,128,292,146,241,169,189,198,141,234,97,251,85,270,76,272,81,254,89,238,101,203,144,174,192,151,242,133,294,111,386,102,447"/>
<area shape="rect" href="linear__flow__fit_8c.html#a6e7943196456df15d5f62bee064b38a8" title="Analyze a flow field, retrieving information on relative velocities and rotations,..." alt="" coords="250,208,393,233"/>
<area shape="poly" title=" " alt="" coords="100,446,116,406,144,352,184,294,208,267,234,244,245,237,248,241,238,248,211,271,188,297,149,355,121,409,105,448"/>
<area shape="rect" href="linear__flow__fit_8c.html#ac1c609f9975078816d4dd4862d94833b" title="Analyze a linear flow field, retrieving information such as divergence, surface roughness,..." alt="" coords="246,258,397,298"/>
<area shape="poly" title=" " alt="" coords="105,445,155,380,192,342,234,308,244,302,247,307,238,312,196,346,159,384,109,448"/>
<area shape="rect" href="opticflow__calculator_8c.html#a70ba354beb51e86724b52a657ca34c25" title="Compare two flow vectors based on flow distance Used for sorting." alt="" coords="279,323,363,348"/>
<area shape="poly" title=" " alt="" coords="111,444,163,402,198,378,235,357,265,345,267,350,237,362,201,382,166,406,114,448"/>
<area shape="rect" href="fast__rosten_8c.html#a188523b38a244aa925088dfa115ed12e" title="Do a FAST9 corner detection." alt="" coords="499,104,601,129"/>
<area shape="poly" title=" " alt="" coords="96,446,105,389,127,304,145,259,168,215,198,175,234,141,264,124,295,111,362,98,428,97,485,102,485,107,427,102,362,103,297,116,266,129,238,145,202,178,173,218,149,261,132,306,110,390,102,447"/>
<area shape="rect" href="size__divergence_8c.html#a5bd0d30766d4538c9b64fccc7826b12a" title="Get divergence from optical flow vectors based on line sizes between corners." alt="" coords="244,372,399,397"/>
<area shape="poly" title=" " alt="" coords="130,444,235,406,259,399,261,404,237,411,132,449"/>
<area shape="rect" href="image_8c.html#a02932625f9aeb66da70c89a2f2d3a052" title="Copy an image from inut to output This will only work if the formats are the same." alt="" coords="271,421,372,447"/>
<area shape="poly" title=" " alt="" coords="188,446,257,439,257,444,189,452"/>
<area shape="rect" href="image_8c.html#ab5cc0250c461b9d2f043e4884f6b9a53" title="Create a new image." alt="" coords="953,420,1064,445"/>
<area shape="poly" title=" " alt="" coords="155,469,209,477,274,480,341,474,374,467,405,456,420,445,429,431,437,417,453,404,512,377,564,359,612,349,658,346,705,349,755,356,875,378,926,393,971,411,969,416,925,398,874,383,755,361,705,354,658,351,613,355,566,364,514,382,456,408,441,420,433,434,424,448,408,460,376,472,342,480,274,486,209,482,154,475"/>
<area shape="rect" href="image_8c.html#a9745125ba8d5be3b499b8ff972e189ee" title="Shows the flow from a specific point to a new point This works on YUV422 and Grayscale images." alt="" coords="461,869,639,895"/>
<area shape="poly" title=" " alt="" coords="111,470,162,523,198,552,237,578,262,589,285,594,327,597,368,603,388,613,409,631,427,658,436,685,437,712,434,738,432,764,433,790,440,816,457,843,480,861,477,865,453,846,435,818,427,791,427,764,429,737,432,711,430,686,423,660,405,634,385,618,366,608,327,602,284,600,260,594,235,583,195,557,159,526,107,474"/>
<area shape="rect" href="image_8c.html#a6b1f1f53bd730945826724d139048831" title="Show points in an image by coloring them through giving the pixels the maximum value." alt="" coords="246,645,397,671"/>
<area shape="poly" title=" " alt="" coords="108,471,156,542,194,586,238,624,262,638,260,642,234,628,190,589,152,546,103,474"/>
<area shape="rect" href="image_8c.html#a170da2d6e19d1b99084a4fb18bc1a2ee" title="This will switch image *a and *b This is faster as image_copy because it doesn&#39;t copy the whole image..." alt="" coords="265,695,377,720"/>
<area shape="poly" title=" " alt="" coords="105,471,120,512,148,568,187,628,211,656,238,680,254,690,251,694,234,684,207,660,183,632,143,571,116,514,100,473"/>
<area shape="rect" href="image_8c.html#a74a32006a620503a7ca62e5b2a86abd1" title="Convert an image to grayscale." alt="" coords="245,744,398,769"/>
<area shape="poly" title=" " alt="" coords="103,472,116,520,142,590,160,628,182,665,208,699,238,729,246,735,243,740,234,733,204,703,177,668,155,630,137,592,111,522,98,473"/>
<area shape="rect" href="opticflow__calculator_8c.html#a096dc77deb46fbfcc36e72bc8eb24784" title=" " alt="" coords="236,156,407,181"/>
<area shape="poly" title=" " alt="" coords="99,445,112,398,138,330,178,257,204,223,234,193,246,185,249,190,238,197,208,227,183,260,143,332,117,400,104,447"/>
<area shape="rect" href="lucas__kanade_8c.html#adc6992dd246333565509c082600de8d2" title=" " alt="" coords="271,544,372,569"/>
<area shape="poly" title=" " alt="" coords="128,470,280,536,278,541,126,475"/>
<area shape="rect" href="opticflow__calculator_8c.html#a3332fc643e3c25e5ac27404e75b14299" title=" " alt="" coords="243,896,399,921"/>
<area shape="poly" title=" " alt="" coords="105,472,155,599,194,689,238,779,272,836,305,883,300,886,268,839,234,782,189,691,150,601,100,474"/>
<area shape="rect" href="opticflow__calculator_8c.html#a37709847b0065c4f371663e9ad30459d" title="Calculate the difference from start till finish." alt="" coords="271,945,371,971"/>
<area shape="poly" title=" " alt="" coords="100,472,102,550,108,608,118,673,135,742,159,810,193,875,238,931,260,945,257,949,234,935,189,877,154,812,130,743,113,674,102,609,97,550,95,472"/>
<area shape="rect" href="fast__rosten_8c.html#a227ca8d03c30c4a5ad0ebe0113a8a875" title="Do a FAST9 corner detection for a single pixel." alt="" coords="479,5,621,31"/>
<area shape="poly" title=" " alt="" coords="358,57,476,31,477,36,360,62"/>
<area shape="rect" href="image_8c.html#a1cbeeba8965707f0e5e9cb1e256c70c5" title="Get the gradient at a pixel location." alt="" coords="469,55,631,80"/>
<area shape="poly" title=" " alt="" coords="359,65,455,65,455,70,359,70"/>
<area shape="rect" href="fast__rosten_8c.html#a58984f615be2e8c52b3d0b1fc595a250" title="Make offsets for FAST9 calculation." alt="" coords="713,55,855,80"/>
<area shape="poly" title=" " alt="" coords="611,28,710,49,709,54,610,33"/>
<area shape="rect" href="linear__flow__fit_8c.html#ad96c136057bf95b8ca88d210c453dae3" title="Extract information from the parameters that were fit to the optical flow field." alt="" coords="475,203,625,243"/>
<area shape="poly" title=" " alt="" coords="396,258,461,242,462,247,397,263"/>
<area shape="rect" href="linear__flow__fit_8c.html#a4a796ceb3a2c8c6ee52e0f80d7306ced" title="Analyze a linear flow field, retrieving information such as divergence, surface roughness,..." alt="" coords="476,268,624,293"/>
<area shape="poly" title=" " alt="" coords="397,276,462,277,462,282,397,282"/>
<area shape="rect" href="pprz__matrix__decomp__float_8c.html#a9ef015d22c1f50265978a23b21d13e8a" title="SVD decomposition." alt="" coords="726,219,842,244"/>
<area shape="poly" title=" " alt="" coords="610,265,712,244,713,249,611,271"/>
<area shape="rect" href="pprz__matrix__decomp__float_8c.html#a232890252a145ccc1a0dd849bf13cb67" title="SVD based linear solver." alt="" coords="705,268,863,293"/>
<area shape="poly" title=" " alt="" coords="625,278,691,278,691,283,625,283"/>
<area shape="rect" href="pprz__matrix__decomp__float_8c.html#ac7066d363876a03bf650ffdb803aa9df" title=" " alt="" coords="983,195,1034,220"/>
<area shape="poly" title=" " alt="" coords="842,223,969,209,970,214,843,228"/>
<area shape="rect" href="pprz__matrix__decomp__float_8c.html#ac174129986fce93a3240504458351308" title="Some SVD decomposition utility macros and functions." alt="" coords="975,244,1042,269"/>
<area shape="poly" title=" " alt="" coords="843,235,962,249,961,254,842,241"/>
<area shape="poly" title=" " alt="" coords="601,103,709,80,711,85,602,109"/>
<area shape="rect" href="image_8c.html#a3855947fea757e63088255cd9e68fcda" title="Draw a cross&#45;hair on the image." alt="" coords="700,919,868,944"/>
<area shape="poly" title=" " alt="" coords="611,892,710,913,709,918,610,897"/>
<area shape="rect" href="image_8c.html#a5b1f40ae3b945985c9f4d09bdd313de8" title="Draw a line on the image." alt="" coords="923,893,1095,919"/>
<area shape="poly" title=" " alt="" coords="639,884,909,898,909,903,639,889"/>
<area shape="poly" title=" " alt="" coords="868,919,909,915,909,920,869,924"/>
<area shape="rect" href="image_8c.html#a5943c9835fd07452f25e10ae27f16720" title="Show points in an image by coloring them through giving the pixels the maximum value." alt="" coords="455,919,645,944"/>
<area shape="poly" title=" " alt="" coords="394,669,409,680,428,709,436,738,437,766,433,795,430,822,430,850,438,877,457,904,462,909,458,913,453,908,433,879,425,851,424,822,428,794,431,766,431,738,423,711,405,684,390,673"/>
<area shape="poly" title=" " alt="" coords="645,929,686,929,686,934,645,934"/>
<area shape="poly" title=" " alt="" coords="377,153,485,129,486,134,379,159"/>
<area shape="rect" href="opticflow__calculator_8c.html#a61fcf92d4f40ff2d80d6bb03e37120c4" title="Compare the rows of an integer (uint16_t) 2D array based on the first column." alt="" coords="505,153,595,179"/>
<area shape="poly" title=" " alt="" coords="407,165,491,164,491,169,407,170"/>
<area shape="poly" title=" " alt="" coords="345,542,405,501,418,487,427,474,437,461,453,449,515,422,581,404,649,394,717,391,782,393,843,398,943,414,942,420,843,403,782,398,717,396,650,399,583,409,517,427,456,454,441,465,432,477,423,491,408,505,348,546"/>
<area shape="rect" href="image_8c.html#ae0f7d6068a0813bd149153b409474672" title="Calculate the G vector of an image gradient This is used for optical flow calculation." alt="" coords="712,617,856,643"/>
<area shape="poly" title=" " alt="" coords="373,563,455,577,699,615,698,620,454,582,372,568"/>
<area shape="rect" href="image_8c.html#a946e57aea5ff8c79adee46cb2c72dd80" title="Calculate the difference between two images and return the error This will only work with grayscale i..." alt="" coords="717,719,851,744"/>
<area shape="poly" title=" " alt="" coords="373,566,392,574,409,587,421,602,427,618,431,648,436,676,444,689,456,701,484,718,515,731,580,745,646,748,705,743,705,748,646,753,580,750,513,736,482,723,453,705,439,692,431,678,426,649,422,619,416,605,405,591,389,579,371,570"/>
<area shape="rect" href="image_8c.html#aa09d6434519478ba26eab12a96d600ba" title="Free the image." alt="" coords="736,519,832,544"/>
<area shape="poly" title=" " alt="" coords="372,551,722,532,723,537,372,557"/>
<area shape="rect" href="image_8c.html#a5b47fdb25a4d3b575a1a1e1960d5f5e3" title="Calculate the gradients using the following matrix: [0 &#45;1 0; &#45;1 0 1; 0 1 0]." alt="" coords="719,768,849,793"/>
<area shape="poly" title=" " alt="" coords="373,565,392,574,409,587,424,609,430,632,430,676,430,697,432,717,440,736,456,755,485,774,517,787,551,796,587,801,656,801,717,793,718,799,656,806,586,806,550,801,516,792,483,778,453,759,435,739,427,718,424,697,425,676,425,633,419,611,405,590,389,578,371,569"/>
<area shape="rect" href="image_8c.html#afc5615de31e098e68a4d2e3b4b686a1b" title="Calculate the multiplication between two images and return the error This will only work with image g..." alt="" coords="722,817,846,843"/>
<area shape="poly" title=" " alt="" coords="373,564,392,573,409,587,427,617,434,646,433,676,429,704,426,732,427,759,436,785,456,809,474,819,498,826,563,835,638,836,708,833,708,838,638,841,563,840,497,832,472,824,453,813,431,787,421,760,420,732,424,704,428,675,429,647,422,619,405,590,389,578,371,569"/>
<area shape="rect" href="image_8c.html#a527ba2bdc0c396a6eec8f56ee5b8e097" title="This outputs a subpixel window image in grayscale Currently only works with Grayscale images as input..." alt="" coords="693,568,875,593"/>
<area shape="poly" title=" " alt="" coords="372,557,679,573,679,578,372,562"/>
<area shape="rect" href="lucas__kanade_8c.html#ade0d457b31d464e5e9c2e8ca6309474e" title="Compute the optical flow of several points using the Lucas&#45;Kanade algorithm by Yves Bouguet The initi..." alt="" coords="485,667,615,692"/>
<area shape="poly" title=" " alt="" coords="370,567,408,587,424,602,433,617,441,631,456,645,483,659,480,664,453,649,437,635,428,620,420,605,405,591,368,572"/>
<area shape="rect" href="image_8c.html#a6656ee75c4f8c05dbebbab3fae1b332a" title="This function populates given array of image_t structs with wanted number of padded pyramids based on..." alt="" coords="493,464,607,489"/>
<area shape="poly" title=" " alt="" coords="356,541,454,506,497,491,499,496,456,511,358,546"/>
<area shape="poly" title=" " alt="" coords="615,688,674,693,741,691,810,679,843,668,873,652,899,633,921,609,957,556,982,502,998,458,1003,460,987,504,962,559,925,613,902,637,876,656,845,672,811,684,741,697,674,698,615,693"/>
<area shape="poly" title=" " alt="" coords="610,664,709,643,710,648,611,669"/>
<area shape="poly" title=" " alt="" coords="609,689,714,713,713,718,607,695"/>
<area shape="poly" title=" " alt="" coords="561,664,613,611,651,580,692,553,722,541,724,546,695,558,654,584,617,615,564,668"/>
<area shape="poly" title=" " alt="" coords="573,690,627,721,694,753,719,761,717,767,692,758,625,725,570,694"/>
<area shape="poly" title=" " alt="" coords="564,690,617,744,654,776,695,802,712,810,710,815,692,807,651,780,613,748,560,694"/>
<area shape="poly" title=" " alt="" coords="571,664,625,634,692,602,714,595,716,600,694,607,627,638,574,669"/>
<area shape="poly" title=" " alt="" coords="606,487,723,515,722,520,604,492"/>
<area shape="rect" href="image_8c.html#af8fc6003afdb4b14bd2f8112491f2dc4" title="This function adds padding to input image by mirroring the edge image elements." alt="" coords="713,469,855,495"/>
<area shape="poly" title=" " alt="" coords="608,475,699,477,699,483,608,481"/>
<area shape="rect" href="image_8c.html#a038faec3786d8baa2e38c7672129e276" title="This function takes previous padded pyramid level and outputs next level of pyramid without padding." alt="" coords="709,420,859,445"/>
<area shape="poly" title=" " alt="" coords="607,463,702,445,703,450,608,469"/>
<area shape="poly" title=" " alt="" coords="842,467,939,445,940,450,843,472"/>
<area shape="poly" title=" " alt="" coords="860,430,939,430,939,435,860,435"/>
<area shape="rect" href="undistortion_8c.html#a2c56172dffbf789b4b5c164c08395740" title="Transform distorted pixel coordinates to normalized coordinates." alt="" coords="474,969,626,1009"/>
<area shape="poly" title=" " alt="" coords="373,919,408,930,456,953,478,961,476,966,454,958,406,935,372,924"/>
<area shape="rect" href="undistortion_8c.html#a8de5dc518fd2c56789b57c9561b190e8" title="Transform normalized coordinates to distorted pixel coordinates." alt="" coords="467,1059,633,1099"/>
<area shape="poly" title=" " alt="" coords="389,919,408,931,427,952,435,974,442,996,457,1019,496,1050,493,1054,453,1022,437,998,430,976,422,955,405,935,386,924"/>
<area shape="rect" href="undistortion_8c.html#a81ad256378b5df58e5c0e61f3bddcbe2" title="Undistort distorted normalized image coordinates with the invertible Dhane method." alt="" coords="709,968,859,993"/>
<area shape="poly" title=" " alt="" coords="626,983,695,981,695,986,627,989"/>
<area shape="rect" href="undistortion_8c.html#abd20e3c24af3ed0e37744adcbcd6fbc2" title="Transform pixel coordinates to normalized coordinates." alt="" coords="704,1017,864,1043"/>
<area shape="poly" title=" " alt="" coords="627,999,698,1012,697,1017,626,1005"/>
<area shape="rect" href="undistortion_8c.html#a8e2c52fb82e4e3ee37c424ce13d03c29" title="Distort normalized image coordinates with the invertible Dhane method." alt="" coords="717,1067,851,1092"/>
<area shape="poly" title=" " alt="" coords="633,1077,703,1077,703,1082,633,1082"/>
<area shape="rect" href="undistortion_8c.html#a44a90a0656990482d07b3d8ac7928ea6" title="Transform normalized coordinates to pixel coordinates." alt="" coords="704,1116,864,1141"/>
<area shape="poly" title=" " alt="" coords="633,1094,710,1110,709,1116,632,1099"/>
</map>
</div>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="opticflow__calculator_8h_a3edff14cc7f95b5202ba6841a12dfed3_icgraph.png" border="0" usemap="#aopticflow__calculator_8h_a3edff14cc7f95b5202ba6841a12dfed3_icgraph" alt=""/></div>
<map name="aopticflow__calculator_8h_a3edff14cc7f95b5202ba6841a12dfed3_icgraph" id="aopticflow__calculator_8h_a3edff14cc7f95b5202ba6841a12dfed3_icgraph">
<area shape="rect" title="Run the optical flow with fast9 and lukaskanade on a new image frame." alt="" coords="645,5,828,31"/>
<area shape="rect" href="opticflow__calculator_8c.html#a89e51af8fe5a0f534193635d181a2086" title="Run the optical flow on a new image frame." alt="" coords="437,5,597,31"/>
<area shape="poly" title=" " alt="" coords="632,21,597,21,597,15,632,15"/>
<area shape="rect" href="opticflow__module_8c.html#adb417544fc559b45532524416ce59953" title="The main optical flow calculation thread." alt="" coords="219,5,389,31"/>
<area shape="poly" title=" " alt="" coords="423,21,389,21,389,15,423,15"/>
<area shape="rect" href="opticflow__module_8c.html#a6026660ee86fbb1f72bada581386e6d9" title="Initialize the optical flow module for the bottom camera." alt="" coords="5,5,171,31"/>
<area shape="poly" title=" " alt="" coords="205,21,171,21,171,15,205,15"/>
</map>
</div>

</div>
</div>
<a id="a0b04e288db8c4c22a0354161df3e7873" name="a0b04e288db8c4c22a0354161df3e7873"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b04e288db8c4c22a0354161df3e7873">&#9670;&#160;</a></span>kalman_filter_opticflow_velocity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> kalman_filter_opticflow_velocity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *&#160;</td>
          <td class="paramname"><em>velocity_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *&#160;</td>
          <td class="paramname"><em>velocity_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *&#160;</td>
          <td class="paramname"><em>acceleration_measurement</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a>&#160;</td>
          <td class="paramname"><em>fps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a> *&#160;</td>
          <td class="paramname"><em>measurement_noise</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">float</a>&#160;</td>
          <td class="paramname"><em>process_noise</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a>&#160;</td>
          <td class="paramname"><em>reinitialize_kalman</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a89e51af8fe5a0f534193635d181a2086" name="a89e51af8fe5a0f534193635d181a2086"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89e51af8fe5a0f534193635d181a2086">&#9670;&#160;</a></span>opticflow_calc_frame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">bool</a> opticflow_calc_frame </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="opticflow__calculator_8h.html#structopticflow__t">opticflow_t</a> *&#160;</td>
          <td class="paramname"><em>opticflow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="image_8h.html#structimage__t">image_t</a> *&#160;</td>
          <td class="paramname"><em>img</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="inter__thread__data_8h.html#structopticflow__result__t">opticflow_result_t</a> *&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run the optical flow on a new image frame. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*opticflow</td><td>The opticalflow structure that keeps track of previous images </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*state</td><td>The state of the drone </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*img</td><td>The image frame to calculate the optical flow from </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">*result</td><td>The optical flow result </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="opticflow__calculator_8c_source.html#l01181">1181</a> of file <a class="el" href="opticflow__calculator_8c_source.html">opticflow_calculator.c</a>.</p>

<p class="reference">References <a class="el" href="opticflow__calculator_8c_source.html#l00382">body_to_cam</a>, <a class="el" href="opticflow__calculator_8c_source.html#l01017">calc_edgeflow_tot()</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00494">calc_fast9_lukas_kanade()</a>, <a class="el" href="pprz__algebra__float_8c_source.html#l00120">float_rmat_transp_vmult()</a>, <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00085">opticflow_t::id</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00042">opticflow_t::just_switched_method</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00046">opticflow_t::method</a>, <a class="el" href="opticflow__module_8c_source.html#l00069">opticflow</a>, <a class="el" href="inter__thread__data_8h_source.html#l00049">opticflow_result_t::vel_body</a>, and <a class="el" href="inter__thread__data_8h_source.html#l00048">opticflow_result_t::vel_cam</a>.</p>

<p class="reference">Referenced by <a class="el" href="opticflow__module_8c_source.html#l00172">opticflow_module_calc()</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="opticflow__calculator_8h_a89e51af8fe5a0f534193635d181a2086_cgraph.png" border="0" usemap="#aopticflow__calculator_8h_a89e51af8fe5a0f534193635d181a2086_cgraph" alt=""/></div>
<map name="aopticflow__calculator_8h_a89e51af8fe5a0f534193635d181a2086_cgraph" id="aopticflow__calculator_8h_a89e51af8fe5a0f534193635d181a2086_cgraph">
<area shape="rect" title="Run the optical flow on a new image frame." alt="" coords="5,667,165,692"/>
<area shape="rect" href="opticflow__calculator_8c.html#ab57bd1ab7d50982c7f9494e40e6da3ca" title="Run the optical flow with EDGEFLOW on a new image frame." alt="" coords="235,179,374,204"/>
<area shape="poly" title=" " alt="" coords="90,665,290,216,295,218,95,667"/>
<area shape="rect" href="opticflow__calculator_8c.html#a3edff14cc7f95b5202ba6841a12dfed3" title="Run the optical flow with fast9 and lukaskanade on a new image frame." alt="" coords="213,667,396,692"/>
<area shape="poly" title=" " alt="" coords="166,677,200,677,200,682,166,682"/>
<area shape="rect" href="group__math__algebra__float.html#gac852ba0c3ec48acfd8abaefbf933d4b6" title="rotate 3D vector by transposed rotation matrix." alt="" coords="213,716,396,741"/>
<area shape="poly" title=" " alt="" coords="143,689,235,710,234,716,142,695"/>
<area shape="rect" href="edge__flow_8c.html#a79cdb2523f43871785a1808f5d3dc260" title="Calc_previous_frame_nr; adaptive Time Horizon." alt="" coords="463,55,640,80"/>
<area shape="poly" title=" " alt="" coords="318,176,370,133,405,109,443,89,462,82,464,87,445,94,408,114,373,138,321,180"/>
<area shape="rect" href="edge__flow_8c.html#a362f7ce14089a9e1bf93464ef5731714" title="Calculate_displacement calculates the displacement between two histograms." alt="" coords="444,104,659,129"/>
<area shape="poly" title=" " alt="" coords="337,176,443,138,473,130,475,135,445,143,338,181"/>
<area shape="rect" href="edge__flow_8c.html#a3dacd96582561f6f436df853e4ce0d63" title="Calculate a edge/gradient histogram for each dimension of the image." alt="" coords="455,153,648,179"/>
<area shape="poly" title=" " alt="" coords="374,182,440,175,441,180,375,187"/>
<area shape="rect" href="edge__flow_8c.html#a3b033920386bfd9bd702b743b16d6339" title="Draws edgehistogram, displacement and linefit directly on the image for debugging (only for edgeflow ..." alt="" coords="475,252,627,277"/>
<area shape="poly" title=" " alt="" coords="341,202,445,237,480,246,478,251,443,242,339,207"/>
<area shape="rect" href="edge__flow_8c.html#a36266096493b2aae14a6aefc01e5c0db" title="getAmountPeaks, calculates the amount of peaks in a edge histogram" alt="" coords="485,203,618,228"/>
<area shape="poly" title=" " alt="" coords="375,195,471,205,471,210,374,201"/>
<area shape="rect" href="edge__flow_8c.html#a57885c6d0cf61ad61c6e6113b2573c88" title="Fits a linear model to an array with pixel displacements with least squares." alt="" coords="518,5,585,31"/>
<area shape="poly" title=" " alt="" coords="312,177,361,111,399,72,443,40,473,27,503,20,505,25,474,32,445,44,402,76,365,114,316,180"/>
<area shape="rect" href="opticflow__calculator_8c.html#a37709847b0065c4f371663e9ad30459d" title="Calculate the difference from start till finish." alt="" coords="501,301,601,327"/>
<area shape="poly" title=" " alt="" coords="322,202,374,244,408,267,445,286,489,301,487,306,443,291,406,271,371,248,319,206"/>
<area shape="rect" href="edge__flow_8c.html#a24125fbc0c941963c0e3a2ab55a97e6e" title="Calculate minimum of an array." alt="" coords="749,104,855,129"/>
<area shape="poly" title=" " alt="" coords="659,114,736,114,736,119,659,119"/>
<area shape="rect" href="image_8c.html#a40fe37e1ba3df58796c2aa29e04e8567" title="Draw a pink line on the image." alt="" coords="969,249,1103,275"/>
<area shape="poly" title=" " alt="" coords="627,262,955,260,955,265,627,267"/>
<area shape="rect" href="image_8c.html#a5b1f40ae3b945985c9f4d09bdd313de8" title="Draw a line on the image." alt="" coords="1175,405,1347,431"/>
<area shape="poly" title=" " alt="" coords="1102,272,1128,284,1164,309,1196,338,1244,393,1240,396,1192,341,1160,313,1125,288,1100,277"/>
<area shape="poly" title=" " alt="" coords="304,666,313,606,335,517,353,469,376,421,406,376,442,337,464,324,487,316,489,321,466,329,446,341,410,379,381,423,358,471,340,519,318,607,310,667"/>
<area shape="rect" href="act__fast_8c.html#ac19c04b1275447322d4739824fa76d42" title="Do an ACT&#45;FAST corner detection." alt="" coords="514,1067,589,1092"/>
<area shape="poly" title=" " alt="" coords="384,690,398,702,424,739,434,776,435,813,430,849,424,886,422,923,428,962,446,1003,475,1035,510,1058,507,1062,472,1039,442,1006,423,964,416,923,419,885,425,848,430,812,429,777,419,742,394,705,380,694"/>
<area shape="rect" href="linear__flow__fit_8c.html#a6e7943196456df15d5f62bee064b38a8" title="Analyze a flow field, retrieving information on relative velocities and rotations,..." alt="" coords="480,417,623,443"/>
<area shape="poly" title=" " alt="" coords="308,665,324,625,352,570,391,511,415,484,442,460,468,445,471,450,446,464,419,487,396,514,357,573,329,628,313,667"/>
<area shape="rect" href="linear__flow__fit_8c.html#ac1c609f9975078816d4dd4862d94833b" title="Analyze a linear flow field, retrieving information such as divergence, surface roughness,..." alt="" coords="476,351,627,391"/>
<area shape="poly" title=" " alt="" coords="306,665,319,616,345,546,363,507,385,469,411,434,442,403,462,389,465,394,446,407,416,437,390,472,368,510,350,548,324,618,311,667"/>
<area shape="rect" href="opticflow__calculator_8c.html#a70ba354beb51e86724b52a657ca34c25" title="Compare two flow vectors based on flow distance Used for sorting." alt="" coords="509,519,593,544"/>
<area shape="poly" title=" " alt="" coords="314,665,365,610,402,579,443,553,469,542,495,536,496,541,470,548,445,558,405,583,369,614,318,668"/>
<area shape="rect" href="fast__rosten_8c.html#a188523b38a244aa925088dfa115ed12e" title="Do a FAST9 corner detection." alt="" coords="751,968,853,993"/>
<area shape="poly" title=" " alt="" coords="372,690,397,701,413,714,422,727,431,739,445,750,476,764,504,769,556,769,582,769,607,773,634,783,661,803,676,822,683,841,686,880,688,917,694,936,709,953,722,964,739,971,737,975,720,968,705,957,690,938,682,919,680,880,678,842,671,824,657,807,631,788,606,778,581,774,556,774,503,775,474,769,443,755,427,743,418,730,409,717,395,706,370,694"/>
<area shape="rect" href="size__divergence_8c.html#a5bd0d30766d4538c9b64fccc7826b12a" title="Get divergence from optical flow vectors based on line sizes between corners." alt="" coords="474,568,629,593"/>
<area shape="poly" title=" " alt="" coords="324,664,377,633,443,602,467,595,468,600,445,607,379,638,327,669"/>
<area shape="rect" href="image_8c.html#a02932625f9aeb66da70c89a2f2d3a052" title="Copy an image from inut to output This will only work if the formats are the same." alt="" coords="501,617,602,643"/>
<area shape="poly" title=" " alt="" coords="368,664,486,640,488,645,369,669"/>
<area shape="rect" href="image_8c.html#ab5cc0250c461b9d2f043e4884f6b9a53" title="Create a new image." alt="" coords="1205,817,1316,843"/>
<area shape="poly" title=" " alt="" coords="385,690,398,702,410,721,419,746,427,807,427,879,423,957,419,1034,419,1106,427,1166,435,1190,446,1208,474,1237,502,1256,530,1267,560,1272,626,1274,707,1279,804,1296,846,1295,896,1280,940,1259,975,1237,1003,1214,1027,1188,1070,1128,1124,1052,1162,999,1196,944,1245,854,1250,856,1201,947,1167,1002,1129,1056,1074,1131,1031,1192,1007,1218,978,1241,943,1263,898,1284,847,1300,804,1301,706,1285,626,1280,559,1277,529,1272,500,1260,471,1241,442,1212,430,1192,421,1168,413,1107,413,1034,417,956,421,879,421,807,413,747,405,723,394,705,381,694"/>
<area shape="rect" href="image_8c.html#a9745125ba8d5be3b499b8ff972e189ee" title="Shows the flow from a specific point to a new point This works on YUV422 and Grayscale images." alt="" coords="713,413,891,439"/>
<area shape="poly" title=" " alt="" coords="310,665,328,632,357,588,396,542,443,504,551,476,726,439,727,444,552,481,445,508,399,546,361,591,333,635,315,668"/>
<area shape="rect" href="image_8c.html#a6b1f1f53bd730945826724d139048831" title="Show points in an image by coloring them through giving the pixels the maximum value." alt="" coords="476,667,627,692"/>
<area shape="poly" title=" " alt="" coords="396,677,462,677,462,682,396,682"/>
<area shape="rect" href="image_8c.html#a170da2d6e19d1b99084a4fb18bc1a2ee" title="This will switch image *a and *b This is faster as image_copy because it doesn&#39;t copy the whole image..." alt="" coords="495,817,607,843"/>
<area shape="poly" title=" " alt="" coords="378,690,398,701,409,713,416,725,423,750,429,774,435,785,446,796,463,808,483,816,481,821,461,812,442,800,431,788,424,776,418,751,411,727,405,716,394,705,376,694"/>
<area shape="rect" href="image_8c.html#a74a32006a620503a7ca62e5b2a86abd1" title="Convert an image to grayscale." alt="" coords="475,867,628,892"/>
<area shape="poly" title=" " alt="" coords="381,690,398,701,413,720,420,740,422,779,425,817,432,834,446,852,463,864,460,868,442,856,427,837,419,818,417,779,415,741,408,723,394,705,378,694"/>
<area shape="rect" href="opticflow__calculator_8c.html#a096dc77deb46fbfcc36e72bc8eb24784" title=" " alt="" coords="466,968,637,993"/>
<area shape="poly" title=" " alt="" coords="382,690,398,701,417,726,426,751,429,775,428,799,427,849,433,875,446,902,477,934,512,959,509,963,473,939,442,905,427,876,421,849,422,799,423,775,421,752,412,729,394,705,379,694"/>
<area shape="rect" href="lucas__kanade_8c.html#adc6992dd246333565509c082600de8d2" title=" " alt="" coords="501,716,602,741"/>
<area shape="poly" title=" " alt="" coords="369,689,488,713,486,719,368,695"/>
<area shape="rect" href="opticflow__calculator_8c.html#a3332fc643e3c25e5ac27404e75b14299" title=" " alt="" coords="473,1173,629,1199"/>
<area shape="poly" title=" " alt="" coords="384,690,398,701,417,727,431,752,439,776,443,801,442,848,434,896,424,944,419,994,424,1046,433,1074,446,1102,460,1121,477,1138,513,1164,510,1169,473,1142,456,1125,442,1105,428,1076,419,1047,413,994,418,943,428,895,437,848,438,801,434,778,426,754,413,730,394,705,381,694"/>
<area shape="rect" href="fast__rosten_8c.html#a227ca8d03c30c4a5ad0ebe0113a8a875" title="Do a FAST9 corner detection for a single pixel." alt="" coords="731,1067,873,1092"/>
<area shape="poly" title=" " alt="" coords="589,1077,717,1077,717,1082,589,1082"/>
<area shape="rect" href="image_8c.html#a1cbeeba8965707f0e5e9cb1e256c70c5" title="Get the gradient at a pixel location." alt="" coords="721,1116,883,1141"/>
<area shape="poly" title=" " alt="" coords="589,1084,724,1111,723,1116,588,1089"/>
<area shape="rect" href="fast__rosten_8c.html#a58984f615be2e8c52b3d0b1fc595a250" title="Make offsets for FAST9 calculation." alt="" coords="965,1017,1107,1043"/>
<area shape="poly" title=" " alt="" coords="862,1064,961,1043,962,1048,863,1069"/>
<area shape="rect" href="linear__flow__fit_8c.html#ad96c136057bf95b8ca88d210c453dae3" title="Extract information from the parameters that were fit to the optical flow field." alt="" coords="727,349,877,389"/>
<area shape="poly" title=" " alt="" coords="627,368,713,367,713,372,627,373"/>
<area shape="rect" href="linear__flow__fit_8c.html#a4a796ceb3a2c8c6ee52e0f80d7306ced" title="Analyze a linear flow field, retrieving information such as divergence, surface roughness,..." alt="" coords="728,299,876,324"/>
<area shape="poly" title=" " alt="" coords="626,351,734,325,736,330,627,356"/>
<area shape="rect" href="pprz__matrix__decomp__float_8c.html#a9ef015d22c1f50265978a23b21d13e8a" title="SVD decomposition." alt="" coords="978,348,1094,373"/>
<area shape="poly" title=" " alt="" coords="863,321,965,343,964,348,862,327"/>
<area shape="rect" href="pprz__matrix__decomp__float_8c.html#a232890252a145ccc1a0dd849bf13cb67" title="SVD based linear solver." alt="" coords="957,299,1115,324"/>
<area shape="poly" title=" " alt="" coords="877,309,943,309,943,314,877,314"/>
<area shape="poly" title=" " alt="" coords="854,989,963,1012,961,1017,853,994"/>
<area shape="poly" title=" " alt="" coords="891,422,1161,417,1161,422,891,427"/>
<area shape="rect" href="image_8c.html#a3855947fea757e63088255cd9e68fcda" title="Draw a cross&#45;hair on the image." alt="" coords="952,456,1120,481"/>
<area shape="poly" title=" " alt="" coords="873,436,953,451,952,456,872,441"/>
<area shape="poly" title=" " alt="" coords="1093,453,1190,431,1191,436,1094,458"/>
<area shape="rect" href="image_8c.html#a5943c9835fd07452f25e10ae27f16720" title="Show points in an image by coloring them through giving the pixels the maximum value." alt="" coords="707,463,897,488"/>
<area shape="poly" title=" " alt="" coords="626,669,643,662,657,652,671,635,678,618,681,581,683,544,690,524,705,505,723,492,726,496,709,509,695,527,689,545,686,582,683,619,676,638,660,656,645,667,628,674"/>
<area shape="poly" title=" " alt="" coords="897,470,938,469,938,474,898,475"/>
<area shape="poly" title=" " alt="" coords="637,978,737,978,737,983,637,983"/>
<area shape="rect" href="opticflow__calculator_8c.html#a61fcf92d4f40ff2d80d6bb03e37120c4" title="Compare the rows of an integer (uint16_t) 2D array based on the first column." alt="" coords="757,1017,847,1043"/>
<area shape="poly" title=" " alt="" coords="617,991,744,1016,743,1021,616,996"/>
<area shape="poly" title=" " alt="" coords="602,724,631,716,657,701,669,689,675,675,680,647,685,618,692,604,705,591,742,570,791,552,851,538,914,529,978,524,1038,526,1090,534,1128,549,1160,574,1186,605,1207,640,1224,676,1247,747,1259,803,1253,804,1242,748,1219,678,1203,642,1182,608,1156,578,1125,554,1088,539,1038,531,978,530,915,534,852,544,793,557,744,575,708,595,696,607,690,620,685,648,680,677,673,692,660,705,633,721,603,729"/>
<area shape="rect" href="image_8c.html#ae0f7d6068a0813bd149153b409474672" title="Calculate the G vector of an image gradient This is used for optical flow calculation." alt="" coords="964,665,1108,691"/>
<area shape="poly" title=" " alt="" coords="602,717,706,701,834,688,950,680,950,685,834,693,707,706,603,722"/>
<area shape="rect" href="image_8c.html#a946e57aea5ff8c79adee46cb2c72dd80" title="Calculate the difference between two images and return the error This will only work with grayscale i..." alt="" coords="969,767,1103,792"/>
<area shape="poly" title=" " alt="" coords="603,735,707,750,955,772,955,777,706,755,602,740"/>
<area shape="rect" href="image_8c.html#aa09d6434519478ba26eab12a96d600ba" title="Free the image." alt="" coords="988,868,1084,893"/>
<area shape="poly" title=" " alt="" coords="603,735,632,744,660,758,676,773,685,789,693,803,708,816,775,846,846,865,915,875,974,878,974,884,915,880,845,870,773,851,705,820,689,806,680,791,672,777,657,763,630,749,601,740"/>
<area shape="rect" href="image_8c.html#a5b47fdb25a4d3b575a1a1e1960d5f5e3" title="Calculate the gradients using the following matrix: [0 &#45;1 0; &#45;1 0 1; 0 1 0]." alt="" coords="971,817,1101,843"/>
<area shape="poly" title=" " alt="" coords="597,739,659,758,707,774,839,801,958,818,957,824,838,806,706,779,658,763,595,744"/>
<area shape="rect" href="image_8c.html#afc5615de31e098e68a4d2e3b4b686a1b" title="Calculate the multiplication between two images and return the error This will only work with image g..." alt="" coords="974,564,1098,589"/>
<area shape="poly" title=" " alt="" coords="602,721,630,714,657,701,672,686,680,670,688,653,705,637,768,607,835,588,901,577,960,573,960,579,902,583,837,593,770,612,708,642,693,656,685,672,677,689,660,706,632,719,603,727"/>
<area shape="rect" href="image_8c.html#a527ba2bdc0c396a6eec8f56ee5b8e097" title="This outputs a subpixel window image in grayscale Currently only works with Grayscale images as input..." alt="" coords="945,615,1127,640"/>
<area shape="poly" title=" " alt="" coords="601,717,658,701,681,687,706,674,763,658,822,645,932,631,932,636,822,651,764,663,708,679,684,692,660,706,603,722"/>
<area shape="rect" href="lucas__kanade_8c.html#ade0d457b31d464e5e9c2e8ca6309474e" title="Compute the optical flow of several points using the Lucas&#45;Kanade algorithm by Yves Bouguet The initi..." alt="" coords="737,716,867,741"/>
<area shape="poly" title=" " alt="" coords="602,726,723,726,723,731,602,731"/>
<area shape="rect" href="image_8c.html#a6656ee75c4f8c05dbebbab3fae1b332a" title="This function populates given array of image_t structs with wanted number of padded pyramids based on..." alt="" coords="745,919,859,944"/>
<area shape="poly" title=" " alt="" coords="603,731,633,741,660,759,675,776,682,794,686,829,689,864,696,881,708,897,733,914,730,918,705,901,691,883,684,865,680,830,677,796,670,779,657,763,631,746,602,736"/>
<area shape="poly" title=" " alt="" coords="867,723,989,726,1059,735,1128,751,1186,777,1233,807,1230,812,1183,782,1126,757,1058,741,989,732,867,728"/>
<area shape="poly" title=" " alt="" coords="861,713,963,691,964,696,862,718"/>
<area shape="poly" title=" " alt="" coords="862,739,964,761,963,766,861,744"/>
<area shape="poly" title=" " alt="" coords="816,740,869,794,906,825,947,852,976,864,974,869,944,856,903,829,866,798,813,744"/>
<area shape="poly" title=" " alt="" coords="826,739,880,769,946,801,973,811,972,816,944,806,877,774,823,744"/>
<area shape="poly" title=" " alt="" coords="812,714,865,659,902,627,944,600,962,591,964,596,947,604,906,631,869,663,816,718"/>
<area shape="poly" title=" " alt="" coords="822,714,877,683,944,650,969,641,971,647,946,655,879,687,825,718"/>
<area shape="poly" title=" " alt="" coords="859,916,974,891,975,896,860,922"/>
<area shape="rect" href="image_8c.html#af8fc6003afdb4b14bd2f8112491f2dc4" title="This function adds padding to input image by mirroring the edge image elements." alt="" coords="965,919,1107,944"/>
<area shape="poly" title=" " alt="" coords="860,929,951,929,951,934,860,934"/>
<area shape="poly" title=" " alt="" coords="1086,916,1126,902,1180,875,1227,848,1230,852,1183,880,1128,907,1088,921"/>
<area shape="rect" href="undistortion_8c.html#a2c56172dffbf789b4b5c164c08395740" title="Transform distorted pixel coordinates to normalized coordinates." alt="" coords="726,1166,878,1206"/>
<area shape="poly" title=" " alt="" coords="629,1183,712,1183,712,1189,629,1189"/>
<area shape="rect" href="undistortion_8c.html#a8de5dc518fd2c56789b57c9561b190e8" title="Transform normalized coordinates to distorted pixel coordinates." alt="" coords="719,1230,885,1270"/>
<area shape="poly" title=" " alt="" coords="603,1196,710,1224,709,1229,602,1201"/>
</map>
</div>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="opticflow__calculator_8h_a89e51af8fe5a0f534193635d181a2086_icgraph.png" border="0" usemap="#aopticflow__calculator_8h_a89e51af8fe5a0f534193635d181a2086_icgraph" alt=""/></div>
<map name="aopticflow__calculator_8h_a89e51af8fe5a0f534193635d181a2086_icgraph" id="aopticflow__calculator_8h_a89e51af8fe5a0f534193635d181a2086_icgraph">
<area shape="rect" title="Run the optical flow on a new image frame." alt="" coords="437,5,597,31"/>
<area shape="rect" href="opticflow__module_8c.html#adb417544fc559b45532524416ce59953" title="The main optical flow calculation thread." alt="" coords="219,5,389,31"/>
<area shape="poly" title=" " alt="" coords="423,21,389,21,389,15,423,15"/>
<area shape="rect" href="opticflow__module_8c.html#a6026660ee86fbb1f72bada581386e6d9" title="Initialize the optical flow module for the bottom camera." alt="" coords="5,5,171,31"/>
<area shape="poly" title=" " alt="" coords="205,21,171,21,171,15,205,15"/>
</map>
</div>

</div>
</div>
<a id="a7d03c46f201e48777ef9d612fe73fc51" name="a7d03c46f201e48777ef9d612fe73fc51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d03c46f201e48777ef9d612fe73fc51">&#9670;&#160;</a></span>opticflow_calc_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main__demo5_8c.html#ad690ee00a2cf77bbaaf89c3f1ef110d4">void</a> opticflow_calc_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="opticflow__calculator_8h.html#structopticflow__t">opticflow_t</a>&#160;</td>
          <td class="paramname"><em>opticflow</em>[]</td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize the opticflow calculator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">*opticflow</td><td>The new optical flow calculator </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="opticflow__calculator_8c_source.html#l00397">397</a> of file <a class="el" href="opticflow__calculator_8c_source.html">opticflow_calculator.c</a>.</p>

<p class="reference">References <a class="el" href="opticflow__calculator_8h_source.html#l00080">opticflow_t::actfast_gradient_method</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00077">opticflow_t::actfast_long_step</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00079">opticflow_t::actfast_min_gradient</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00078">opticflow_t::actfast_short_step</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00382">body_to_cam</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00084">opticflow_t::camera</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00047">opticflow_t::corner_method</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00050">opticflow_t::derotation</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00053">opticflow_t::derotation_correction_factor_x</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00054">opticflow_t::derotation_correction_factor_y</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00066">opticflow_t::fast9_adaptive</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00088">FAST9_MAX_CORNERS</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00068">opticflow_t::fast9_min_distance</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00075">opticflow_t::fast9_num_regions</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00069">opticflow_t::fast9_padding</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00074">opticflow_t::fast9_region_detect</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00072">opticflow_t::fast9_ret_corners</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00071">opticflow_t::fast9_rsize</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00067">opticflow_t::fast9_threshold</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00073">opticflow_t::feature_management</a>, <a class="el" href="pprz__algebra__float_8h_source.html#l00333">float_rmat_of_eulers</a>, <a class="el" href="main__demo5_8c_source.html#l00058">foo</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00085">opticflow_t::id</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00061">opticflow_t::max_iterations</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00065">opticflow_t::max_track_corners</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00051">opticflow_t::median_filter</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00046">opticflow_t::method</a>, <a class="el" href="opticflow__module_8c_source.html#l00069">opticflow</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00314">OPTICFLOW_ACTFAST_GRADIENT_METHOD</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00318">OPTICFLOW_ACTFAST_GRADIENT_METHOD_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00294">OPTICFLOW_ACTFAST_LONG_STEP</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00298">OPTICFLOW_ACTFAST_LONG_STEP_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00324">OPTICFLOW_ACTFAST_MIN_GRADIENT</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00328">OPTICFLOW_ACTFAST_MIN_GRADIENT_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00304">OPTICFLOW_ACTFAST_SHORT_STEP</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00308">OPTICFLOW_ACTFAST_SHORT_STEP_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00335">OPTICFLOW_BODY_TO_CAM_PHI</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00345">OPTICFLOW_BODY_TO_CAM_PHI_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00341">OPTICFLOW_BODY_TO_CAM_PSI</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00351">OPTICFLOW_BODY_TO_CAM_PSI_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00338">OPTICFLOW_BODY_TO_CAM_THETA</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00348">OPTICFLOW_BODY_TO_CAM_THETA_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00070">OPTICFLOW_CORNER_METHOD</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00074">OPTICFLOW_CORNER_METHOD_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00224">OPTICFLOW_DEROTATION</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00228">OPTICFLOW_DEROTATION_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00234">OPTICFLOW_DEROTATION_CORRECTION_FACTOR_X</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00238">OPTICFLOW_DEROTATION_CORRECTION_FACTOR_X_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00244">OPTICFLOW_DEROTATION_CORRECTION_FACTOR_Y</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00248">OPTICFLOW_DEROTATION_CORRECTION_FACTOR_Y_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00161">OPTICFLOW_FAST9_ADAPTIVE</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00165">OPTICFLOW_FAST9_ADAPTIVE_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00181">OPTICFLOW_FAST9_MIN_DISTANCE</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00185">OPTICFLOW_FAST9_MIN_DISTANCE_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00284">OPTICFLOW_FAST9_NUM_REGIONS</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00288">OPTICFLOW_FAST9_NUM_REGIONS_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00191">OPTICFLOW_FAST9_PADDING</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00195">OPTICFLOW_FAST9_PADDING_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00274">OPTICFLOW_FAST9_REGION_DETECT</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00278">OPTICFLOW_FAST9_REGION_DETECT_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00171">OPTICFLOW_FAST9_THRESHOLD</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00175">OPTICFLOW_FAST9_THRESHOLD_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00264">OPTICFLOW_FEATURE_MANAGEMENT</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00268">OPTICFLOW_FEATURE_MANAGEMENT_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00131">OPTICFLOW_MAX_ITERATIONS</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00135">OPTICFLOW_MAX_ITERATIONS_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00081">OPTICFLOW_MAX_TRACK_CORNERS</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00085">OPTICFLOW_MAX_TRACK_CORNERS_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00254">OPTICFLOW_MEDIAN_FILTER</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00258">OPTICFLOW_MEDIAN_FILTER_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00206">OPTICFLOW_METHOD</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00210">OPTICFLOW_METHOD_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00151">OPTICFLOW_PYRAMID_LEVEL</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00155">OPTICFLOW_PYRAMID_LEVEL_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00121">OPTICFLOW_RESOLUTION_FACTOR</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00125">OPTICFLOW_RESOLUTION_FACTOR_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00101">OPTICFLOW_SEARCH_DISTANCE</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00105">OPTICFLOW_SEARCH_DISTANCE_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00369">OPTICFLOW_SHOW_FLOW</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00373">OPTICFLOW_SHOW_FLOW_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00111">OPTICFLOW_SUBPIXEL_FACTOR</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00115">OPTICFLOW_SUBPIXEL_FACTOR_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00141">OPTICFLOW_THRESHOLD_VEC</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00145">OPTICFLOW_THRESHOLD_VEC_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00357">OPTICFLOW_TRACK_BACK</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00361">OPTICFLOW_TRACK_BACK_CAMERA2</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00091">OPTICFLOW_WINDOW_SIZE</a>, <a class="el" href="opticflow__calculator_8c_source.html#l00095">OPTICFLOW_WINDOW_SIZE_CAMERA2</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00063">opticflow_t::pyramid_level</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00060">opticflow_t::resolution_factor</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00049">opticflow_t::search_distance</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00057">opticflow_t::show_flow</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00059">opticflow_t::subpixel_factor</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00062">opticflow_t::threshold_vec</a>, <a class="el" href="opticflow__calculator_8h_source.html#l00056">opticflow_t::track_back</a>, and <a class="el" href="opticflow__calculator_8h_source.html#l00048">opticflow_t::window_size</a>.</p>

<p class="reference">Referenced by <a class="el" href="opticflow__module_8c_source.html#l00110">opticflow_module_init()</a>.</p>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="opticflow__calculator_8h_a7d03c46f201e48777ef9d612fe73fc51_icgraph.png" border="0" usemap="#aopticflow__calculator_8h_a7d03c46f201e48777ef9d612fe73fc51_icgraph" alt=""/></div>
<map name="aopticflow__calculator_8h_a7d03c46f201e48777ef9d612fe73fc51_icgraph" id="aopticflow__calculator_8h_a7d03c46f201e48777ef9d612fe73fc51_icgraph">
<area shape="rect" title="Initialize the opticflow calculator." alt="" coords="219,5,361,31"/>
<area shape="rect" href="opticflow__module_8c.html#a6026660ee86fbb1f72bada581386e6d9" title="Initialize the optical flow module for the bottom camera." alt="" coords="5,5,171,31"/>
<area shape="poly" title=" " alt="" coords="205,21,171,21,171,15,205,15"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_01fcd3835fb4e7d9331b722d86291b65.html">sw</a></li><li class="navelem"><a class="el" href="dir_5e9153041680afc3c016fd52fa730b56.html">airborne</a></li><li class="navelem"><a class="el" href="dir_c2abcdd6ccb39c3582929c0e3f5651c2.html">modules</a></li><li class="navelem"><a class="el" href="dir_304e79c9f5d09ea65a2f55aafb6a6b9d.html">computer_vision</a></li><li class="navelem"><a class="el" href="dir_737909cdc08fae475c12e10cc4efa3fe.html">opticflow</a></li><li class="navelem"><a class="el" href="opticflow__calculator_8h.html">opticflow_calculator.h</a></li>
    <li class="footer">Generated on Thu Jun 12 2025 09:27:06 for Paparazzi UAS by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
